"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[70],{70:($e,W,s)=>{s.r(W),s.d(W,{CrupdateTitleModule:()=>De});var p=s(4364),b=s(6798),C=s(3786),d=s(847),m=s(2463),u=s(9536),y=s(6491),t=s(2316),h=s(5515),pt=s(616),o=s(1707),E=s(9141),$=s(6313),j=s(3534),ct=s(9170),dt=s(3466),mt=s(1435),_=s(707),ut=s(6034),K=s(3340),A=s(5718),Q=s(1654),f=s(781),R=s(298),Z=s(2529),V=s(6536),F=s(3297);function gt(a,n){if(1&a&&(t.TgZ(0,"option",44),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("ngValue",e),t.xp6(1),t.hij(" ",e," ")}}function _t(a,n){if(1&a&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.code),t.xp6(1),t.hij(" ",e.name," ")}}class I{constructor(n,e,i,r,l,c,x,v){this.store=n,this.fb=e,this.route=i,this.uploadQueue=r,this.settings=l,this.router=c,this.titles=x,this.toast=v,this.poster$=new y.X(null),this.form=this.fb.group({name:["",[o.kI.required,o.kI.minLength(1)]],original_title:["",[o.kI.required,o.kI.minLength(1)]],is_series:[!1,[o.kI.required]],language:[""],tagline:["",[o.kI.minLength(1),o.kI.maxLength(250)]],poster:["",[o.kI.minLength(1),o.kI.maxLength(250)]],backdrop:["",[o.kI.minLength(1),o.kI.maxLength(250)]],description:["",[o.kI.minLength(1)]],budget:["",o.kI.min(1)],revenue:["",o.kI.min(1)],runtime:["",[o.kI.min(1),o.kI.max(300)]],country:["",[o.kI.minLength(1),o.kI.maxLength(50)]],popularity:[1,[o.kI.min(1),o.kI.max(100)]],certification:["pg"],release_date:[""],allow_update:[!0]}),this.certificationOptions=this.settings.getJson("browse.ageRatings")}ngOnInit(){this.store.dispatch(new m.N1),this.store.select(u.i.title).pipe((0,ct.h)(n=>!!n.id),(0,dt.q)(1)).subscribe(n=>{this.form.patchValue(Object.assign(Object.assign({},n),{release_date:n.release_date?n.release_date.split("T")[0]:null})),this.poster$.next(n.poster)}),this.form.get("poster").valueChanges.subscribe(n=>{this.poster$.next(n)})}uploadImage(n){(0,$.r)({types:[j.j.image]}).then(e=>{this.uploadQueue.start(e,{uri:"uploads/images",httpParams:{diskPrefix:`media-images/${n}s`}}).subscribe(r=>{this.form.patchValue({[n]:r.fileEntry.url})})})}submit(){this.store.dispatch(new m.cY(!0));const n=this.store.selectSnapshot(u.i.title).id;(n?this.titles.update(n,this.form.value):this.titles.create(this.form.value)).pipe((0,mt.x)(()=>this.store.dispatch(new m.cY(!1)))).subscribe(i=>{this.toast.open(n?_.X.TITLE_UPDATE_SUCCESS:_.X.TITLE_CREATE_SUCCESS),this.router.navigate(n?[this.router.url.includes("admin")?"/admin/titles":this.router.url.split("?")[0].replace("/edit","")]:[this.router.url.replace("new",""+i.title.id),"edit"])})}}I.\u0275fac=function(n){return new(n||I)(t.Y36(d.yh),t.Y36(o.qu),t.Y36(b.gz),t.Y36(E.A),t.Y36(ut.Z),t.Y36(b.F0),t.Y36(K.d),t.Y36(A.F))},I.\u0275cmp=t.Xpm({type:I,selectors:[["primary-facts-panel"]],features:[t._Bn([E.A])],decls:93,vars:21,consts:[[3,"formGroup","ngSubmit"],[1,"poster-container"],[3,"src"],[1,"many-inputs"],[1,"inline-container"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","minlength","1","maxlength","250","required",""],["for","original-title","trans",""],["type","text","formControlName","original_title","id","original-title","minlength","1","maxlength","250","required",""],["for","type","trans",""],["formControlName","is_series","id","type","required",""],["trans","",3,"ngValue"],["for","allow_update","trans",""],["formControlName","allow_update","id","allow_update","required",""],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","backdrop","trans",""],["type","text","formControlName","backdrop","id","backdrop","minlength","1","maxlength","250"],["for","release_date","trans",""],["type","date","formControlName","release_date","id","release_date","placeholder","YYYY-MM-DD","required",""],["for","tagline","trans",""],["type","text","formControlName","tagline","id","tagline","minlength","1","maxlength","250"],["for","description","trans",""],["type","text","formControlName","description","id","description","minlength","1","cdkTextareaAutosize","","cdkAutosizeMinRows","6"],["for","runtime","trans",""],["type","number","formControlName","runtime","id","runtime","min","1","max","500"],[1,"input-container","certification-input-container"],["for","certification","trans",""],["formControlName","certification","id","certification"],[3,"ngValue",4,"ngFor","ngForOf"],["for","budget","trans",""],["type","number","formControlName","budget","id","budget","min","1"],["for","revenue","trans",""],["type","number","formControlName","revenue","id","revenue","min","1"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000"],["for","language","trans",""],["formControlName","language","id","language","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],[3,"ngValue"],[3,"value"]],template:function(n,e){1&n&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return e.submit()}),t.TgZ(1,"div",1),t._UZ(2,"media-image",2),t.ALo(3,"async"),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"label",6),t._uU(8,"Title"),t.qZA(),t._UZ(9,"input",7),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"label",8),t._uU(12,"Original Title"),t.qZA(),t._UZ(13,"input",9),t.qZA(),t.qZA(),t.TgZ(14,"div",4),t.TgZ(15,"div",5),t.TgZ(16,"label",10),t._uU(17,"Type"),t.qZA(),t.TgZ(18,"select",11),t.TgZ(19,"option",12),t._uU(20,"Movie"),t.qZA(),t.TgZ(21,"option",12),t._uU(22,"TV Series"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",5),t.TgZ(24,"label",13),t._uU(25,"Allow Auto Update"),t.qZA(),t.TgZ(26,"select",14),t.TgZ(27,"option",12),t._uU(28,"Yes"),t.qZA(),t.TgZ(29,"option",12),t._uU(30,"No"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",5),t.TgZ(32,"label",15),t._uU(33,"Poster"),t.qZA(),t.TgZ(34,"div",16),t.TgZ(35,"button",17),t.NdJ("click",function(){return e.uploadImage("poster")}),t.ALo(36,"trans"),t._UZ(37,"mat-icon",18),t.qZA(),t._UZ(38,"input",19),t.qZA(),t.qZA(),t.TgZ(39,"div",5),t.TgZ(40,"label",20),t._uU(41,"Backdrop"),t.qZA(),t.TgZ(42,"div",16),t.TgZ(43,"button",17),t.NdJ("click",function(){return e.uploadImage("backdrop")}),t.ALo(44,"trans"),t._UZ(45,"mat-icon",18),t.qZA(),t._UZ(46,"input",21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",4),t.TgZ(48,"div",5),t.TgZ(49,"label",22),t._uU(50,"Release Date"),t.qZA(),t._UZ(51,"input",23),t.qZA(),t.TgZ(52,"div",5),t.TgZ(53,"label",24),t._uU(54,"Tagline"),t.qZA(),t._UZ(55,"input",25),t.qZA(),t.qZA(),t.TgZ(56,"div",5),t.TgZ(57,"label",26),t._uU(58,"Overview"),t.qZA(),t._UZ(59,"textarea",27),t.qZA(),t.TgZ(60,"div",4),t.TgZ(61,"div",5),t.TgZ(62,"label",28),t._uU(63,"Runtime"),t.qZA(),t._UZ(64,"input",29),t.qZA(),t.TgZ(65,"div",30),t.TgZ(66,"label",31),t._uU(67,"Certification"),t.qZA(),t.TgZ(68,"select",32),t.YNc(69,gt,2,2,"option",33),t.qZA(),t.qZA(),t.qZA(),t.TgZ(70,"div",4),t.TgZ(71,"div",5),t.TgZ(72,"label",34),t._uU(73,"Budget"),t.qZA(),t._UZ(74,"input",35),t.qZA(),t.TgZ(75,"div",5),t.TgZ(76,"label",36),t._uU(77,"Revenue"),t.qZA(),t._UZ(78,"input",37),t.qZA(),t.qZA(),t.TgZ(79,"div",4),t.TgZ(80,"div",5),t.TgZ(81,"label",38),t._uU(82,"Popularity"),t.qZA(),t._UZ(83,"input",39),t.qZA(),t.TgZ(84,"div",5),t.TgZ(85,"label",40),t._uU(86,"Language"),t.qZA(),t.TgZ(87,"select",41),t.YNc(88,_t,2,2,"option",42),t.ALo(89,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(90,"button",43),t.ALo(91,"async"),t._uU(92," Save "),t.qZA(),t.qZA()),2&n&&(t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("src",t.lcZ(3,11,e.poster$)),t.xp6(17),t.Q6J("ngValue",!1),t.xp6(2),t.Q6J("ngValue",!0),t.xp6(6),t.Q6J("ngValue",!0),t.xp6(2),t.Q6J("ngValue",!1),t.xp6(6),t.Q6J("matTooltip",t.lcZ(36,13,"Upload poster")),t.xp6(8),t.Q6J("matTooltip",t.lcZ(44,15,"Upload backdrop")),t.xp6(26),t.Q6J("ngForOf",e.certificationOptions),t.xp6(19),t.Q6J("ngForOf",t.lcZ(89,17,e.languageOptions$)),t.xp6(2),t.Q6J("disabled",t.lcZ(91,19,e.loading$)))},directives:[o._Y,o.JL,o.sg,Q.P,h.P,o.Fj,o.JJ,o.u,o.wO,o.nD,o.Q7,o.EJ,o.YN,o.Kr,f.lW,R.gM,Z.Hw,V.IC,o.wV,o.qQ,o.Fd,p.sg],pipes:[p.Ov,F.R],styles:["primary-facts-panel{display:block}primary-facts-panel .poster-container{display:flex;margin-bottom:20px}primary-facts-panel .poster-container media-image img{height:350px;width:auto;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px}primary-facts-panel .poster-container .many-inputs{margin-left:20px;flex:1 1 auto}primary-facts-panel .poster-container .many-inputs .input-container:last-of-type{margin-bottom:0}primary-facts-panel .certification-input-container option,primary-facts-panel .certification-input-container select{text-transform:uppercase}\n"],encapsulation:2,changeDetection:0}),(0,C.gn)([(0,d.Ph)(u.i.title)],I.prototype,"title$",void 0),(0,C.gn)([(0,d.Ph)(u.i.loading)],I.prototype,"loading$",void 0),(0,C.gn)([(0,d.Ph)(u.i.languageOptions)],I.prototype,"languageOptions$",void 0);var H=s(8208),Y=s(5381),q=s(1625),S=s(9348),g=s(2213),ht=s(253),ft=s(1143),tt=s(3927),Zt=s(4388),Tt=s(4622),O=s(5924),et=s(4298);function xt(a,n){1&a&&(t.TgZ(0,"h2",11),t._uU(1,"Edit"),t.qZA())}function bt(a,n){1&a&&(t.TgZ(0,"h2",11),t._uU(1,"Create"),t.qZA())}function Ct(a,n){if(1&a&&(t.TgZ(0,"div",12),t.TgZ(1,"label",13),t._uU(2,"Person"),t.qZA(),t._UZ(3,"input",14),t.qZA()),2&a){const e=t.oxw();t.xp6(3),t.Q6J("value",null==e.credit?null:e.credit.name)}}function vt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"search-input",15),t.NdJ("resultSelected",function(r){return t.CHM(e),t.oxw().setCredit(r)}),t.qZA()}if(2&a){const e=t.oxw();t.Q6J("type",e.personModelType)("resetInputOnSelect",!1)}}function yt(a,n){1&a&&(t.TgZ(0,"div",12),t.TgZ(1,"label",16),t._uU(2,"Character"),t.qZA(),t._UZ(3,"input",17),t.qZA())}function At(a,n){if(1&a&&(t.TgZ(0,"mat-option",25),t.TgZ(1,"div",26),t.TgZ(2,"span",27),t._uU(3,"Job"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",28),t.TgZ(6,"span",27),t._uU(7,"Department"),t.qZA(),t._uU(8),t.qZA(),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.job),t.xp6(4),t.hij(": ",e.job,""),t.xp6(4),t.hij(": ",e.department,"")}}function It(a,n){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",12),t.TgZ(2,"label",18),t._uU(3,"Job"),t.qZA(),t._UZ(4,"input",19),t.qZA(),t.TgZ(5,"mat-autocomplete",20,21),t.NdJ("optionSelected",function(r){return t.CHM(e),t.oxw().jobSelected(r)}),t.YNc(7,At,9,3,"mat-option",22),t.ALo(8,"async"),t.qZA(),t.TgZ(9,"div",12),t.TgZ(10,"label",23),t._uU(11,"Department"),t.qZA(),t._UZ(12,"input",24),t.qZA(),t.BQk()}if(2&a){const e=t.MAs(6),i=t.oxw();t.xp6(4),t.Q6J("matAutocomplete",e),t.xp6(3),t.Q6J("ngForOf",t.lcZ(8,2,i.filteredJobs))}}class U{constructor(n,e,i,r,l,c,x){this.store=n,this.toast=e,this.fb=i,this.actions$=r,this.dialogRef=l,this.valueLists=c,this.data=x,this.personModelType=ht.o.PERSON,this.form=this.fb.group({character:[""],department:[""],job:[""]}),this.availableJobs=[],this.data.credit&&(this.credit=this.data.credit,this.form.patchValue(this.data.credit.pivot))}ngOnInit(){this.valueLists.get(["tmdbJobs"]).subscribe(n=>{this.availableJobs=[],n.tmdbJobs.forEach(e=>{const i=e.jobs.map(r=>({job:r,department:e.department}));this.availableJobs=[...this.availableJobs,...i]}),this.filteredJobs=this.form.get("job").valueChanges.pipe((0,ft.O)(""),(0,tt.U)(e=>this.availableJobs.filter(i=>!(e=e.toLowerCase())||i.job.toLowerCase().includes(e)||i.department.toLowerCase().includes(e)).slice(0,10)))})}confirm(){var n;const e=this.data.credit?new m.bX(this.credit.pivot.id,this.getPayload()):new m.RP(null===(n=this.credit)||void 0===n?void 0:n.id,this.data.mediaItem,this.getPayload());this.store.dispatch(e).subscribe(()=>{this.close(),this.toast.open(this.data.credit?_.X.CREDIT_UPDATE_SUCCESS:_.X.CREDIT_ADD_SUCCESS)},i=>{this.toast.open(i.message)})}close(){this.dialogRef.close()}setCredit(n){this.credit=n}getPayload(){const n=this.form.value;return"cast"===this.data.type&&(n.department="cast",n.job="cast"),n}jobSelected(n){const e=this.availableJobs.find(i=>i.job===n.option.value);this.form.patchValue({job:e.job,department:e.department})}}U.\u0275fac=function(n){return new(n||U)(t.Y36(d.yh),t.Y36(A.F),t.Y36(o.qu),t.Y36(d.eX),t.Y36(g.so),t.Y36(Zt.l),t.Y36(g.WI))},U.\u0275cmp=t.Xpm({type:U,selectors:[["crupdate-credit-modal"]],decls:17,vars:10,consts:[[1,"modal-header"],["class","modal-title","mat-dialog-title","","trans","",4,"ngIf"],["type","button",1,"close-button","no-style","icon-button",3,"click"],["svgIcon","close"],["autocomplete","off","ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],["class","input-container",4,"ngIf"],["placeholder","Search for a person...","label","Person","searchProvider","local",3,"type","resetInputOnSelect","resultSelected",4,"ngIf"],[4,"ngIf"],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["mat-dialog-title","","trans","",1,"modal-title"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","disabled","",3,"value"],["placeholder","Search for a person...","label","Person","searchProvider","local",3,"type","resetInputOnSelect","resultSelected"],["for","character","trans",""],["type","text","id","character","formControlName","character","required",""],["for","job","trans",""],["type","text","id","job","formControlName","job","required","",3,"matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],["class","multiline-mat-menu-item",3,"value",4,"ngFor","ngForOf"],["for","department","trans",""],["type","text","id","department","formControlName","department","required",""],[1,"multiline-mat-menu-item",3,"value"],[1,"title"],["trans",""],[1,"description"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,xt,2,0,"h2",1),t.YNc(2,bt,2,0,"h2",1),t.TgZ(3,"button",2),t.NdJ("click",function(){return e.close()}),t._UZ(4,"mat-icon",3),t.qZA(),t.qZA(),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return e.confirm()}),t.TgZ(6,"mat-dialog-content",5),t.YNc(7,Ct,4,1,"div",6),t.YNc(8,vt,1,2,"search-input",7),t.YNc(9,yt,4,0,"div",6),t.YNc(10,It,13,4,"ng-container",8),t.qZA(),t.TgZ(11,"mat-dialog-actions"),t.TgZ(12,"button",9),t.NdJ("click",function(){return e.close()}),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",10),t.ALo(15,"async"),t._uU(16," Save "),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",e.data.credit),t.xp6(1),t.Q6J("ngIf",!e.data.credit),t.xp6(3),t.Q6J("formGroup",e.form),t.xp6(2),t.Q6J("ngIf",e.data.credit),t.xp6(1),t.Q6J("ngIf",!e.data.credit),t.xp6(1),t.Q6J("ngIf","cast"===e.data.type),t.xp6(1),t.Q6J("ngIf","crew"===e.data.type),t.xp6(4),t.Q6J("disabled",t.lcZ(15,8,e.loading$)))},directives:[p.O5,Z.Hw,o.JL,o.sg,g.xY,g.H8,f.lW,h.P,g.uh,Tt.J,o.Fj,o.JJ,o.u,o.Q7,O.ZL,O.XC,p.sg,et.ey],pipes:[p.Ov],styles:["crupdate-credit-modal{display:block;width:400px;max-width:100%}crupdate-credit-modal search-input input{border-color:var(--be-divider-default);margin-bottom:20px}\n"],encapsulation:2,changeDetection:0}),(0,C.gn)([(0,d.Ph)(u.i.loading)],U.prototype,"loading$",void 0);var J=s(6142),z=s(382),T=s(395),X=s(1303),L=s(6403);function qt(a,n){1&a&&(t.TgZ(0,"th",8),t._uU(1,"Character"),t.qZA())}function Pt(a,n){1&a&&(t.TgZ(0,"th",9),t._uU(1,"Department"),t.qZA())}function Ut(a,n){1&a&&(t.TgZ(0,"th",10),t._uU(1,"Job"),t.qZA())}function Jt(a,n){1&a&&(t.TgZ(0,"button",21),t._UZ(1,"mat-icon",22),t.qZA())}function Nt(a,n){if(1&a&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.name)}}function kt(a,n){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.pivot.character)}}function Mt(a,n){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.pivot.department)}}function wt(a,n){if(1&a&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Oqu(e.pivot.job)}}function Et(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr",11),t.TgZ(1,"td"),t.TgZ(2,"div",12),t.YNc(3,Jt,2,0,"button",13),t._UZ(4,"media-image",14),t.TgZ(5,"span"),t._uU(6),t.qZA(),t.qZA(),t.YNc(7,Nt,2,1,"div",15),t.qZA(),t.YNc(8,kt,2,1,"td",16),t.YNc(9,Mt,2,1,"td",16),t.YNc(10,wt,2,1,"td",16),t.TgZ(11,"td",17),t.TgZ(12,"button",18),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().openCrupdateCreditModal(l)}),t._UZ(13,"mat-icon",19),t.qZA(),t.TgZ(14,"button",18),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().detachCredit(l)}),t._UZ(15,"mat-icon",20),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=n.$implicit,i=t.oxw();t.xp6(3),t.Q6J("ngIf","cast"===i.type),t.xp6(1),t.Q6J("src",e.poster),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Q6J("ngIf","cast"===i.type),t.xp6(1),t.Q6J("ngIf","crew"===i.type),t.xp6(1),t.Q6J("ngIf","crew"===i.type)}}function St(a,n){1&a&&(t.TgZ(0,"no-results-message",23),t.TgZ(1,"span",24),t._uU(2,"Nothing to Display."),t.qZA(),t.qZA())}let B=(()=>{class a{constructor(e,i,r,l){this.dialog=e,this.store=i,this.toast=r,this.datatable=l}ngOnInit(){this.datatable.init()}ngOnChanges(e){e.mediaItem&&e.mediaItem.currentValue&&(this.datatable.data="cast"===this.type?this.getCast(this.mediaItem.credits):this.getCrew(this.mediaItem.credits))}ngOnDestroy(){this.datatable.destroy()}openCrupdateCreditModal(e){this.dialog.open(U,{credit:e,type:this.type,mediaItem:this.mediaItem})}detachCredit(e){this.dialog.open(H.z,{title:"Remove Credit",body:"Are you sure you want to remove this credit?",ok:"Remove"}).afterClosed().subscribe(i=>{!i||this.store.dispatch(new m.NQ(this.mediaItem,e)).subscribe(()=>{this.toast.open(_.X.CREDIT_REMOVE_SUCCESS)})})}changeCreditsOrder(e){this.store.selectSnapshot(u.i.loading)||this.store.dispatch(new m.Qs(this.mediaItem,e.previousIndex,e.currentIndex,this.type))}getCast(e){return e?e.filter(i=>"cast"===i.pivot.department):[]}getCrew(e){return e?e.filter(i=>"cast"!==i.pivot.department):[]}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(Y.u),t.Y36(d.yh),t.Y36(A.F),t.Y36(J.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["credits-panel"]],inputs:{mediaItem:"mediaItem",type:"type"},features:[t._Bn([J.x]),t.TTD],decls:17,vars:10,consts:[["type","button","mat-raised-button","","color","accent","leftContent","","trans","",3,"click"],["cdkDropList","",1,"material-table",3,"cdkDropListDisabled","cdkDropListDropped"],["table-sort-header","","trans",""],["table-sort-header","pivot.character","trans","",4,"ngIf"],["table-sort-header","pivot.department","trans","",4,"ngIf"],["table-sort-header","pivot.job","trans","",4,"ngIf"],["cdkDrag","",4,"ngFor","ngForOf"],["svgImage","awards.svg",4,"ngIf"],["table-sort-header","pivot.character","trans",""],["table-sort-header","pivot.department","trans",""],["table-sort-header","pivot.job","trans",""],["cdkDrag",""],[1,"column-with-image"],["type","button","mat-icon-button","","cdkDragHandle","",4,"ngIf"],["size","small",3,"src"],[4,"cdkDragPreview"],[4,"ngIf"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","close"],["type","button","mat-icon-button","","cdkDragHandle",""],["svgIcon","drag-handle"],["svgImage","awards.svg"],["primary-text","","trans",""]],template:function(e,i){1&e&&(t.TgZ(0,"datatable-header"),t.TgZ(1,"button",0),t.NdJ("click",function(){return i.openCrupdateCreditModal()}),t._uU(2,"Add Credit"),t.qZA(),t.qZA(),t.TgZ(3,"table",1),t.NdJ("cdkDropListDropped",function(l){return i.changeCreditsOrder(l)}),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th",2),t._uU(7,"Name"),t.qZA(),t.YNc(8,qt,2,0,"th",3),t.YNc(9,Pt,2,0,"th",4),t.YNc(10,Ut,2,0,"th",5),t._UZ(11,"th"),t.qZA(),t.qZA(),t.TgZ(12,"tbody"),t.YNc(13,Et,16,6,"tr",6),t.ALo(14,"async"),t.qZA(),t.qZA(),t.YNc(15,St,3,0,"no-results-message",7),t.ALo(16,"async")),2&e&&(t.xp6(3),t.Q6J("cdkDropListDisabled","crew"===i.type),t.xp6(5),t.Q6J("ngIf","cast"===i.type),t.xp6(1),t.Q6J("ngIf","crew"===i.type),t.xp6(1),t.Q6J("ngIf","crew"===i.type),t.xp6(3),t.Q6J("ngForOf",t.lcZ(14,6,i.datatable.data$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(16,8,i.datatable.data$).length))},directives:[z.G,f.lW,h.P,T.Wj,X.p,p.O5,p.sg,T.Zt,Q.P,T.pV,Z.Hw,T.Bh,L.U],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:block;padding:0}.cdk-drag-handle[_ngcontent-%COMP%]{cursor:move;margin-right:10px}.cdk-drag-preview[_ngcontent-%COMP%]{padding:15px;font-size:1.5rem;border-radius:4px;background-color:var(--be-background);box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:var(--be-hover)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),a})();function Ot(a,n){1&a&&(t.TgZ(0,"h2",30),t._uU(1,"Edit Episode"),t.qZA())}function Qt(a,n){1&a&&(t.TgZ(0,"h2",30),t._uU(1,"Create Episode"),t.qZA())}function Ft(a,n){if(1&a&&(t.TgZ(0,"div",31),t._uU(1),t.qZA()),2&a){const e=n.ngIf;t.xp6(1),t.hij(" ",e," ")}}class N{constructor(n,e,i,r,l,c){this.store=n,this.toast=e,this.fb=i,this.uploadQueue=r,this.dialogRef=l,this.data=c,this.episode$=new y.X(null),this.errors$=new y.X({}),this.episodeForm=this.fb.group({name:["",[o.kI.required,o.kI.minLength(1)]],poster:["",[o.kI.minLength(1),o.kI.maxLength(250)]],description:["",[o.kI.minLength(1)]],popularity:[50,[o.kI.min(1),o.kI.max(1e3)]],release_date:[""],episode_number:[""]})}ngOnInit(){this.data.episode?(this.bindToStoreEpisode(),this.episodeForm.patchValue(Object.assign(Object.assign({},this.episode$.value),{release_date:this.episode$.value.release_date.split("T")[0]})),setTimeout(()=>this.loadEpisodeCredits())):this.episodeForm.patchValue({episode_number:this.data.season?this.data.season.episode_count+1:1})}confirm(){this.data.episode?this.updateEpisode():this.createEpisode()}close(){this.dialogRef.close()}createEpisode(){this.store.dispatch(new m.bL(this.data.season,this.episodeForm.value)).subscribe(()=>{this.errors$.next({}),this.toast.open(_.X.EPISODE_CREATE_SUCCESS);const n=this.store.selectSnapshot(u.i.seasons).find(e=>e.id===this.data.season.id).episodes;this.data.episode=n[n.length-1]},n=>this.errors$.next(n.errors))}updateEpisode(){this.store.dispatch(new m.GT(this.data.episode,this.episodeForm.value)).subscribe(()=>{this.errors$.next({}),this.toast.open(_.X.EPISODE_UPDATE_SUCCESS),this.close()},n=>this.errors$.next(n.errors))}uploadPoster(){(0,$.r)({types:[j.j.image]}).then(n=>{this.uploadQueue.start(n,{uri:"uploads/images",httpParams:{diskPrefix:"media-images/posters"}}).subscribe(i=>{this.episodeForm.patchValue({poster:i.fileEntry.url})})})}bindToStoreEpisode(){this.store.select(u.i.title).subscribe(n=>{if(n.seasons){const e=n.seasons.find(i=>i.number===this.data.episode.season_number).episodes.find(i=>i.episode_number===this.data.episode.episode_number);this.episode$.next(Object.assign({},e))}})}loadEpisodeCredits(){this.data.episode.credits||this.store.dispatch(new m.QN(this.episode$.value)).toPromise()}}N.\u0275fac=function(n){return new(n||N)(t.Y36(d.yh),t.Y36(A.F),t.Y36(o.qu),t.Y36(E.A),t.Y36(g.so),t.Y36(g.WI))},N.\u0275cmp=t.Xpm({type:N,selectors:[["crupdate-episode-modal"]],features:[t._Bn([E.A])],decls:55,vars:30,consts:[[1,"modal-header"],["class","modal-title","mat-dialog-title","","trans","",4,"ngIf"],["type","button",1,"close-button","no-style","icon-button",3,"click"],["svgIcon","close"],["autocomplete","off","ngNativeValidate","",3,"formGroup","ngSubmit"],["animationDuration","0ms","color","accent",3,"dynamicHeight"],[3,"label"],[1,"many-inputs","primary-facts-panel"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","minlength","1","maxlength","250","required",""],["for","episode_number","trans",""],["type","number","formControlName","episode_number","id","episode_number","min","1","required",""],["class","error",4,"ngIf"],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","release_date","trans",""],["type","date","formControlName","release_date","id","release_date","required",""],["for","description","trans",""],["type","text","formControlName","description","id","description","minlength","1","cdkTextareaAutosize","","cdkAutosizeMinRows","6"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000"],[3,"label","disabled"],["type","cast",3,"mediaItem"],["type","crew",3,"mediaItem"],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["mat-dialog-title","","trans","",1,"modal-title"],[1,"error"]],template:function(n,e){1&n&&(t.TgZ(0,"div",0),t.YNc(1,Ot,2,0,"h2",1),t.YNc(2,Qt,2,0,"h2",1),t.TgZ(3,"button",2),t.NdJ("click",function(){return e.close()}),t._UZ(4,"mat-icon",3),t.qZA(),t.qZA(),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return e.confirm()}),t.TgZ(6,"mat-dialog-content"),t.TgZ(7,"mat-tab-group",5),t.TgZ(8,"mat-tab",6),t.ALo(9,"trans"),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"label",9),t._uU(13,"Title"),t.qZA(),t._UZ(14,"input",10),t.qZA(),t.TgZ(15,"div",8),t.TgZ(16,"label",11),t._uU(17,"Number"),t.qZA(),t._UZ(18,"input",12),t.YNc(19,Ft,2,1,"div",13),t.ALo(20,"async"),t.qZA(),t.TgZ(21,"div",8),t.TgZ(22,"label",14),t._uU(23,"Poster"),t.qZA(),t.TgZ(24,"div",15),t.TgZ(25,"button",16),t.NdJ("click",function(){return e.uploadPoster()}),t.ALo(26,"trans"),t._UZ(27,"mat-icon",17),t.qZA(),t._UZ(28,"input",18),t.qZA(),t.qZA(),t.TgZ(29,"div",8),t.TgZ(30,"label",19),t._uU(31,"Release Date"),t.qZA(),t._UZ(32,"input",20),t.qZA(),t.TgZ(33,"div",8),t.TgZ(34,"label",21),t._uU(35,"Overview"),t.qZA(),t._UZ(36,"textarea",22),t.qZA(),t.TgZ(37,"div",8),t.TgZ(38,"label",23),t._uU(39,"Popularity"),t.qZA(),t._UZ(40,"input",24),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"mat-tab",25),t.ALo(42,"trans"),t._UZ(43,"credits-panel",26),t.ALo(44,"async"),t.qZA(),t.TgZ(45,"mat-tab",25),t.ALo(46,"trans"),t._UZ(47,"credits-panel",27),t.ALo(48,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"mat-dialog-actions"),t.TgZ(50,"button",28),t.NdJ("click",function(){return e.close()}),t._uU(51,"Cancel"),t.qZA(),t.TgZ(52,"button",29),t.ALo(53,"async"),t._uU(54," Save "),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf",e.data.episode),t.xp6(1),t.Q6J("ngIf",!e.data.episode),t.xp6(3),t.Q6J("formGroup",e.episodeForm),t.xp6(2),t.Q6J("dynamicHeight",!0),t.xp6(1),t.Q6J("label",t.lcZ(9,14,"Primary Facts")),t.xp6(11),t.Q6J("ngIf",t.lcZ(20,16,e.errors$).episode_number),t.xp6(6),t.Q6J("matTooltip",t.lcZ(26,18,"Upload poster")),t.xp6(16),t.Q6J("label",t.lcZ(42,20,"Cast"))("disabled",!e.data.episode),t.xp6(2),t.Q6J("mediaItem",t.lcZ(44,22,e.episode$)),t.xp6(2),t.Q6J("label",t.lcZ(46,24,"Crew"))("disabled",!e.data.episode),t.xp6(2),t.Q6J("mediaItem",t.lcZ(48,26,e.episode$)),t.xp6(5),t.Q6J("disabled",t.lcZ(53,28,e.loading$)))},directives:[p.O5,Z.Hw,o.JL,o.sg,g.xY,S.SP,S.uX,h.P,o.Fj,o.JJ,o.u,o.wO,o.nD,o.Q7,o.wV,o.qQ,f.lW,R.gM,V.IC,o.Fd,B,g.H8,g.uh],pipes:[F.R,p.Ov],styles:["[_nghost-%COMP%]{display:block;width:750px;max-width:100%}label[_ngcontent-%COMP%]{text-transform:capitalize}.primary-facts-panel[_ngcontent-%COMP%], credits-panel[_ngcontent-%COMP%]{padding:20px 0}"],changeDetection:0}),(0,C.gn)([(0,d.Ph)(u.i.loading)],N.prototype,"loading$",void 0);var Yt=s(8256);function Lt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"div",7),t._UZ(3,"media-image",8),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"formattedDate"),t.qZA(),t.TgZ(11,"td",9),t.TgZ(12,"button",10),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().openCrupdateEpisodeModal(l)}),t._UZ(13,"mat-icon",11),t.qZA(),t.TgZ(14,"button",10),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().deleteEpisode(l)}),t._UZ(15,"mat-icon",12),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=n.$implicit;t.xp6(3),t.Q6J("src",e.poster)("alt",e.name),t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.episode_number),t.xp6(2),t.Oqu(t.lcZ(10,5,e.release_date))}}function Dt(a,n){1&a&&(t.TgZ(0,"no-results-message"),t.TgZ(1,"span",13),t._uU(2,"Nothing to Display."),t.qZA(),t.TgZ(3,"span",14),t._uU(4,"This season does not have any episodes yet."),t.qZA(),t.qZA())}let $t=(()=>{class a{constructor(e,i,r,l,c){this.store=e,this.dialog=i,this.toast=r,this.route=l,this.datatable=c,this.trackByFn=(x,v)=>v.id}ngOnInit(){this.datatable.init()}ngAfterViewInit(){const e=+this.route.snapshot.params.episodeNumber;if(e){const i=this.season.episodes.find(r=>r.episode_number===e);i&&this.openCrupdateEpisodeModal(i)}}ngOnChanges(e){e.season.currentValue&&e.season.currentValue.episodes&&(this.datatable.data=this.season.episodes)}ngOnDestroy(){this.datatable.destroy()}deleteEpisode(e){this.dialog.open(H.z,{title:"Delete Episode",body:"Are you sure you want to delete this episode?",ok:"Delete"}).afterClosed().subscribe(i=>{!i||this.store.dispatch(new m.tW(e)).subscribe(()=>{this.toast.open(_.X.EPISODE_DELETE_SUCCESS)})})}openCrupdateEpisodeModal(e){this.dialog.open(N,{episode:e,season:this.season},{panelClass:"crupdate-episode-modal-container"})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(d.yh),t.Y36(Y.u),t.Y36(A.F),t.Y36(b.gz),t.Y36(J.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["episodes-panel"]],inputs:{season:"season"},features:[t._Bn([J.x]),t.TTD],decls:19,vars:7,consts:[["pluralResourceName","episodes"],["leftContent",""],["mat-raised-button","","color","accent","trans","",3,"click"],[1,"material-table"],["table-sort-header","","trans",""],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"column-with-image"],["size","small",3,"src","alt"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","close"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(e,i){1&e&&(t.TgZ(0,"datatable-header",0),t.ynx(1,1),t.TgZ(2,"button",2),t.NdJ("click",function(){return i.openCrupdateEpisodeModal()}),t._uU(3,"Add Episode"),t.qZA(),t.BQk(),t.qZA(),t.TgZ(4,"table",3),t.TgZ(5,"thead"),t.TgZ(6,"tr"),t.TgZ(7,"th",4),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"th",4),t._uU(10,"Number"),t.qZA(),t.TgZ(11,"th",4),t._uU(12,"Release Date"),t.qZA(),t._UZ(13,"th"),t.qZA(),t.qZA(),t.TgZ(14,"tbody"),t.YNc(15,Lt,16,7,"tr",5),t.ALo(16,"async"),t.qZA(),t.qZA(),t.YNc(17,Dt,5,0,"no-results-message",6),t.ALo(18,"async")),2&e&&(t.xp6(15),t.Q6J("ngForOf",t.lcZ(16,3,i.datatable.data$))("ngForTrackBy",i.trackByFn),t.xp6(2),t.Q6J("ngIf",!t.lcZ(18,5,i.datatable.data$).length))},directives:[z.G,f.lW,h.P,X.p,p.sg,p.O5,Q.P,Z.Hw,L.U],pipes:[p.Ov,Yt.l],styles:["episodes-panel{display:block}episodes-panel .table-header{display:flex;align-items:center;margin-bottom:15px}episodes-panel .table-header .input-container{max-width:300px;margin-left:auto;position:relative}episodes-panel .table-header .input-container .mat-icon{position:absolute;top:11px;right:8px}episodes-panel no-results-message{margin-top:50px}\n"],encapsulation:2,changeDetection:0}),a})();function jt(a,n){if(1&a&&(t.TgZ(0,"mat-tab-group",8),t.TgZ(1,"mat-tab",9),t.ALo(2,"trans"),t._UZ(3,"episodes-panel",10),t.qZA(),t.TgZ(4,"mat-tab",9),t.ALo(5,"trans"),t._UZ(6,"credits-panel",11),t.qZA(),t.TgZ(7,"mat-tab",9),t.ALo(8,"trans"),t._UZ(9,"credits-panel",12),t.qZA(),t.qZA()),2&a){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("label",t.lcZ(2,6,"Episodes")),t.xp6(2),t.Q6J("season",e),t.xp6(1),t.Q6J("label",t.lcZ(5,8,"Regular Cast")),t.xp6(2),t.Q6J("mediaItem",e),t.xp6(1),t.Q6J("label",t.lcZ(8,10,"Regular Crew")),t.xp6(2),t.Q6J("mediaItem",e)}}function Rt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-expansion-panel",4),t.ALo(1,"async"),t.TgZ(2,"mat-expansion-panel-header"),t.TgZ(3,"mat-panel-title"),t.TgZ(4,"span",5),t._uU(5,"Season"),t.qZA(),t._uU(6," \xa0 "),t.TgZ(7,"span"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.YNc(9,jt,10,12,"ng-template",6),t.TgZ(10,"mat-action-row"),t.TgZ(11,"button",7),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).maybeDeleteSeason(l)}),t._uU(12,"Delete"),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=n.$implicit,i=t.oxw(2);t.Q6J("expanded",t.lcZ(1,3,i.activeSeason$)===e.number)("ngClass","season-"+e.number+"-panel"),t.xp6(8),t.Oqu(e.number)}}function Vt(a,n){1&a&&(t.TgZ(0,"no-results-message"),t.TgZ(1,"span",13),t._uU(2,"Nothing to Display."),t.qZA(),t.TgZ(3,"span",14),t._uU(4,"This series does not have any seasons yet."),t.qZA(),t.qZA())}function Ht(a,n){if(1&a){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return t.CHM(e),t.oxw().addSeason()}),t.ALo(3,"async"),t._uU(4,"Add Season"),t.qZA(),t.qZA(),t.TgZ(5,"mat-accordion"),t.YNc(6,Rt,13,5,"mat-expansion-panel",3),t.qZA(),t.YNc(7,Vt,5,0,"no-results-message",0),t.BQk()}if(2&a){const e=n.ngIf,i=t.oxw();t.xp6(2),t.Q6J("disabled",t.lcZ(3,4,i.loading$)),t.xp6(4),t.Q6J("ngForOf",e)("ngForTrackBy",i.trackByFn),t.xp6(1),t.Q6J("ngIf",!e.length)}}class P{constructor(n,e,i,r,l){this.store=n,this.modal=e,this.toast=i,this.route=r,this.el=l,this.activeSeason$=new y.X(1)}ngOnInit(){this.activeSeason$.next(+this.route.snapshot.params.seasonNumber||1)}ngAfterViewInit(){setTimeout(()=>{var n;this.activeSeason$.value>1&&(null===(n=this.el.nativeElement.querySelector(`.season-${this.activeSeason$.value}-panel`))||void 0===n||n.scrollIntoView({behavior:"smooth",block:"start",inline:"start"}))})}addSeason(){this.store.dispatch(new m.ZA).subscribe(()=>{this.toast.open(_.X.SEASON_CREATE_SUCCESS)})}maybeDeleteSeason(n){this.modal.open(H.z,{title:"Delete Season",body:"Are you sure you want to delete this season?",bodyBold:"This will also delete all episodes attached to this season.",ok:"Delete"}).afterClosed().subscribe(e=>{!e||this.store.dispatch(new m.ZE(n)).subscribe(()=>{this.toast.open(_.X.SEASON_DELETE_SUCCESS)})})}trackByFn(n,e){return e.id}}P.\u0275fac=function(n){return new(n||P)(t.Y36(d.yh),t.Y36(Y.u),t.Y36(A.F),t.Y36(b.gz),t.Y36(t.SBq))},P.\u0275cmp=t.Xpm({type:P,selectors:[["seasons-panel"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"header"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],["class","mat-elevation-z0",3,"expanded","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mat-elevation-z0",3,"expanded","ngClass"],["trans",""],["matExpansionPanelContent",""],["type","button","mat-button","","trans","",3,"click"],["animationDuration","0ms","color","accent"],[3,"label"],[3,"season"],["type","cast",3,"mediaItem"],["type","crew",3,"mediaItem"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(n,e){1&n&&(t.YNc(0,Ht,8,6,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,e.seasons$))},directives:[p.O5,f.lW,q.pp,p.sg,q.ib,p.mk,q.yz,q.yK,h.P,q.HS,q.VG,S.SP,S.uX,$t,B,L.U],pipes:[p.Ov,F.R],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     datatable-header{height:auto}.header[_ngcontent-%COMP%]{margin-bottom:20px}.mat-expansion-panel[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);border-radius:4px;margin-bottom:10px}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{font-weight:500;font-size:1.5rem}"],changeDetection:0}),(0,C.gn)([(0,d.Ph)(u.i.seasons)],P.prototype,"seasons$",void 0),(0,C.gn)([(0,d.Ph)(u.i.loading)],P.prototype,"loading$",void 0);var zt=s(4770),Xt=s(2791);function Bt(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",4),t.NdJ("cdkDropListDropped",function(){return t.CHM(e),t.oxw().dropListDropped()}),t.TgZ(1,"media-image",7),t.NdJ("cdkDragMoved",function(r){return t.CHM(e),t.oxw().dragMoved(r)}),t.TgZ(2,"button",8),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().deleteImage(l)}),t._UZ(3,"mat-icon",9),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=n.$implicit,i=t.oxw();t.Q6J("cdkDropListEnterPredicate",i.dropListEnterPredicate),t.xp6(1),t.Q6J("src",e.url)}}class k{constructor(n,e,i,r){this.images=n,this.store=e,this.toast=i,this.viewportRuler=r,this.dropListEnterPredicate=(l,c)=>{if(c===this.placeholder)return!0;if(c!==this.activeContainer)return!1;const x=this.placeholder.element.nativeElement,v=l.dropContainer.element.nativeElement,w=c.element.nativeElement,rt=nt(w.parentElement.children,this.source?x:v),lt=nt(w.parentElement.children,w);return this.source||(this.sourceIndex=rt,this.source=l.dropContainer,x.style.width=v.clientWidth+"px",x.style.height=v.clientHeight+"px",v.parentElement.removeChild(v)),this.targetIndex=lt,this.target=c,x.style.display="",w.parentElement.insertBefore(x,lt>rt?w.nextSibling:w),this.placeholder._dropListRef.enter(l._dragRef,l.element.nativeElement.offsetLeft,l.element.nativeElement.offsetTop),!1}}uploadImage(){(0,$.r)({types:[j.j.image]}).then(n=>{const e={modelId:this.store.selectSnapshot(u.i.title).id};this.images.create(n[0],e).subscribe(i=>{this.store.dispatch(new m.t5(i.image)).subscribe(()=>{this.toast.open(_.X.IMAGE_CREATE_SUCCESS)})})})}deleteImage(n){this.store.dispatch(new m.oU(n)).subscribe(()=>{this.toast.open(_.X.IMAGE_DELETE_SUCCESS)})}dragMoved(n){const e=this.getPointerPositionOnPage(n.event);this.listGroup._items.forEach(i=>{(function(a,n,e){const{top:i,bottom:r,left:l,right:c}=a.element.nativeElement.getBoundingClientRect();return e>=i&&e<=r&&n>=l&&n<=c})(i,e.x,e.y)&&(this.activeContainer=i)})}dropListDropped(){if(!this.target)return;const n=this.placeholder.element.nativeElement,e=n.parentElement;n.style.display="none",e.removeChild(n),e.appendChild(n),e.insertBefore(this.source.element.nativeElement,e.children[this.sourceIndex]),this.target=null,this.source=null,this.sourceIndex!==this.targetIndex&&this.store.dispatch(new m.JN(this.sourceIndex,this.targetIndex))}getPointerPositionOnPage(n){const e=n.type.startsWith("touch")?n.touches[0]||n.changedTouches[0]:n,i=this.viewportRuler.getViewportScrollPosition();return{x:e.pageX-i.left,y:e.pageY-i.top}}}function nt(a,n){return Array.prototype.indexOf.call(a,n)}k.\u0275fac=function(n){return new(n||k)(t.Y36(zt.C),t.Y36(d.yh),t.Y36(A.F),t.Y36(Xt.rL))},k.\u0275cmp=t.Xpm({type:k,selectors:[["images-panel"]],viewQuery:function(n,e){if(1&n&&(t.Gf(T.Fd,5),t.Gf(T.Wj,5)),2&n){let i;t.iGM(i=t.CRH())&&(e.listGroup=i.first),t.iGM(i=t.CRH())&&(e.placeholder=i.first)}},features:[t._Bn([E.A])],decls:9,vars:4,consts:[["mat-raised-button","","color","accent",3,"click"],["svgIcon","add"],["trans",""],["cdkDropListGroup",""],["cdkDropList","",3,"cdkDropListEnterPredicate","cdkDropListDropped"],[1,"images-grid"],["cdkDropList","",3,"cdkDropListEnterPredicate","cdkDropListDropped",4,"ngFor","ngForOf"],["cdkDrag","","size","medium","mode","landscape",1,"images-panel-media-image",3,"src","cdkDragMoved"],["mat-mini-fab","","color","warn",3,"click"],["svgIcon","delete"]],template:function(n,e){1&n&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return e.uploadImage()}),t._UZ(1,"mat-icon",1),t.TgZ(2,"span",2),t._uU(3,"Upload Image"),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.NdJ("cdkDropListDropped",function(){return e.dropListDropped()}),t.qZA(),t.TgZ(6,"div",5),t.YNc(7,Bt,4,2,"div",6),t.ALo(8,"async"),t.qZA(),t.qZA()),2&n&&(t.xp6(5),t.Q6J("cdkDropListEnterPredicate",e.dropListEnterPredicate),t.xp6(2),t.Q6J("ngForOf",t.lcZ(8,2,e.images$)))},directives:[f.lW,Z.Hw,h.P,T.Fd,T.Wj,p.sg,Q.P,T.Zt],pipes:[p.Ov],styles:[".mat-raised-button[_ngcontent-%COMP%]{display:block;margin-bottom:25px}.images-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-auto-rows:1fr;grid-gap:15px;overflow:hidden}media-image[_ngcontent-%COMP%]{display:block;box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f;border-radius:4px;overflow:hidden;position:relative;cursor:move;transition:box-shadow .2s cubic-bezier(0,0,.2,1)}media-image[_ngcontent-%COMP%]:active{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;opacity:.6}.mat-mini-fab[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),(0,C.gn)([(0,d.Ph)(u.i.images)],k.prototype,"images$",void 0);var Kt=s(3832),D=s(1134),te=s(6966),ee=s(639),ne=s(3720),ae=s(9902),at=s(8293),ie=s(9051),G=s(9243);function oe(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"form",9),t.NdJ("ngSubmit",function(){t.CHM(e);const r=t.oxw();return r.selectTagsFromString(r.formControl.value)}),t.TgZ(1,"div",10),t._UZ(2,"input",11),t.TgZ(3,"button",12),t._uU(4,"Add"),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.oxw(),i=t.MAs(8);t.xp6(2),t.Q6J("matAutocomplete",i)("formControl",e.formControl)}}const it=function(a){return{tagName:a}};function se(a,n){if(1&a&&(t.TgZ(0,"p",13),t._uU(1," Separate :tagName with comma.\n"),t.qZA()),2&a){const e=t.oxw();t.Q6J("transValues",t.VKq(1,it,e.pluralName))}}function re(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"mat-chip",14),t.NdJ("removed",function(){const l=t.CHM(e).$implicit;return t.oxw().deselectTag(l)}),t.TgZ(1,"span"),t._uU(2),t.qZA(),t._UZ(3,"mat-icon",15),t.qZA()}if(2&a){const e=n.$implicit,i=t.oxw();t.Q6J("removable",!i.readonly),t.xp6(2),t.Oqu(e)}}function le(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw(2).selectTags([l.name])}),t._uU(1),t.qZA()}if(2&a){const e=n.$implicit;t.xp6(1),t.hij(" ",e.display_name," ")}}function pe(a,n){if(1&a&&(t.TgZ(0,"div",16),t.TgZ(1,"p",17),t._uU(2,"Choose from existing :tagName:"),t.qZA(),t.TgZ(3,"div",18),t.YNc(4,le,2,1,"div",19),t.ALo(5,"async"),t.qZA(),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("transValues",t.VKq(4,it,e.pluralName)),t.xp6(3),t.Q6J("ngForOf",t.lcZ(5,2,e.existingTags$))}}function ce(a,n){if(1&a&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&a){const e=n.$implicit;t.Q6J("value",e.name),t.xp6(1),t.Oqu(e.display_name)}}let de=(()=>{class a{constructor(e){this.tagService=e,this.readonly=!1,this.pluralName="tags",this.formControl=new o.NI,this.selectedTags$=new y.X([]),this.existingTags$=new y.X([]),this.suggestedTags$=new y.X([])}ngOnInit(){this.tagService.index({perPage:15,type:this.tagType}).subscribe(e=>{this.existingTags$.next(e.pagination.data.filter(i=>"status"!==i.type))}),this.formControl.valueChanges.pipe((0,ee.b)(250),(0,ne.x)(),(0,ae.w)(e=>this.searchTags(e)),(0,at.K)(()=>(0,D.of)([]))).subscribe(e=>{this.suggestedTags$.next(e)})}writeValue(e){this.selectTags(e,{skipPropagate:!0,override:!0})}registerOnChange(e){this.propagateChange=e}registerOnTouched(){}selectTags(e,i={}){const r=(e||[]).map(l=>l.trim()).filter(l=>!this.selectedTags$.value.includes(l));i.override?this.selectedTags$.next(r):r.length&&this.selectedTags$.next([...this.selectedTags$.value,...r]),this.formControl.reset(),i.skipPropagate||this.propagateChange(this.selectedTags$.value)}deselectTag(e){const i=this.selectedTags$.value.slice();i.splice(i.indexOf(e),1),this.selectedTags$.next(i),this.propagateChange(this.selectedTags$.value)}selectTagsFromString(e){const i=e.split(",").map(r=>(0,te.V)(r));this.selectTags(i)}searchTags(e){return e?this.tagService.index({query:e}).pipe((0,tt.U)(i=>i.pagination.data)):(0,D.of)([])}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(ie.i))},a.\u0275cmp=t.Xpm({type:a,selectors:[["tags-manager"]],inputs:{readonly:"readonly",tagType:"tagType",pluralName:"pluralName"},features:[t._Bn([{provide:o.JU,useExisting:a,multi:!0}])],decls:11,vars:10,consts:[["class","input-container","ngNativeValidate","",3,"ngSubmit",4,"ngIf"],["class","main-info","trans","",3,"transValues",4,"ngIf"],[1,"selected-tags"],[3,"selectable"],[3,"removable","removed",4,"ngFor","ngForOf"],["class","existing-tags",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["ngNativeValidate","",1,"input-container",3,"ngSubmit"],[1,"input-with-action"],["type","text","required","",1,"tags-string-input",3,"matAutocomplete","formControl"],["type","submit","mat-flat-button","","color","accent","trans","",1,"add-tags-button"],["trans","",1,"main-info",3,"transValues"],[3,"removable","removed"],["svgIcon","cancel","matChipRemove",""],[1,"existing-tags"],["trans","",3,"transValues"],[1,"existing-tags-list"],["class","existing-tag-name",3,"click",4,"ngFor","ngForOf"],[1,"existing-tag-name",3,"click"],[3,"value"]],template:function(e,i){1&e&&(t.YNc(0,oe,5,2,"form",0),t.YNc(1,se,2,3,"p",1),t.TgZ(2,"div",2),t.TgZ(3,"mat-chip-list",3),t.YNc(4,re,4,2,"mat-chip",4),t.ALo(5,"async"),t.qZA(),t.qZA(),t.YNc(6,pe,6,6,"div",5),t.TgZ(7,"mat-autocomplete",6,7),t.NdJ("optionSelected",function(l){return i.selectTags([l.option.value])}),t.YNc(9,ce,2,2,"mat-option",8),t.ALo(10,"async"),t.qZA()),2&e&&(t.Q6J("ngIf",!i.readonly),t.xp6(1),t.Q6J("ngIf",!i.readonly),t.xp6(2),t.Q6J("selectable",!1),t.xp6(1),t.Q6J("ngForOf",t.lcZ(5,6,i.selectedTags$)),t.xp6(2),t.Q6J("ngIf",!i.readonly),t.xp6(3),t.Q6J("ngForOf",t.lcZ(10,8,i.suggestedTags$)))},directives:[p.O5,G.qn,p.sg,O.XC,o.JL,o.F,O.ZL,o.Fj,o.Q7,o.JJ,o.oH,f.lW,h.P,G.HS,Z.Hw,G.qH,et.ey],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:block}.selected-tag[_ngcontent-%COMP%]{margin:0 10px 10px 0;display:inline-block}.main-info[_ngcontent-%COMP%]{margin-top:5px;font-size:1.3rem}.existing-tags[_ngcontent-%COMP%]{margin-top:25px}.existing-tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.3rem;color:var(--be-secondary-text)}.existing-tags-list[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);padding:8px;height:78px;overflow:auto}.existing-tag-name[_ngcontent-%COMP%]{display:inline-block;margin-right:6px;color:var(--be-link);text-decoration:underline;font-size:1.2rem;cursor:pointer}"],changeDetection:0}),a})();const ot=function(a){return{tagName:a}};let me=(()=>{class a{constructor(e,i){this.dialogRef=e,this.data=i,this.selectedTagsControl=new o.NI,this.pluralName=this.data.pluralName||"tags"}close(){this.dialogRef.close()}confirm(){this.dialogRef.close(this.selectedTagsControl.value)}noTagsSelected(){var e;return!(null===(e=this.selectedTagsControl.value)||void 0===e?void 0:e.length)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(g.so),t.Y36(g.WI))},a.\u0275cmp=t.Xpm({type:a,selectors:[["tag-manager-modal"]],decls:12,vars:10,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",3,"transValues"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[3,"tagType","pluralName","formControl"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","button","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"disabled","transValues","click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"h2",1),t._uU(2,"Select :tagName"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return i.close()}),t._UZ(4,"mat-icon",3),t.qZA(),t.qZA(),t.TgZ(5,"mat-dialog-content"),t._UZ(6,"tags-manager",4),t.qZA(),t.TgZ(7,"mat-dialog-actions"),t.TgZ(8,"button",5),t.NdJ("click",function(){return i.close()}),t._uU(9,"Cancel"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return i.confirm()}),t._uU(11,"Merge :tagName"),t.qZA(),t.qZA()),2&e&&(t.xp6(1),t.Q6J("transValues",t.VKq(6,ot,i.pluralName)),t.xp6(5),t.Q6J("tagType",i.data.tagType)("pluralName",i.pluralName)("formControl",i.selectedTagsControl),t.xp6(4),t.Q6J("disabled",i.noTagsSelected())("transValues",t.VKq(8,ot,i.pluralName)))},directives:[g.uh,h.P,f.lW,Z.Hw,g.xY,de,o.JJ,o.oH,g.H8],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}.mat-dialog-title[_ngcontent-%COMP%]{text-transform:capitalize}.submit-button[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),a})();function ue(a,n){if(1&a){const e=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",5),t.TgZ(6,"button",6),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().detachTag(l)}),t._UZ(7,"mat-icon",7),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=n.$implicit;t.xp6(2),t.Oqu(e.name),t.xp6(2),t.Oqu(e.display_name||"-")}}function ge(a,n){1&a&&(t.TgZ(0,"no-results-message",8),t.TgZ(1,"span",9),t._uU(2,"Nothing to display"),t.qZA(),t.qZA())}let _e=(()=>{class a{constructor(e,i,r,l){this.store=e,this.modal=i,this.toast=r,this.datatable=l}ngOnInit(){this.datatable.init(),this.getTagObservable().subscribe(i=>{this.datatable.data=i||[]})}ngOnDestroy(){this.datatable.destroy()}openTagManagerModal(){this.modal.open(me,{tagType:this.type,pluralName:"production_country"===this.type?"countries":`${this.type}s`}).beforeClosed().subscribe(e=>{e&&e.length&&this.store.dispatch(new m.ej(e,this.type))})}detachTag(e){this.store.dispatch(new m.p_(e)).subscribe(()=>{this.toast.open(_.X.TAG_DETACH_SUCCESS)})}getTagObservable(){return this.store.select("keyword"===this.type?u.i.keywords:"genre"===this.type?u.i.genres:u.i.countries)}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(d.yh),t.Y36(Y.u),t.Y36(A.F),t.Y36(J.x))},a.\u0275cmp=t.Xpm({type:a,selectors:[["tags-panel"]],inputs:{type:"type",displayType:"displayType"},features:[t._Bn([J.x])],decls:18,vars:12,consts:[["mat-raised-button","","color","accent","leftContent","",3,"click"],[1,"material-table"],["table-sort-header","","trans",""],[4,"ngFor","ngForOf"],["svgImage","folder.svg",4,"ngIf"],[1,"edit-column"],["mat-icon-button","",3,"click"],["svgIcon","close"],["svgImage","folder.svg"],["primary-text","","trans",""]],template:function(e,i){1&e&&(t.TgZ(0,"datatable-header"),t.TgZ(1,"button",0),t.NdJ("click",function(){return i.openTagManagerModal()}),t._uU(2),t.ALo(3,"trans"),t.ALo(4,"trans"),t.qZA(),t.qZA(),t.TgZ(5,"table",1),t.TgZ(6,"thead"),t.TgZ(7,"tr"),t.TgZ(8,"th",2),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th",2),t._uU(11,"Display Name"),t.qZA(),t._UZ(12,"th"),t.qZA(),t.qZA(),t.TgZ(13,"tbody"),t.YNc(14,ue,8,2,"tr",3),t.ALo(15,"async"),t.qZA(),t.qZA(),t.YNc(16,ge,3,0,"no-results-message",4),t.ALo(17,"async")),2&e&&(t.xp6(2),t.AsE(" ",t.lcZ(3,4,"Add")," ",t.lcZ(4,6,i.displayType||i.type+"s")," "),t.xp6(12),t.Q6J("ngForOf",t.lcZ(15,8,i.datatable.data$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(17,10,i.datatable.data$).length))},directives:[z.G,f.lW,X.p,h.P,p.sg,p.O5,Z.Hw,L.U],pipes:[F.R,p.Ov],styles:["[_nghost-%COMP%]{padding:0}"],changeDetection:0}),a})();var he=s(7543);function fe(a,n){1&a&&t._UZ(0,"primary-facts-panel",15)}function Ze(a,n){1&a&&t._UZ(0,"seasons-panel",15)}function Te(a,n){1&a&&t._UZ(0,"images-panel",15)}function xe(a,n){if(1&a&&t._UZ(0,"video-index",16),2&a){const e=t.oxw(2);t.Q6J("title",e.title)}}function be(a,n){if(1&a&&t._UZ(0,"credits-panel",17),2&a){const e=t.oxw(2);t.Q6J("mediaItem",e.title)}}function Ce(a,n){if(1&a&&t._UZ(0,"credits-panel",18),2&a){const e=t.oxw(2);t.Q6J("mediaItem",e.title)}}function ve(a,n){1&a&&t._UZ(0,"tags-panel",19)}function ye(a,n){1&a&&t._UZ(0,"tags-panel",20)}function Ae(a,n){1&a&&t._UZ(0,"tags-panel",21)}function Ie(a,n){if(1&a&&t._UZ(0,"reviews-index",16),2&a){const e=t.oxw(2);t.Q6J("title",e.title)}}function qe(a,n){1&a&&(t.TgZ(0,"p",22),t._uU(1,'Save from "Primary Facts" panel in order to enable other menu items.'),t.qZA())}function Pe(a,n){if(1&a){const e=t.EpF();t.ynx(0),t.YNc(1,fe,1,0,"primary-facts-panel",1),t.YNc(2,Ze,1,0,"seasons-panel",1),t.YNc(3,Te,1,0,"images-panel",1),t.YNc(4,xe,1,1,"video-index",2),t.YNc(5,be,1,1,"credits-panel",3),t.YNc(6,Ce,1,1,"credits-panel",4),t.YNc(7,ve,1,0,"tags-panel",5),t.YNc(8,ye,1,0,"tags-panel",6),t.YNc(9,Ae,1,0,"tags-panel",7),t.YNc(10,Ie,1,1,"reviews-index",2),t.TgZ(11,"aside",8),t.TgZ(12,"div",9),t._uU(13,"Edit"),t.qZA(),t.TgZ(14,"div",10),t.TgZ(15,"button",11),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPanel("primaryFacts")}),t._uU(16,"Primary Facts"),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPanel("seasons")}),t._uU(18,"Seasons"),t.qZA(),t.TgZ(19,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPanel("images")}),t._uU(20,"Images"),t.qZA(),t.TgZ(21,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPanel("videos")}),t._uU(22,"Videos"),t.qZA(),t.TgZ(23,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPanel("cast")}),t._uU(24,"Cast"),t.qZA(),t.TgZ(25,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPanel("crew")}),t._uU(26,"Crew"),t.qZA(),t.TgZ(27,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPanel("genres")}),t._uU(28,"Genres"),t.qZA(),t.TgZ(29,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPanel("keywords")}),t._uU(30,"Keywords"),t.qZA(),t.TgZ(31,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPanel("countries")}),t._uU(32,"Countries"),t.qZA(),t.TgZ(33,"button",12),t.NdJ("click",function(){return t.CHM(e),t.oxw().openPanel("reviews")}),t._uU(34,"Reviews"),t.qZA(),t.qZA(),t.YNc(35,qe,2,0,"p",13),t.qZA(),t._UZ(36,"loading-indicator",14),t.ALo(37,"async"),t.BQk()}if(2&a){const e=n.ngIf,i=t.oxw();t.xp6(1),t.Q6J("ngIf","primaryFacts"===e),t.xp6(1),t.Q6J("ngIf","seasons"===e),t.xp6(1),t.Q6J("ngIf","images"===e),t.xp6(1),t.Q6J("ngIf","videos"===e),t.xp6(1),t.Q6J("ngIf","cast"===e),t.xp6(1),t.Q6J("ngIf","crew"===e),t.xp6(1),t.Q6J("ngIf","keywords"===e),t.xp6(1),t.Q6J("ngIf","genres"===e),t.xp6(1),t.Q6J("ngIf","countries"===e),t.xp6(1),t.Q6J("ngIf","reviews"===e),t.xp6(5),t.ekj("active","primaryFacts"===e),t.xp6(2),t.ekj("active","seasons"===e),t.Q6J("disabled",!i.titleCreated()),t.xp6(2),t.ekj("active","images"===e),t.Q6J("disabled",!i.titleCreated()),t.xp6(2),t.ekj("active","videos"===e),t.Q6J("disabled",!i.titleCreated()),t.xp6(2),t.ekj("active","cast"===e),t.Q6J("disabled",!i.titleCreated()),t.xp6(2),t.ekj("active","crew"===e),t.Q6J("disabled",!i.titleCreated()),t.xp6(2),t.ekj("active","genres"===e),t.Q6J("disabled",!i.titleCreated()),t.xp6(2),t.ekj("active","keywords"===e),t.Q6J("disabled",!i.titleCreated()),t.xp6(2),t.ekj("active","countries"===e),t.Q6J("disabled",!i.titleCreated()),t.xp6(2),t.ekj("active","reviews"===e),t.Q6J("disabled",!i.titleCreated()),t.xp6(2),t.Q6J("ngIf",!i.titleCreated()),t.xp6(1),t.Q6J("isVisible",t.lcZ(37,41,i.loading$))}}class M{constructor(n,e,i){this.store=n,this.router=e,this.route=i,this.activePanel$=new y.X("primaryFacts")}ngOnInit(){this.route.data.subscribe(n=>{var e,i;this.store.dispatch(new m.RK(null===(e=n.api)||void 0===e?void 0:e.title)),this.title=null===(i=n.api)||void 0===i?void 0:i.title}),this.route.queryParams.subscribe(n=>{this.activePanel$.next(n.active||"primaryFacts")}),this.route.snapshot.params.seasonNumber&&this.activePanel$.next("seasons")}ngOnDestroy(){this.store.dispatch(new m.AN)}openPanel(n){this.router.navigate([],{queryParams:{active:n}})}titleCreated(){return!!this.store.selectSnapshot(u.i.title).id}}M.\u0275fac=function(n){return new(n||M)(t.Y36(d.yh),t.Y36(b.F0),t.Y36(b.gz))},M.\u0275cmp=t.Xpm({type:M,selectors:[["crupdate-title"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","material-panel crupdate-title-panel",4,"ngIf"],["class","material-panel crupdate-title-panel",3,"title",4,"ngIf"],["class","material-panel crupdate-title-panel","type","cast",3,"mediaItem",4,"ngIf"],["class","material-panel crupdate-title-panel","type","crew",3,"mediaItem",4,"ngIf"],["class","material-panel crupdate-title-panel","type","keyword",4,"ngIf"],["class","material-panel crupdate-title-panel","type","genre",4,"ngIf"],["class","material-panel crupdate-title-panel","type","production_country","displayType","country",4,"ngIf"],[1,"sidebar","material-panel"],["trans","",1,"header"],[1,"list"],["trans","",1,"list-item","no-style",3,"click"],["trans","",1,"list-item","no-style",3,"disabled","click"],["class","message","trans","",4,"ngIf"],[1,"overlay",3,"isVisible"],[1,"material-panel","crupdate-title-panel"],[1,"material-panel","crupdate-title-panel",3,"title"],["type","cast",1,"material-panel","crupdate-title-panel",3,"mediaItem"],["type","crew",1,"material-panel","crupdate-title-panel",3,"mediaItem"],["type","keyword",1,"material-panel","crupdate-title-panel"],["type","genre",1,"material-panel","crupdate-title-panel"],["type","production_country","displayType","country",1,"material-panel","crupdate-title-panel"],["trans","",1,"message"]],template:function(n,e){1&n&&(t.YNc(0,Pe,38,43,"ng-container",0),t.ALo(1,"async")),2&n&&t.Q6J("ngIf",t.lcZ(1,1,e.activePanel$))},directives:[p.O5,h.P,pt.Q,I,P,k,Kt.r,B,_e,he.Q],pipes:[p.Ov],styles:[".be-dark-mode crupdate-title .sidebar .header{background-color:transparent;border-bottom:1px solid var(--be-divider-default)}crupdate-title{display:flex;align-items:flex-start;width:100%}crupdate-title .material-panel{flex:1 1 auto;min-height:412px}crupdate-title .material-panel form>.input-container,crupdate-title .material-panel .inline-container{margin-bottom:25px}crupdate-title video-index.material-panel{padding:0}crupdate-title video-index .datatable{border:none}crupdate-title video-index h1{display:none}crupdate-title video-index .datatable-page-header{padding:15px 15px 0}crupdate-title .inline-container{display:flex}crupdate-title .inline-container .input-container{flex:1 1 auto}crupdate-title .inline-container .input-container.size-small{flex:1 1 30%}crupdate-title .inline-container .input-container:first-of-type{margin-right:15px}crupdate-title .sidebar{flex:0 0 260px;margin-left:30px;padding:0;overflow:hidden}crupdate-title .sidebar .header{background-color:var(--be-primary-default);color:var(--be-accent-contrast);padding:15px 20px;font-size:1.6rem;font-weight:500}crupdate-title .sidebar .list .list-item{display:block;width:100%;padding:10px 20px;white-space:nowrap;text-transform:capitalize}crupdate-title .sidebar .list .list-item:disabled{color:var(--be-hint-text);cursor:default}crupdate-title .sidebar .list .list-item.active{font-weight:500}crupdate-title .sidebar .list .list-item:not(:disabled):hover{cursor:pointer}crupdate-title .sidebar .message{margin:8px 20px;padding-top:8px;font-size:1.3rem;color:var(--be-secondary-text);border-top:1px solid var(--be-divider-lighter)}@media only screen and (max-width: 768px){crupdate-title{display:block}crupdate-title primary-facts-panel.material-panel{border:none}crupdate-title primary-facts-panel.material-panel .poster-container{display:block}crupdate-title primary-facts-panel.material-panel .many-inputs{margin-left:0}crupdate-title primary-facts-panel.material-panel img{margin:0 auto 20px}crupdate-title .sidebar{margin:30px 20px 0}crupdate-title .inline-container{display:block}crupdate-title .inline-container .input-container:first-of-type{margin-bottom:20px}}.crupdate-title-panel .table-header,crupdate-episode-modal .table-header{display:flex;align-items:center;margin-bottom:15px}.crupdate-title-panel .table-header .mat-raised-button,crupdate-episode-modal .table-header .mat-raised-button{text-transform:capitalize}.crupdate-title-panel .table-header .input-container,crupdate-episode-modal .table-header .input-container{max-width:300px;margin-left:auto;position:relative}.crupdate-title-panel .table-header .input-container .mat-icon,crupdate-episode-modal .table-header .input-container .mat-icon{position:absolute;top:11px;right:8px}.crupdate-title-panel no-results-message,crupdate-episode-modal no-results-message{margin-top:50px;margin-bottom:50px}.crupdate-title-panel .mat-column-edit,crupdate-episode-modal .mat-column-edit{max-width:100px;color:var(--be-secondary-text)}\n"],encapsulation:2,changeDetection:0}),(0,C.gn)([(0,d.Ph)(u.i.loading)],M.prototype,"loading$",void 0);var Ue=s(5816),st=s(8117);const Je=[{path:"",component:M,resolve:{api:(()=>{class a{constructor(e,i,r){this.router=e,this.store=i,this.titles=r}resolve(e,i){return e.params.titleId?this.titles.get(e.params.titleId,{fullCredits:!0,keywords:!0,countries:!0,seasons:!0,skipUpdating:!0,allVideos:!0}).pipe((0,at.K)(()=>(this.router.navigate(this.fallbackUri(i)),st.E)),(0,Ue.zg)(c=>c?(0,D.of)(c):(this.router.navigate(this.fallbackUri(i)),st.E))):(0,D.of)(null)}fallbackUri(e){return e.url.includes("admin")?["/admin/titles"]:[e.url.replace("/edit","")]}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(b.F0),t.LFG(d.yh),t.LFG(K.d))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},data:{permissions:["titles.update"]}}];let Ne=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[b.Bz.forChild(Je)],b.Bz]}),a})();var ke=s(9866),Me=s(5217),we=s(6895),Ee=s(8097),Se=s(3389),Oe=s(3224),Qe=s(557),Fe=s(2544),Ye=s(5500),Le=s(365);let De=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[p.ez,Ne,ke.N,o.u5,o.UX,Me.u,we.M,Ee.X,Se.p,Oe.n,Qe.x,Fe.S,Ye.z,f.ot,Z.Ps,R.AV,g.Is,S.Nh,V.Ky,q.To,T._t,O.Bb,Le.Cv]]}),a})()}}]);
//# sourceMappingURL=70.8737adb9f85377f24123.js.map