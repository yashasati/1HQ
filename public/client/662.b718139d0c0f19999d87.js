"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[662],{5662:(Xn,W,r)=>{r.r(W),r.d(W,{AppAppearanceModule:()=>Gn});var p=r(4364),c=r(1707),b=r(6798),K=r(6966),V=r(912),J=r(3927),e=r(2316);const H=new e.OlP("APPEARANCE_EDITOR_CONFIG"),ve={navigationRoutes:[],menus:{availableRoutes:["login","register","contact","billing/pricing","account-settings","admin/appearance","admin/users","admin/settings/authentication","admin/settings/branding","admin/settings/cache","admin/settings/providers","admin/roles"],positions:["admin-navbar","custom-page-navbar","auth-page-footer"]},sections:[{name:"general",position:1},{name:"themes",position:2},{name:"menus",position:3},{name:"custom-code",position:4},{name:"seo-settings",position:5}]};var ee=r(3543),P=r(9779);class be{constructor(o,t){this.route=o,this.queryParams=t,this.type=P.R.Navigate}}class xe{constructor(o,t){this.key=o,this.value=t,this.type=P.R.SetConfig}}class Ce{constructor(o,t=0){this.selector=o,this.index=t,this.type=P.R.Select}}class Ze{constructor(){this.type=P.R.Deselect}}class Ae{constructor(o,t){this.key=o,this.value=t,this.type=P.R.SetColors}}class Te{constructor(o){this.content=o,this.type=P.R.SetCustomCss}}class Me{constructor(o){this.content=o,this.type=P.R.SetCustomHtml}}var te=r(5809),m=r(6491),ye=r(4224),ke=r(2516),O=r(9170),S=r(1435),Pe=r(1992),we=r(8492),Oe=r.n(we),w=r(6034),U=r(299),F=r(5718);let _=(()=>{class i{constructor(t,n,a,s){this.settings=t,this.router=n,this.http=a,this.toast=s,this.activePanel$=new m.X(null),this.defaultSettings={},this.initiated$=new ye.t(1),this.loading$=new m.X(!1),this.changes$=new m.X(null)}addChanges(t){this.changes$.next(Object.assign(Object.assign({},this.changes$.value),t))}openPanel(t){const n=this.config.sections.find(a=>(0,K.V)(a.name)===t);this.activePanel$.next(n),this.navigate(n)}init(t,n,a){return(0,ke.R)(window,"message").pipe((0,O.h)(s=>s.data===te.B&&new URL(s.origin).hostname===window.location.hostname)).subscribe(()=>{this.initiated$.next(!0),this.initiated$.complete(),this.activePanel$.value&&this.navigate(this.activePanel$.value)}),n.forEach(s=>{"env"===s.name?this.defaultSettings=Object.assign(Object.assign({},this.defaultSettings),s.value):this.defaultSettings[s.name]=s.value}),this.initConfig(a),this.initIframe(t),this.initiated$}saveChanges(t){t&&this.addChanges(t),this.loading$.next(!0);const a=(this.saveRequest?this.saveRequest:s=>this.http.post("admin/appearance",s))(this.changes$.value).pipe((0,S.x)(()=>this.loading$.next(!1)),(0,Pe.B)());return a.subscribe(()=>{this.changes$.next(null),this.toast.open("Appearance saved")}),a}setSaveRequest(t){this.saveRequest=t}closeActivePanel(){this.router.navigate(["/admin/appearance"])}navigate(t){this.postMessage(new be((null==t?void 0:t.route)||this.config.defaultRoute,null==t?void 0:t.queryParams))}setConfig(t,n){this.postMessage(new xe(t,n))}selectNode(t,n=0){!t||this.postMessage(new Ce(t,n))}deselectNode(){this.postMessage(new Ze)}postMessage(t){this.previewWindow.postMessage(t,"*")}currentValue(t){return t.startsWith("env.")||t.startsWith("custom-code.")?this.defaultSettings[t]:this.settings.get(t)}initConfig(t){const n=Oe().all(t);n.sections=n.sections.sort((a,s)=>a.position>s.position?1:-1),n.defaultRoute||(n.defaultRoute="/"),this.settings.get("site.has_mobile_app")&&n.menus.positions.push("mobile-app-about"),this.config=n}initIframe(t){const n=this.settings.getBaseUrl()+"/"+this.config.defaultRoute+`?be-preview-mode=${te.B}`;t.src=function(i){return i.replace(/([^:]\/)\/+/g,"$1")}(n),this.previewWindow=t.contentWindow}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(w.Z),e.LFG(b.F0),e.LFG(U.r),e.LFG(F.F))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Se=r(6605),u=r(2529),h=r(5515),f=r(781),qe=r(5566);function Je(i,o){1&i&&e._UZ(0,"mat-icon",9)}function Ue(i,o){if(1&i&&(e.TgZ(0,"span"),e.YNc(1,Je,1,0,"mat-icon",7),e.TgZ(2,"span",8),e._uU(3),e.qZA(),e.qZA()),2&i){const t=e.oxw(),n=t.first,a=t.last,s=t.$implicit,l=e.oxw();e.xp6(1),e.Q6J("ngIf",!n),e.xp6(1),e.ekj("last",a),e.xp6(1),e.Oqu(l.viewName(s))}}function Fe(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Ue,4,4,"span",6),e.BQk()),2&i){const t=o.$implicit;e.xp6(1),e.Q6J("ngIf",t)}}let I=(()=>{class i{constructor(){this.path=[],this.back=new e.vpe}viewName(t){return(0,qe.f)(t).replace(/_/g," ")}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["appearance-panel-meta"]],inputs:{path:"path"},outputs:{back:"back"},decls:7,vars:1,consts:[[1,"back-button",3,"click"],["svgIcon","keyboard-arrow-left"],[1,"title"],["trans","",1,"static"],[1,"path"],[4,"ngFor","ngForOf"],[4,"ngIf"],["svgIcon","keyboard-arrow-right","class","separator",4,"ngIf"],["trans","",1,"name"],["svgIcon","keyboard-arrow-right",1,"separator"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.NdJ("click",function(){return n.back.emit()}),e._UZ(1,"mat-icon",1),e.qZA(),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e._uU(4,"Customizing"),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,Fe,2,1,"ng-container",5),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("ngForOf",n.path))},directives:[u.Hw,h.P,p.sg,p.O5],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:70px;margin-bottom:10px;border-bottom:1px solid var(--be-divider-default);background-color:var(--be-background)}.title[_ngcontent-%COMP%]{padding:10px}.path[_ngcontent-%COMP%]{font-size:2rem;font-weight:300;max-width:240px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.name[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;text-transform:capitalize}.last[_ngcontent-%COMP%]{color:var(--be-accent-default)}.separator[_ngcontent-%COMP%]{vertical-align:middle;color:var(--be-secondary-text);width:18px;height:18px;line-height:18px}"],changeDetection:0}),i})();var ne=r(9141),$e=r(6313),Ne=r(3534),Ee=r(8480),Le=r(8976),Qe=r(4563),$=r(221),De=r(6452),ie=r(365);function Ye(i,o){1&i&&e._UZ(0,"image-or-icon",11),2&i&&e.Q6J("src",o.ngIf)}function Ve(i,o){1&i&&(e.TgZ(0,"div",12),e._UZ(1,"mat-icon",13),e.TgZ(2,"span",14),e._uU(3,"Upload"),e.qZA(),e.qZA())}function He(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().remove()}),e._uU(1,"Remove"),e.qZA()}}function ze(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",15),e.NdJ("click",function(){return e.CHM(t),e.oxw().useDefault()}),e._uU(1,"Use Default"),e.qZA()}}function Re(i,o){1&i&&e._UZ(0,"mat-progress-bar",16)}const Ge=["*"];let ae=(()=>{class i{constructor(t,n,a,s){this.editor=t,this.uploadQueue=n,this.validator=a,this.settings=s,this.image$=new m.X(null),this.loading$=new m.X(!1),this.validator.showToast=!0}openModal(){const t={uri:this.backendUri||Le.C.Image,httpParams:{diskPrefix:this.diskPrefix},validator:this.validator};(0,$e.r)({types:[Ne.j.image]}).then(n=>{this.loading$.next(!0),this.uploadQueue.start(n,t).pipe((0,S.x)(()=>this.loading$.next(!1))).subscribe(a=>{this.updateValue(a.fileEntry.url)})})}remove(){this.updateValue(null)}useDefault(){this.updateValue(this.defaultValue)}updateValue(t){this.propagateChange(t),this.image$.next(t?t+`?v=${(0,Ee.O)(8)}`:null)}writeValue(t){this.image$.next(t)}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_),e.Y36(ne.A),e.Y36(Qe.G),e.Y36(w.Z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["appearance-image-input"]],hostAttrs:["tabindex","0"],inputs:{defaultValue:"defaultValue",backendUri:"backendUri",diskPrefix:"diskPrefix"},features:[e._Bn([ne.A,{provide:c.JU,useExisting:i,multi:!0}])],ngContentSelectors:Ge,decls:18,vars:12,consts:[[1,"field-container",3,"click"],["trans","",1,"label","fake-label"],[1,"img-container"],["class","inherit-size",3,"src",4,"ngIf","ngIfElse"],["noImage",""],[1,"actions-dropdown"],[1,"no-style",3,"matMenuTriggerFor","click"],["svgIcon","settings",1,"trigger-icon"],["actionsMenu",""],["mat-menu-item","","trans","",3,"click",4,"ngIf"],["mode","indeterminate","color","accent",4,"ngIf"],[1,"inherit-size",3,"src"],[1,"no-image"],["svgIcon","photo-size-select-actual"],["trans","",1,"text"],["mat-menu-item","","trans","",3,"click"],["mode","indeterminate","color","accent"]],template:function(t,n){if(1&t&&(e.F$t(),e.TgZ(0,"div",0),e.NdJ("click",function(){return n.openModal()}),e.TgZ(1,"div",1),e.Hsn(2),e.qZA(),e.TgZ(3,"div",2),e.YNc(4,Ye,1,1,"image-or-icon",3),e.ALo(5,"async"),e.YNc(6,Ve,4,0,"ng-template",null,4,e.W1O),e.TgZ(8,"div",5),e.TgZ(9,"button",6),e.NdJ("click",function(s){return s.stopPropagation()}),e._UZ(10,"mat-icon",7),e.qZA(),e.TgZ(11,"mat-menu",null,8),e.YNc(13,He,2,0,"div",9),e.ALo(14,"async"),e.YNc(15,ze,2,0,"div",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.YNc(16,Re,1,0,"mat-progress-bar",10),e.ALo(17,"async")),2&t){const a=e.MAs(7),s=e.MAs(12);e.xp6(4),e.Q6J("ngIf",e.lcZ(5,6,n.image$))("ngIfElse",a),e.xp6(5),e.Q6J("matMenuTriggerFor",s),e.xp6(4),e.Q6J("ngIf",e.lcZ(14,8,n.image$)),e.xp6(2),e.Q6J("ngIf",n.defaultValue),e.xp6(1),e.Q6J("ngIf",e.lcZ(17,10,n.loading$))}},directives:[h.P,p.O5,$.p6,u.Hw,$.VK,De.A,$.OP,ie.pW],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:block;cursor:pointer;margin-bottom:15px;position:relative}.label[_ngcontent-%COMP%]{margin-bottom:5px}.img-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;position:relative;height:80px;padding:5px;width:100%;border:1px solid var(--be-divider-default);border-radius:4px;background-color:var(--be-chip);overflow:hidden}image-or-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:100%;height:100%}img[_ngcontent-%COMP%]{max-width:100%;max-height:100%;object-fit:cover}.no-image[_ngcontent-%COMP%]{text-align:center}.no-image[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{display:block;color:var(--be-hint-text);width:40px;height:40px}.no-image[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{color:var(--be-link);margin-top:3px;font-size:1.3rem}.actions-dropdown[_ngcontent-%COMP%]{position:absolute;bottom:5px;right:5px;color:var(--be-secondary-text)}.actions-dropdown[_ngcontent-%COMP%]   .trigger-icon[_ngcontent-%COMP%]{width:20px;height:20px}.mat-progress-bar[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;width:100%}"],changeDetection:0}),i})(),oe=(()=>{class i{constructor(t,n){this.el=t,this.editor=n}ngOnInit(){this.el.nativeElement.addEventListener("focus",()=>{this.editor.selectNode(this.selector)}),this.el.nativeElement.addEventListener("blur",()=>{this.editor.deselectNode()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(e.SBq),e.Y36(_))},i.\u0275dir=e.lG2({type:i,selectors:[["","highlightInPreview",""]],inputs:{selector:["highlightInPreview","selector"]}}),i})();const Be=function(){return["General"]};let Xe=(()=>{class i{constructor(t,n){this.fb=t,this.editor=n,this.form=this.fb.group({"branding.logo_light":[""],"branding.logo_dark":[""],"branding.favicon":[""],"env.app_name":[""],"branding.site_description":[""]})}ngOnInit(){const t={};Object.keys(this.form.controls).forEach(n=>{t[n]=this.editor.currentValue(n)}),this.form.patchValue(t),this.form.valueChanges.subscribe(n=>{this.editor.addChanges(n)})}defaultValue(t){return this.editor.defaultSettings[t]}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.qu),e.Y36(_))},i.\u0275cmp=e.Xpm({type:i,selectors:[["general-appearance-panel"]],hostAttrs:[1,"appearance-panel"],decls:16,vars:8,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],["formControlName","branding.logo_light","diskPrefix","branding_media","highlightInPreview",".logo",3,"defaultValue"],["formControlName","branding.logo_dark","diskPrefix","branding_media","highlightInPreview",".logo",3,"defaultValue"],["backendUri","uploads/favicon","diskPrefix","branding_media","formControlName","branding.favicon",3,"defaultValue"],[1,"input-container"],["for","env.app_name","trans",""],["type","text","id","env.app_name","formControlName","env.app_name",3,"placeholder"],["for","branding.site_description","trans",""],["id","branding.site_description","rows","4","formControlName","branding.site_description",3,"placeholder"]],template:function(t,n){1&t&&(e.TgZ(0,"appearance-panel-meta",0),e.NdJ("back",function(){return n.editor.closeActivePanel()}),e.qZA(),e.TgZ(1,"div",1),e.TgZ(2,"appearance-image-input",2),e._uU(3," Logo #1 (For top navbar) "),e.qZA(),e.TgZ(4,"appearance-image-input",3),e._uU(5," Logo #2 (Everywhere else) "),e.qZA(),e.TgZ(6,"appearance-image-input",4),e._uU(7," Favicon "),e.qZA(),e.TgZ(8,"div",5),e.TgZ(9,"label",6),e._uU(10,"Site Name"),e.qZA(),e._UZ(11,"input",7),e.qZA(),e.TgZ(12,"div",5),e.TgZ(13,"label",8),e._uU(14,"Site Description"),e.qZA(),e._UZ(15,"textarea",9),e.qZA(),e.qZA()),2&t&&(e.Q6J("path",e.DdM(7,Be)),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("defaultValue",n.defaultValue("branding.logo_light")),e.xp6(2),e.Q6J("defaultValue",n.defaultValue("branding.logo_dark")),e.xp6(2),e.Q6J("defaultValue",n.defaultValue("branding.favicon")),e.xp6(5),e.Q6J("placeholder",n.defaultValue("env.app_name")),e.xp6(4),e.Q6J("placeholder",n.defaultValue("branding.site_description")))},directives:[I,c.JL,c.sg,ae,c.JJ,c.u,oe,h.P,c.Fj],styles:[""],changeDetection:0}),i})();var x=r(2213);const N="css-theme";let z=(()=>{class i{constructor(t){this.http=t}all(){return this.http.get(N)}create(t){return this.http.post(N,t)}update(t,n){return this.http.put(`${N}/${t}`,n)}delete(t){return this.http.delete(`${N}/${t}`)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(U.r))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var se=r(1927);function je(i,o){1&i&&(e.TgZ(0,"span",6),e._uU(1,"Update Theme"),e.qZA())}function We(i,o){1&i&&(e.TgZ(0,"span",6),e._uU(1,"Create Theme"),e.qZA())}function Ke(i,o){if(1&i&&(e.TgZ(0,"div",21),e._uU(1),e.qZA()),2&i){const t=e.oxw().ngIf;e.xp6(1),e.Oqu(t.name)}}function et(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1,"Update"),e.qZA())}function tt(i,o){1&i&&(e.TgZ(0,"span"),e._uU(1,"Create"),e.qZA())}function nt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"form",7),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().confirm()}),e.TgZ(1,"mat-dialog-content",8),e.TgZ(2,"div",9),e.TgZ(3,"label",10),e._uU(4,"Name"),e.qZA(),e._UZ(5,"input",11),e.YNc(6,Ke,2,1,"div",12),e.qZA(),e.TgZ(7,"div",13),e.TgZ(8,"mat-slide-toggle",14),e._uU(9,"Dark Theme"),e.qZA(),e.TgZ(10,"p",6),e._uU(11,"Whether this theme has light text on dark background."),e.qZA(),e.qZA(),e.TgZ(12,"div",13),e.TgZ(13,"mat-slide-toggle",15),e._uU(14,"Default Dark Theme"),e.qZA(),e.TgZ(15,"p",6),e._uU(16,"Whether this theme should be used as default dark theme."),e.qZA(),e.qZA(),e.TgZ(17,"div",13),e.TgZ(18,"mat-slide-toggle",16),e._uU(19,"Default Light Theme"),e.qZA(),e.TgZ(20,"p",6),e._uU(21,"Whether this theme should be used as default light theme."),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"mat-dialog-actions"),e.TgZ(23,"button",17),e.NdJ("click",function(){return e.CHM(t),e.oxw().close()}),e._uU(24,"Cancel"),e.qZA(),e.TgZ(25,"button",18),e.ALo(26,"async"),e.YNc(27,et,2,0,"span",19),e.YNc(28,tt,2,0,"ng-template",null,20,e.W1O),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=o.ngIf,n=e.MAs(29),a=e.oxw();e.Q6J("formGroup",a.form),e.xp6(6),e.Q6J("ngIf",t.name),e.xp6(19),e.Q6J("disabled",e.lcZ(26,5,a.loading$)),e.xp6(2),e.Q6J("ngIf",a.data.theme)("ngIfElse",n)}}let it=(()=>{class i{constructor(t,n,a,s,l){this.dialogRef=t,this.data=n,this.cssTheme=a,this.toast=s,this.fb=l,this.loading$=new m.X(!1),this.errors$=new m.X({}),this.form=this.fb.group({name:[""],is_dark:[!1],default_dark:[!1],default_light:[!1]}),n.theme&&this.form.patchValue(n.theme),this.form.get("default_dark").valueChanges.pipe((0,O.h)(d=>!!d)).subscribe(()=>{this.form.get("default_light").setValue(!1)}),this.form.get("default_light").valueChanges.pipe((0,O.h)(d=>!!d)).subscribe(()=>{this.form.get("default_dark").setValue(!1)})}confirm(){(this.data.theme?this.cssTheme.update(this.data.theme.id,this.form.value):this.cssTheme.create(this.form.value)).subscribe(n=>{this.toast.open(this.data.theme?"Theme updated":"Theme created"),this.close(n.theme)},n=>this.errors$.next(n.errors))}close(t){this.dialogRef.close(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.so),e.Y36(x.WI),e.Y36(z),e.Y36(F.F),e.Y36(c.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["crupdate-css-theme-modal"]],decls:8,vars:5,consts:[[1,"modal-header"],["mat-dialog-title",""],["trans","",4,"ngIf"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],["ngNativeValidate","",3,"formGroup","ngSubmit",4,"ngIf"],["trans",""],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","formControlName","name","required","","minlength","3"],["class","error",4,"ngIf"],[1,"setting-toggle-container"],["id","is_dark","formControlName","is_dark","trans",""],["id","default_dark","formControlName","default_dark","trans",""],["id","default_light","formControlName","default_light","trans",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],[4,"ngIf","ngIfElse"],["creating",""],[1,"error"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e.YNc(2,je,2,0,"span",2),e.YNc(3,We,2,0,"span",2),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return n.close()}),e._UZ(5,"mat-icon",4),e.qZA(),e.qZA(),e.YNc(6,nt,30,7,"form",5),e.ALo(7,"async")),2&t&&(e.xp6(2),e.Q6J("ngIf",n.data.theme),e.xp6(1),e.Q6J("ngIf",!n.data.theme),e.xp6(3),e.Q6J("ngIf",e.lcZ(7,3,n.errors$)))},directives:[x.uh,p.O5,u.Hw,h.P,c.JL,c.sg,x.xY,c.Fj,c.JJ,c.u,c.Q7,c.wO,se.Rr,x.H8,f.lW],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}"],changeDetection:0}),i})();var E=r(8208),q=r(5381),L=r(616),at=r(3786),ot=r(5978),R=r(7964),M=r(4298);const st=["*"];let re=(()=>{class i{constructor(t){this.overlayPanel=t,this.color$=new m.X(null)}ngOnDestroy(){this.pickerSub&&this.pickerSub.unsubscribe()}writeValue(t){this.color$.next(t)}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}openColorPicker(t){return(0,at.mG)(this,void 0,void 0,function*(){const{BeColorPickerModule:n}=yield r.e(295).then(r.bind(r,5295));this.pickerSub=this.overlayPanel.open(n.components.panel,{origin:new e.SBq(t.target),position:ot.x,data:{color:this.color$.value}}).valueChanged().subscribe(a=>{this.color$.next(a),this.propagateChange(this.color$.value)})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(R.T))},i.\u0275cmp=e.Xpm({type:i,selectors:[["color-picker-input"]],features:[e._Bn([{provide:c.JU,useExisting:i,multi:!0}])],ngContentSelectors:st,decls:7,vars:4,consts:[["type","button","matRipple","",1,"no-style","color-picker-btn",3,"click"],["svgIcon","drop-custom",1,"color-icon"],["trans","",1,"name"],["trans","",1,"change"]],template:function(t,n){1&t&&(e.F$t(),e.TgZ(0,"button",0),e.NdJ("click",function(s){return n.openColorPicker(s)}),e.TgZ(1,"mat-icon",1),e.ALo(2,"async"),e.qZA(),e.TgZ(3,"span",2),e.Hsn(4),e.qZA(),e.TgZ(5,"span",3),e._uU(6,"Change"),e.qZA(),e.qZA()),2&t&&(e.xp6(1),e.Udp("color",e.lcZ(2,2,n.color$)))},directives:[M.wG,u.Hw,h.P],pipes:[p.Ov],styles:[".color-picker-btn[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 10px 0 15px;margin-bottom:15px;border-radius:4px;border:1px solid var(--be-divider-default);background-color:var(--be-background);cursor:pointer;height:57px;font-size:1.5rem;overflow:hidden;width:100%}.color-picker-btn[_ngcontent-%COMP%]   .color-icon[_ngcontent-%COMP%]{width:35px;height:35px}.color-picker-btn[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{margin-left:3px;margin-top:3px;font-size:1.4rem;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:160px;text-transform:capitalize}.color-picker-btn[_ngcontent-%COMP%]   .change[_ngcontent-%COMP%]{color:var(--be-link);font-size:1.3rem;margin-left:auto}"],changeDetection:0}),i})();function rt(i,o){if(1&i&&(e.TgZ(0,"li"),e.TgZ(1,"color-picker-input",2),e._uU(2),e.qZA(),e.qZA()),2&i){const t=o.$implicit,n=e.oxw();e.xp6(1),e.Q6J("formControlName",t.key),e.xp6(1),e.Oqu(n.viewName(t.key))}}let lt=(()=>{class i{constructor(t,n){this.editor=t,this.themes=n,this.form=new c.cw({}),this.colorCache={}}ngOnInit(){this.editor.setSaveRequest(this.saveColors.bind(this)),Object.entries(this.theme.colors).forEach(([t,n])=>{this.form.addControl(t,new c.NI(n))}),this.editor.initiated$.subscribe(()=>{this.setColors(this.theme.colors),this.form.valueChanges.subscribe(t=>{this.setColors(t),this.editor.addChanges({colors:t})})})}ngOnDestroy(){this.editor.setSaveRequest(null)}saveColors(t){return this.themes.update(this.theme.id,t)}setColors(t){Object.entries(t).forEach(([n,a])=>{this.colorCache[n]!==a&&(this.editor.postMessage(new Ae(n,a)),this.colorCache[n]=a)})}viewName(t){return t.replace("be-","").replace(/-/g," ")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_),e.Y36(z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["css-theme-colors-panel"]],inputs:{theme:"theme"},decls:3,vars:4,consts:[[1,"unstyled-list",3,"formGroup"],[4,"ngFor","ngForOf"],["trans","",3,"formControlName"]],template:function(t,n){1&t&&(e.TgZ(0,"ul",0),e.YNc(1,rt,3,2,"li",1),e.ALo(2,"keyvalue"),e.qZA()),2&t&&(e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,2,n.theme.colors)))},directives:[c.JL,c.sg,p.sg,re,h.P,c.JJ,c.u],pipes:[p.Nd],styles:[""],changeDetection:0}),i})();function ct(i,o){1&i&&e._UZ(0,"css-theme-colors-panel",5),2&i&&e.Q6J("theme",o.ngIf)}function pt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"li",9),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).setSelectedTheme(s)}),e.TgZ(1,"div",10),e._uU(2),e.qZA(),e.TgZ(3,"div",11),e.NdJ("click",function(a){return a.stopPropagation()}),e.TgZ(4,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).setSelectedTheme(s)}),e._UZ(5,"mat-icon",13),e.qZA(),e.TgZ(6,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).openCrupdateThemeModal(s)}),e._UZ(7,"mat-icon",14),e.qZA(),e.TgZ(8,"button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).maybeDeleteThemeModal(s)}),e._UZ(9,"mat-icon",15),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.name)}}function dt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",6),e.NdJ("click",function(){return e.CHM(t),e.oxw().openCrupdateThemeModal()}),e._uU(1,"New Theme"),e.qZA(),e.TgZ(2,"ul",7),e.YNc(3,pt,10,1,"li",8),e.ALo(4,"async"),e.qZA()}if(2&i){const t=e.oxw();e.xp6(3),e.Q6J("ngForOf",e.lcZ(4,1,t.loadedThemes$))}}let mt=(()=>{class i{constructor(t,n,a,s,l,d){this.appearance=t,this.modal=n,this.themes=a,this.toast=s,this.router=l,this.route=d,this.loading$=new m.X(!1),this.loadedThemes$=new m.X([]),this.selectedTheme$=new m.X(null),this.path$=this.selectedTheme$.pipe((0,J.U)(T=>{const k=["Themes"];return T&&k.push(T.name),k}))}ngOnInit(){this.reloadThemes()}ngOnDestroy(){this.querySub&&this.querySub.unsubscribe()}openCrupdateThemeModal(t){this.modal.open(it,{theme:t}).afterClosed().subscribe(n=>{n&&this.reloadThemes()})}setSelectedTheme(t){this.router.navigate([],{queryParams:{theme:t&&t.id},queryParamsHandling:"merge"})}openPreviousPanel(){this.selectedTheme$.value?this.setSelectedTheme():this.appearance.closeActivePanel()}maybeDeleteThemeModal(t){this.modal.show(E.z,{title:"Delete Theme",body:"Are you sure you want to delete this theme?",ok:"Delete"}).afterClosed().subscribe(n=>{!n||this.deleteTheme(t)})}reloadThemes(){this.loading$.next(!0),this.themes.all().pipe((0,S.x)(()=>this.loading$.next(!1))).subscribe(t=>{this.loadedThemes$.next(t.pagination.data),this.bindToQueryParams()})}deleteTheme(t){this.themes.delete([t.id]).subscribe(()=>{this.toast.open("Theme deleted"),this.reloadThemes()})}bindToQueryParams(){this.querySub||(this.querySub=this.route.queryParams.subscribe(t=>{const n=this.loadedThemes$.value.find(a=>a.id===+t.theme);this.selectedTheme$.next(n)}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_),e.Y36(q.u),e.Y36(z),e.Y36(F.F),e.Y36(b.F0),e.Y36(b.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["themes-appearance-panel"]],decls:9,vars:10,consts:[[3,"path","back"],[1,"appearance-panel-content"],[3,"theme",4,"ngIf","ngIfElse"],["themesList",""],[1,"overlay","overlay-partial",3,"isVisible"],[3,"theme"],["mat-raised-button","","color","accent","type","button","trans","",1,"new-theme-button",3,"click"],[1,"unstyled-list"],["class","nav-item",3,"click",4,"ngFor","ngForOf"],[1,"nav-item",3,"click"],[1,"name"],[1,"actions",3,"click"],["mat-icon-button","","type","button",3,"click"],["svgIcon","drop-custom"],["svgIcon","edit"],["svgIcon","delete"]],template:function(t,n){if(1&t&&(e.TgZ(0,"appearance-panel-meta",0),e.NdJ("back",function(){return n.openPreviousPanel()}),e.ALo(1,"async"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,ct,1,1,"css-theme-colors-panel",2),e.ALo(4,"async"),e.YNc(5,dt,5,3,"ng-template",null,3,e.W1O),e.qZA(),e._UZ(7,"loading-indicator",4),e.ALo(8,"async")),2&t){const a=e.MAs(6);e.Q6J("path",e.lcZ(1,4,n.path$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(4,6,n.selectedTheme$))("ngIfElse",a),e.xp6(4),e.Q6J("isVisible",e.lcZ(8,8,n.loading$))}},directives:[I,p.O5,L.Q,lt,f.lW,h.P,p.sg,u.Hw],pipes:[p.Ov],styles:[".new-theme-button[_ngcontent-%COMP%]{margin-bottom:15px}"],changeDetection:0}),i})();var le=r(9905),Z=r(395),ce=r(1669);class pe{constructor(o={}){this.type="link",this.condition=null,this.target=null,this.activeExact=!1;for(const t in o)this[t]=o[t];this.id=Math.floor(999*Math.random())}}let G=(()=>{class i{constructor(t,n){this.settings=t,this.appearance=n,this.allMenus$=new m.X([]),this.activeMenu$=new m.X(null)}create(){const t=[...this.allMenus$.value];this.activeMenu$.next(new ce.v({name:"New Menu"})),t.push(this.activeMenu$.value),this.allMenus$.next(t),this.commitChanges()}reorderActiveMenuItems(t,n){const a=Object.assign({},this.activeMenu$.value);(0,Z.bA)(a.items,t,n),this.activeMenu$.next(a),this.commitChanges()}deleteActive(){const t=[...this.allMenus$.value],n=t.indexOf(this.activeMenu$.value);t.splice(n,1),this.activeMenu$.next(null),this.allMenus$.next(t),this.commitChanges()}addItem(t){const n=Object.assign({},this.activeMenu$.value);t=this.transformLocalLinksToRoutes(t),n.items.push(t),this.activeMenu$.next(n),this.commitChanges()}removeItem(t){const n=Object.assign({},this.activeMenu$.value),a=this.activeMenu$.value.items.indexOf(t);n.items.splice(a,1),this.activeMenu$.next(n),this.commitChanges()}transformLocalLinksToRoutes(t){const n=this.settings.getBaseUrl();return"link"!==t.type||-1===t.action.indexOf(n)||(t.type="route",t.action=t.action.replace(this.settings.getBaseUrl(),"")),t}commitChanges(){const t=JSON.stringify(this.allMenus$.value);this.appearance.setConfig("menus",t),this.appearance.addChanges({menus:t})}setFromJson(t){if(!t)return;const n=JSON.parse(t);if(!n)return;const a=n.map(s=>{const l=new ce.v(s);return l.items=l.items.map(d=>new pe(d)),l});this.allMenus$.next(a)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(w.Z),e.LFG(_))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var de=r(7310),me=r(9981);let ut=(()=>{class i{constructor(t){this.http=t}get(){return this.http.getWithCache("admin/appearance/menu-categories")}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(me.F))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var C=r(1625);function ht(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().addRouteMenuItem(s)}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.hij("",t," ")}}function gt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).addCustomMenuItem(s)}),e._uU(1),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Oqu(t.label)}}function _t(i,o){if(1&i&&(e.TgZ(0,"mat-expansion-panel",5),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title",6),e._uU(3),e.qZA(),e.qZA(),e.TgZ(4,"div",14),e.YNc(5,gt,2,1,"div",15),e.qZA(),e.qZA()),2&i){const t=o.$implicit;e.xp6(3),e.Oqu(t.name),e.xp6(2),e.Q6J("ngForOf",t.items)}}let ft=(()=>{class i{constructor(t,n,a,s,l){this.editor=t,this.appearance=n,this.overlayPanelRef=a,this.fb=s,this.itemCategories=l,this.linkForm=this.fb.group({action:[""],label:[""]})}ngOnInit(){this.itemCategories.get().subscribe(t=>{this.menuItemCategories=t.categories})}addLinkMenuItem(){this.close({type:"link",label:this.linkForm.value.label,action:this.linkForm.value.action})}addRouteMenuItem(t){this.close({type:"route",label:t,action:t})}addCustomMenuItem(t){this.close(t)}close(t){this.overlayPanelRef.close(t)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(G),e.Y36(_),e.Y36(de.L),e.Y36(c.qu),e.Y36(ut))},i.\u0275cmp=e.Xpm({type:i,selectors:[["select-menu-item-action"]],decls:30,vars:3,consts:[[1,"header"],["trans","",1,"title"],["svgIcon","close",3,"click"],[1,"new-item-tabs"],["ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"mat-elevation-z"],["trans",""],[1,"many-inputs","expansion-panel-content"],[1,"input-container"],["for","external-link-url","trans",""],["type","url","id","external-link-url","formControlName","action","required",""],["for","external-link-text","trans",""],["type","text","id","external-link-text","formControlName","label","required",""],["mat-button","","color","accent","type","submit","trans",""],[1,"items-list","expansion-panel-content"],["class","item",3,"click",4,"ngFor","ngForOf"],["class","mat-elevation-z",4,"ngFor","ngForOf"],[1,"item",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"span",1),e._uU(2,"Select Destination"),e.qZA(),e.TgZ(3,"mat-icon",2),e.NdJ("click",function(){return n.close()}),e.qZA(),e.qZA(),e.TgZ(4,"div",3),e.TgZ(5,"mat-accordion"),e.TgZ(6,"form",4),e.NdJ("ngSubmit",function(){return n.addLinkMenuItem()}),e.TgZ(7,"mat-expansion-panel",5),e.TgZ(8,"mat-expansion-panel-header"),e.TgZ(9,"mat-panel-title",6),e._uU(10,"Link"),e.qZA(),e.qZA(),e.TgZ(11,"div",7),e.TgZ(12,"div",8),e.TgZ(13,"label",9),e._uU(14,"URL"),e.qZA(),e._UZ(15,"input",10),e.qZA(),e.TgZ(16,"div",8),e.TgZ(17,"label",11),e._uU(18,"Link Text"),e.qZA(),e._UZ(19,"input",12),e.qZA(),e.qZA(),e.TgZ(20,"mat-action-row"),e.TgZ(21,"button",13),e._uU(22,"Select"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(23,"mat-expansion-panel",5),e.TgZ(24,"mat-expansion-panel-header"),e.TgZ(25,"mat-panel-title",6),e._uU(26,"Route"),e.qZA(),e.qZA(),e.TgZ(27,"div",14),e.YNc(28,ht,2,1,"div",15),e.qZA(),e.qZA(),e.YNc(29,_t,6,2,"mat-expansion-panel",16),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("formGroup",n.linkForm),e.xp6(22),e.Q6J("ngForOf",n.appearance.config.menus.availableRoutes),e.xp6(1),e.Q6J("ngForOf",n.menuItemCategories))},directives:[h.P,u.Hw,C.pp,c.JL,c.sg,C.ib,C.yz,C.yK,c.Fj,c.JJ,c.u,c.Q7,C.VG,f.lW,p.sg],styles:["[_nghost-%COMP%]{background-color:var(--be-background-alternative);box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f;overflow:hidden;width:300px;border-radius:4px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;background-color:var(--be-background);padding:15px;font-size:1.7rem;font-weight:300;border-bottom:1px solid var(--be-divider-default);margin-bottom:10px}.header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{cursor:pointer;color:var(--be-secondary-text);margin-left:auto}.new-item-tabs[_ngcontent-%COMP%]{padding:10px}.items-list[_ngcontent-%COMP%]{overflow:auto;max-height:300px}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{color:var(--be-link);padding-bottom:8px;margin-bottom:8px;border-bottom:1px solid var(--be-divider-default);cursor:pointer}.items-list[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:hover{text-decoration:underline}.mat-expansion-panel[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);margin-bottom:10px}.mat-expansion-panel-header[_ngcontent-%COMP%]{min-height:57px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.expansion-panel-content[_ngcontent-%COMP%]{padding-top:25px}"],changeDetection:0}),i})();function vt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"button",2),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().selectIcon(s)}),e._UZ(1,"mat-icon",3),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(1),e.Q6J("svgIcon",t)}}let bt=(()=>{class i{constructor(t,n){this.http=t,this.overlayPanelRef=n,this.icons$=new m.X([]),this.loading$=new m.X(!1),this.iconSelected=new e.vpe}ngOnInit(){this.loading$.next(!0),this.http.get("admin/icons").pipe((0,S.x)(()=>this.loading$.next(!1))).subscribe(t=>{this.icons$.next(t.icons)})}selectIcon(t){this.iconSelected.observers.length?this.iconSelected.next(t):(this.overlayPanelRef.emitValue(t),this.overlayPanelRef.close())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(me.F),e.Y36(de.L))},i.\u0275cmp=e.Xpm({type:i,selectors:[["icon-selector"]],outputs:{iconSelected:"iconSelected"},decls:4,vars:6,consts:[["mat-icon-button","",3,"click",4,"ngFor","ngForOf"],[1,"overlay","overlay-partial",3,"isVisible"],["mat-icon-button","",3,"click"],[3,"svgIcon"]],template:function(t,n){1&t&&(e.YNc(0,vt,2,1,"button",0),e.ALo(1,"async"),e._UZ(2,"loading-indicator",1),e.ALo(3,"async")),2&t&&(e.Q6J("ngForOf",e.lcZ(1,2,n.icons$)),e.xp6(2),e.Q6J("isVisible",e.lcZ(3,4,n.loading$)))},directives:[p.sg,L.Q,f.lW,u.Hw],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:block;background-color:var(--be-background);padding:15px;border-radius:4px;width:490px;max-width:90vw;min-height:390px;overflow:auto;position:relative;text-align:center;box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.mat-icon-button[_ngcontent-%COMP%]{transition:transform .1s ease-in-out}.mat-icon-button[_ngcontent-%COMP%]:hover{transform:scale(1.6)}"],changeDetection:0}),i})();function xt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-expansion-panel",5),e.NdJ("opened",function(){const s=e.CHM(t).$implicit;return e.oxw(2).toggleMenuItem(s)})("closed",function(){const s=e.CHM(t).$implicit;return e.oxw(2).toggleMenuItem(s)}),e.TgZ(1,"mat-expansion-panel-header"),e.TgZ(2,"mat-panel-title"),e._UZ(3,"mat-icon",6),e.TgZ(4,"span",7),e._uU(5),e.qZA(),e.qZA(),e.qZA(),e.TgZ(6,"div",8),e.TgZ(7,"div",9),e.TgZ(8,"label",10),e._uU(9,"Label"),e.qZA(),e.TgZ(10,"input",11),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.label=a})("ngModelChange",function(){return e.CHM(t),e.oxw(2).menus.commitChanges()}),e.qZA(),e.qZA(),e.TgZ(11,"div",9),e.TgZ(12,"label",10),e._uU(13,"Type"),e.qZA(),e.TgZ(14,"select",12),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.type=a})("ngModelChange",function(){return e.CHM(t),e.oxw(2).menus.commitChanges()}),e.TgZ(15,"option",13),e._uU(16,"Link"),e.qZA(),e.TgZ(17,"option",14),e._uU(18,"Route"),e.qZA(),e.TgZ(19,"option",15),e._uU(20,"Page"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(21,"div",9),e.TgZ(22,"label",10),e._uU(23,"Action"),e.qZA(),e.TgZ(24,"input",11),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.action=a})("ngModelChange",function(){return e.CHM(t),e.oxw(2).menus.commitChanges()}),e.qZA(),e.qZA(),e.TgZ(25,"div",9),e.TgZ(26,"label",10),e._uU(27,"Condition"),e.qZA(),e.TgZ(28,"select",12),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.condition=a})("ngModelChange",function(){return e.CHM(t),e.oxw(2).menus.commitChanges()}),e.TgZ(29,"option",16),e._uU(30,"None"),e.qZA(),e.TgZ(31,"option",17),e._uU(32,"Show to Logged in Users Only"),e.qZA(),e.TgZ(33,"option",18),e._uU(34,"Show to Guest Users Only"),e.qZA(),e.TgZ(35,"option",19),e._uU(36,"Show to Admin Only"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(37,"div",9),e.TgZ(38,"label",10),e._uU(39,"Open link in"),e.qZA(),e.TgZ(40,"select",12),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.target=a})("ngModelChange",function(){return e.CHM(t),e.oxw(2).menus.commitChanges()}),e.TgZ(41,"option",20),e._uU(42,"Same Window"),e.qZA(),e.TgZ(43,"option",21),e._uU(44,"New Window"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(45,"div",22,23),e.NdJ("click",function(){const s=e.CHM(t).$implicit,l=e.MAs(46);return e.oxw(2).openIconSelector(l,s)}),e.TgZ(47,"label",10),e._uU(48,"Icon"),e.qZA(),e.TgZ(49,"input",24),e.NdJ("ngModelChange",function(a){return e.CHM(t).$implicit.icon=a}),e.qZA(),e._UZ(50,"mat-icon",25),e.qZA(),e.qZA(),e.TgZ(51,"mat-action-row"),e.TgZ(52,"button",26),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).confirmMenuItemDeletion()}),e._uU(53,"Remove"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit;e.uIk("data-id",t.id),e.xp6(5),e.Oqu(t.label),e.xp6(3),e.s9C("for",t.id+"-label"),e.xp6(2),e.s9C("id",t.id+"-label"),e.Q6J("ngModel",t.label),e.xp6(2),e.s9C("for",t.id+"-type"),e.xp6(2),e.s9C("id",t.id+"-type"),e.Q6J("ngModel",t.type),e.xp6(8),e.s9C("for",t.id+"-action"),e.xp6(2),e.s9C("id",t.id+"-action"),e.Q6J("ngModel",t.action),e.xp6(2),e.s9C("for",t.id+"-condition"),e.xp6(2),e.s9C("id",t.id+"-condition"),e.Q6J("ngModel",t.condition),e.xp6(1),e.Q6J("ngValue",null),e.xp6(9),e.s9C("for",t.id+"-target"),e.xp6(2),e.s9C("id",t.id+"-target"),e.Q6J("ngModel",t.target),e.xp6(7),e.s9C("for",t.id+"-icon"),e.xp6(2),e.s9C("id",t.id+"-icon"),e.Q6J("ngModel",t.icon),e.xp6(1),e.Q6J("svgIcon",t.icon)}}function Ct(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"mat-accordion",3),e.NdJ("cdkDropListDropped",function(a){return e.CHM(t),e.oxw().reorderMenuItems(a)}),e.YNc(1,xt,54,22,"mat-expansion-panel",4),e.qZA()}if(2&i){const t=o.ngIf;e.xp6(1),e.Q6J("ngForOf",t.items)}}function Zt(i,o){1&i&&(e.TgZ(0,"div",27),e._uU(1,"This menu has no items yet."),e.qZA())}let At=(()=>{class i{constructor(t,n,a,s){this.menus=t,this.modal=n,this.overlayPanel=a,this.cd=s,this.subscriptions=[]}ngOnDestroy(){this.subscriptions.forEach(t=>{t&&t.unsubscribe()})}reorderMenuItems(t){this.menus.reorderActiveMenuItems(t.previousIndex,t.currentIndex)}toggleMenuItem(t){this.selectedMenuItem=this.selectedMenuItem===t?null:t}confirmMenuItemDeletion(){this.modal.show(E.z,{title:"Delete Menu Item",body:"Are you sure you want to delete this menu item?",ok:"Delete"}).afterClosed().subscribe(t=>{!t||(this.menus.removeItem(this.selectedMenuItem),this.selectedMenuItem=null)})}openIconSelector(t,n){this.overlayPanel.open(bt,{position:le.Z,origin:new e.SBq(t)}).valueChanged().subscribe(a=>{n.icon=a,this.menus.commitChanges(),this.cd.detectChanges()})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(G),e.Y36(q.u),e.Y36(R.T),e.Y36(e.sBO))},i.\u0275cmp=e.Xpm({type:i,selectors:[["menu-items"]],decls:6,vars:4,consts:[["trans","",1,"title"],["cdkDropList","",3,"cdkDropListDropped",4,"ngIf","ngIfElse"],["noActiveMenu",""],["cdkDropList","",3,"cdkDropListDropped"],["class","mat-elevation-z menu-item-container","cdkDrag","",3,"opened","closed",4,"ngFor","ngForOf"],["cdkDrag","",1,"mat-elevation-z","menu-item-container",3,"opened","closed"],["cdkDragHandle","","svgIcon","drag-handle",1,"drag-handle"],[1,"name"],[1,"many-inputs","menu-item-list"],[1,"input-container"],["trans","",3,"for"],["type","text",3,"ngModel","id","ngModelChange"],[3,"ngModel","id","ngModelChange"],["value","link","trans",""],["value","route","trans",""],["value","page","trans",""],["trans","",3,"ngValue"],["value","auth","trans",""],["value","guest","trans",""],["value","admin","trans",""],["value","_self","trans",""],["value","_blank","trans",""],[1,"input-container","icon-input-container",3,"click"],["iconInput",""],["type","text","readonly","","placeholder","(Optional)","trans-placeholder","",3,"ngModel","id","ngModelChange"],[3,"svgIcon"],["mat-button","","color","warn","trans","",1,"delete-button",3,"click"],["trans","",1,"no-menu-items"]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e._uU(1,"Menu Items"),e.qZA(),e.YNc(2,Ct,2,1,"mat-accordion",1),e.ALo(3,"async"),e.YNc(4,Zt,2,0,"ng-template",null,2,e.W1O)),2&t){const a=e.MAs(5);e.xp6(2),e.Q6J("ngIf",e.lcZ(3,2,n.menus.activeMenu$))("ngIfElse",a)}},directives:[h.P,p.O5,C.pp,Z.Wj,p.sg,C.ib,Z.Zt,C.yz,C.yK,u.Hw,Z.Bh,c.Fj,c.JJ,c.On,c.EJ,c.YN,c.Kr,C.VG,f.lW],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:block}.title[_ngcontent-%COMP%]{margin:35px 0 5px}.no-menu-items[_ngcontent-%COMP%]{font-size:1.6rem;font-style:italic;color:var(--be-secondary-text);margin:10px 0}.icon-input-container[_ngcontent-%COMP%]{position:relative}.icon-input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding-left:35px}.icon-input-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:36px;left:8px;color:var(--be-secondary-text)}.menu-item-list[_ngcontent-%COMP%]{padding-top:25px}.mat-expansion-panel[_ngcontent-%COMP%]{margin-bottom:10px;border-radius:4px;border:1px solid var(--be-divider-default)}.mat-expansion-panel-header[_ngcontent-%COMP%]{min-height:57px}.mat-expansion-panel-header.mat-expanded[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default)}.mat-action-row[_ngcontent-%COMP%]{border:none;padding:0 15px 10px}.drag-handle[_ngcontent-%COMP%]{display:block;color:var(--be-secondary-text);margin-right:8px;cursor:move}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),i})();function Tt(i,o){if(1&i&&(e.TgZ(0,"option",15),e._uU(1),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("ngValue",t),e.xp6(1),e.Oqu(n.getDisplayName(t))}}function Mt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",4),e.TgZ(1,"div",5),e.TgZ(2,"div",6),e.TgZ(3,"label",7),e._uU(4,"Menu Name"),e.qZA(),e.TgZ(5,"input",8),e.NdJ("ngModelChange",function(a){return e.CHM(t).ngIf.name=a})("ngModelChange",function(){return e.CHM(t),e.oxw().menus.commitChanges()}),e.qZA(),e.qZA(),e.TgZ(6,"div",6),e.TgZ(7,"label",9),e._uU(8,"Menu Position"),e.qZA(),e.TgZ(9,"select",10),e.NdJ("ngModelChange",function(a){return e.CHM(t).ngIf.position=a})("ngModelChange",function(){return e.CHM(t),e.oxw().menus.commitChanges()}),e.YNc(10,Tt,2,2,"option",11),e.qZA(),e.qZA(),e.qZA(),e._UZ(11,"menu-items"),e.TgZ(12,"div",12),e.TgZ(13,"button",13),e.NdJ("click",function(){return e.CHM(t),e.oxw().confirmMenuDeletion()}),e._uU(14,"Delete Menu"),e.qZA(),e.TgZ(15,"button",14),e.NdJ("click",function(){return e.CHM(t),e.oxw().openAddItemPanel()}),e._uU(16,"Add Item"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=o.ngIf,n=e.oxw();e.xp6(5),e.Q6J("ngModel",t.name),e.xp6(4),e.Q6J("ngModel",t.position),e.xp6(1),e.Q6J("ngForOf",n.appearance.config.menus.positions)}}function yt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw(2).setActiveMenu(s)}),e.TgZ(1,"span",20),e._uU(2),e.qZA(),e._UZ(3,"mat-icon",21),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(2),e.Oqu(t.name)}}function kt(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",16),e.YNc(1,yt,4,1,"div",17),e.ALo(2,"async"),e.TgZ(3,"div",12),e.TgZ(4,"button",18),e.NdJ("click",function(){return e.CHM(t),e.oxw().menus.create()}),e._uU(5,"Add a Menu"),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",e.lcZ(2,1,t.menus.allMenus$))}}const Pt=function(i){return["Menus",i]};let It=(()=>{class i{constructor(t,n,a,s,l,d){this.appearance=t,this.menus=n,this.modal=a,this.settings=s,this.panel=l,this.el=d,this.menus.setFromJson(this.settings.get("menus"))}openAddItemPanel(){const t=le.Z.slice();t[0].offsetX=10,t[1].offsetX=10,this.panel.open(ft,{position:t,origin:this.el,panelClass:"add-menu-item-panel-container"}).afterClosed().subscribe(n=>{n&&this.menus.addItem(new pe(n))})}openPreviousPanel(){this.menus.activeMenu$.value?this.menus.activeMenu$.next(null):this.appearance.closeActivePanel()}setActiveMenu(t){this.menus.activeMenu$.next(t)}confirmMenuDeletion(){this.modal.show(E.z,{title:"Delete Menu",body:"Are you sure you want to delete this menu?",ok:"Delete"}).afterClosed().subscribe(t=>{!t||this.menus.deleteActive()})}getDisplayName(t){return t.replace(/-/g," ")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_),e.Y36(G),e.Y36(q.u),e.Y36(w.Z),e.Y36(R.T),e.Y36(e.SBq))},i.\u0275cmp=e.Xpm({type:i,selectors:[["menus-appearance-panel"]],decls:6,vars:7,consts:[[3,"path","back"],[1,"appearance-panel-content"],["class","menu-panel",4,"ngIf","ngIfElse"],["allMenuList",""],[1,"menu-panel"],[1,"many-inputs","menu-settings"],[1,"input-container"],["for","menu-name","trans",""],["type","text","id","menu-name",3,"ngModel","ngModelChange"],["for","menu-position","trans",""],["id","menu-position",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"action-buttons"],["mat-button","","color","warn","trans","",3,"click"],["mat-button","","color","accent","trans","",1,"button","flat","add-item-button",3,"click"],[3,"ngValue"],[1,"menus"],["class","menu nav-item",3,"click",4,"ngFor","ngForOf"],["mat-button","","color","accent","trans","",1,"button","primary",3,"click"],[1,"menu","nav-item",3,"click"],[1,"name"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(t,n){if(1&t&&(e.TgZ(0,"appearance-panel-meta",0),e.NdJ("back",function(){return n.openPreviousPanel()}),e.qZA(),e.TgZ(1,"div",1),e.YNc(2,Mt,17,3,"div",2),e.ALo(3,"async"),e.YNc(4,kt,6,3,"ng-template",null,3,e.W1O),e.qZA()),2&t){const a=e.MAs(5);e.Q6J("path",e.VKq(5,Pt,n.menus.activeMenu$.value&&n.menus.activeMenu$.value.name)),e.xp6(2),e.Q6J("ngIf",e.lcZ(3,3,n.menus.activeMenu$))("ngIfElse",a)}},directives:[I,p.O5,h.P,c.Fj,c.JJ,c.On,c.EJ,p.sg,At,f.lW,c.YN,c.Kr,u.Hw],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:block}.menu-settings[_ngcontent-%COMP%]{margin:10px 0}.menu-settings[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{text-transform:capitalize}.action-buttons[_ngcontent-%COMP%]{text-align:right;margin:10px 0}"],changeDetection:0}),i})();function wt(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",3),e.TgZ(2,"label",4),e._uU(3),e.qZA(),e._UZ(4,"textarea",5),e.qZA(),e.BQk()),2&i){const t=o.$implicit;e.xp6(2),e.Q6J("for",t.key),e.xp6(1),e.Oqu(t.name),e.xp6(1),e.Q6J("id",t.key)("formControlName",t.key)("placeholder",t.defaultValue)}}const Ot=function(){return["Seo Settings"]};let St=(()=>{class i{constructor(t,n){this.editor=t,this.fb=n,this.form=this.fb.group({})}ngOnInit(){this.seoFields=this.editor.defaultSettings.seo_fields,this.seoFields.forEach(t=>{this.form.addControl(t.key,this.fb.control(t.value))}),this.form.valueChanges.subscribe(t=>{this.editor.addChanges(t)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_),e.Y36(c.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["seo-appearance-panel"]],decls:3,vars:4,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs",3,"formGroup"],[4,"ngFor","ngForOf"],[1,"input-container"],["trans","",3,"for"],["type","text","rows","2",3,"id","formControlName","placeholder"]],template:function(t,n){1&t&&(e.TgZ(0,"appearance-panel-meta",0),e.NdJ("back",function(){return n.editor.closeActivePanel()}),e.qZA(),e.TgZ(1,"div",1),e.YNc(2,wt,5,5,"ng-container",2),e.qZA()),2&t&&(e.Q6J("path",e.DdM(3,Ot)),e.xp6(1),e.Q6J("formGroup",n.form),e.xp6(1),e.Q6J("ngForOf",n.seoFields))},directives:[I,c.JL,c.sg,p.sg,h.P,c.Fj,c.JJ,c.u],styles:["label[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),i})();var A=r(84),qt=r(5402);const Jt=["editor"];function Ut(i,o){1&i&&(e.TgZ(0,"p",11),e._uU(1,"If entering javascript, wrap it with <script><\/script> tag."),e.qZA())}let Ft=(()=>{class i{constructor(t,n,a){this.dialogRef=t,this.data=n,this.lazyLoader=a,this.loading$=new m.X(!1),this.syntaxInvalid$=new m.X(!1)}ngOnInit(){this.initEditor(this.data.contents,this.data.language),this.overrideDialogCloseEvents()}confirm(){this.close(this.editor.getValue())}close(t){this.dialogRef.close(t)}initEditor(t,n="html"){this.loading$.next(!0),this.lazyLoader.loadAsset("js/ace/ace.js",{type:"js"}).then(()=>{this.editor=ace.edit(this.editorEl.nativeElement),this.editor.getSession().setMode("ace/mode/"+n),this.editor.setTheme("ace/theme/chrome"),this.editor.$blockScrolling=1/0,t&&this.editor.setValue(t,1),this.editor.getSession().on("changeAnnotation",()=>{const a=this.editor.getSession().getAnnotations();if(a[0]&&/doctype first/.test(a[0].text))return a.splice(0,1),void this.editor.getSession().setAnnotations(a);const s=this.editor.getSession().getAnnotations().filter(l=>"error"===l.type).length>0;this.syntaxInvalid$.next(s)}),this.loading$.next(!1)})}overrideDialogCloseEvents(){this.dialogRef.disableClose=!0,this.dialogRef.backdropClick().subscribe(()=>{this.close()}),this.dialogRef.keydownEvents().pipe((0,O.h)(t=>t.keyCode===A.hY)).subscribe(()=>this.close())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.so),e.Y36(x.WI),e.Y36(qt.j))},i.\u0275cmp=e.Xpm({type:i,selectors:[["code-editor-modal"]],viewQuery:function(t,n){if(1&t&&e.Gf(Jt,7),2&t){let a;e.iGM(a=e.CRH())&&(n.editorEl=a.first)}},decls:18,vars:7,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",1,"modal-title"],["type","button","tabindex","-1",1,"close-button","no-style",3,"click"],["svgIcon","close"],[1,"editor-container"],["class","info","trans","",4,"ngIf"],[1,"editor"],["editor",""],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled","click"],[1,"overlay",3,"isVisible"],["trans","",1,"info"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"h2",1),e._uU(2,"Code Editor"),e.qZA(),e.TgZ(3,"button",2),e.NdJ("click",function(){return n.close()}),e._UZ(4,"mat-icon",3),e.qZA(),e.qZA(),e.TgZ(5,"mat-dialog-content"),e.TgZ(6,"div",4),e.YNc(7,Ut,2,0,"p",5),e._UZ(8,"div",6,7),e.qZA(),e.qZA(),e.TgZ(10,"mat-dialog-actions"),e.TgZ(11,"button",8),e.NdJ("click",function(){return n.close()}),e._uU(12,"Cancel"),e.qZA(),e.TgZ(13,"button",9),e.NdJ("click",function(){return n.confirm()}),e.ALo(14,"async"),e._uU(15,"Update"),e.qZA(),e.qZA(),e._UZ(16,"loading-indicator",10),e.ALo(17,"async")),2&t&&(e.xp6(7),e.Q6J("ngIf","html"===n.data.language),e.xp6(6),e.Q6J("disabled",e.lcZ(14,3,n.syntaxInvalid$)),e.xp6(3),e.Q6J("isVisible",e.lcZ(17,5,n.loading$)))},directives:[x.uh,h.P,u.Hw,x.xY,p.O5,x.H8,f.lW,L.Q],pipes:[p.Ov],styles:["[_nghost-%COMP%]{display:block;width:800px;max-width:100%}.modal-header[_ngcontent-%COMP%]{margin:0 0 15px}.editor[_ngcontent-%COMP%]{min-height:550px;border:1px solid var(--be-divider-default);font-size:1.4rem}.info[_ngcontent-%COMP%]{color:var(--be-secondary-text)}"],changeDetection:0}),i})();const $t=function(){return["Custom Code"]};let Nt=(()=>{class i{constructor(t,n,a,s){this.editor=t,this.fb=n,this.modal=a,this.toast=s,this.form=this.fb.group({"custom-code.css":[""],"custom-code.html":[""]})}ngOnInit(){const t={};Object.keys(this.form.controls).forEach(n=>{t[n]=this.editor.currentValue(n)}),this.form.patchValue(t)}openModal(t){const n="custom-code."+t,a=this.form.value[n]||"";this.modal.open(Ft,{contents:this.form.value[n],language:t}).afterClosed().subscribe(l=>{if(void 0===l||a===l)return;const d={[n]:l};this.form.patchValue(d),this.editor.saveChanges(d).subscribe(()=>{this.addCodeToPreview(t,l),this.toast.open("Custom code saved")})})}addCodeToPreview(t,n){this.editor.postMessage("css"===t?new Te(n):new Me(n))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_),e.Y36(c.qu),e.Y36(q.u),e.Y36(F.F))},i.\u0275cmp=e.Xpm({type:i,selectors:[["custom-code-appearance-panel"]],decls:12,vars:2,consts:[[3,"path","back"],[1,"appearance-panel-content"],["type","button",1,"nav-item",3,"click"],["trans","",1,"text"],["trans","",1,"actions"],[1,"nav-item",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"appearance-panel-meta",0),e.NdJ("back",function(){return n.editor.closeActivePanel()}),e.qZA(),e.TgZ(1,"div",1),e.TgZ(2,"button",2),e.NdJ("click",function(){return n.openModal("css")}),e.TgZ(3,"span",3),e._uU(4,"Custom CSS"),e.qZA(),e.TgZ(5,"span",4),e._uU(6,"Modify"),e.qZA(),e.qZA(),e.TgZ(7,"button",5),e.NdJ("click",function(){return n.openModal("html")}),e.TgZ(8,"span",3),e._uU(9,"Custom HTML & Javascript"),e.qZA(),e.TgZ(10,"span",4),e._uU(11,"Modify"),e.qZA(),e.qZA(),e.qZA()),2&t&&e.Q6J("path",e.DdM(1,$t))},directives:[I,h.P],styles:[".actions[_ngcontent-%COMP%]{color:var(--be-link);font-size:1.3rem}"],changeDetection:0}),i})();const Et=["iframe"];function Lt(i,o){1&i&&(e.TgZ(0,"span",16),e._uU(1,"Save"),e.qZA())}function Qt(i,o){1&i&&(e.TgZ(0,"span",16),e._uU(1,"Saved"),e.qZA())}function Dt(i,o){1&i&&e._UZ(0,"general-appearance-panel")}function Yt(i,o){1&i&&e._UZ(0,"themes-appearance-panel")}function Vt(i,o){1&i&&e._UZ(0,"menus-appearance-panel")}function Ht(i,o){1&i&&e._UZ(0,"seo-appearance-panel")}function zt(i,o){1&i&&e._UZ(0,"custom-code-appearance-panel")}function Rt(i,o){}function Gt(i,o){1&i&&e.YNc(0,Rt,0,0,"ng-template",21),2&i&&e.Q6J("cdkPortalOutlet",o.ngIf)}function Bt(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Gt,1,1,void 0,20),e.ALo(2,"async"),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",e.lcZ(2,1,t.panelPortal$))}}function Xt(i,o){if(1&i&&(e.ynx(0),e.ynx(1,17),e.YNc(2,Dt,1,0,"general-appearance-panel",18),e.YNc(3,Yt,1,0,"themes-appearance-panel",18),e.YNc(4,Vt,1,0,"menus-appearance-panel",18),e.YNc(5,Ht,1,0,"seo-appearance-panel",18),e.YNc(6,zt,1,0,"custom-code-appearance-panel",18),e.YNc(7,Bt,3,3,"ng-container",19),e.BQk(),e.BQk()),2&i){const t=o.ngIf;e.xp6(1),e.Q6J("ngSwitch",t.name),e.xp6(1),e.Q6J("ngSwitchCase","general"),e.xp6(1),e.Q6J("ngSwitchCase","themes"),e.xp6(1),e.Q6J("ngSwitchCase","menus"),e.xp6(1),e.Q6J("ngSwitchCase","seo-settings"),e.xp6(1),e.Q6J("ngSwitchCase","custom-code")}}const jt=function(){return[]},Wt=function(i){return{panel:i}};function Kt(i,o){if(1&i&&(e.TgZ(0,"a",24),e.TgZ(1,"span",25),e._uU(2),e.qZA(),e._UZ(3,"mat-icon",26),e.qZA()),2&i){const t=o.$implicit,n=e.oxw(2);e.Q6J("routerLink",e.DdM(3,jt))("queryParams",e.VKq(4,Wt,n.slugify(t.name))),e.xp6(2),e.Oqu(n.viewName(t.name))}}function en(i,o){if(1&i&&(e.TgZ(0,"div",22),e.YNc(1,Kt,4,6,"a",23),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.editor.config.sections)}}let tn=(()=>{class i{constructor(t,n,a,s,l){this.editor=t,this.router=n,this.route=a,this.breakpoints=s,this.config=l,this.panelPortal$=this.editor.activePanel$.pipe((0,J.U)(d=>d&&d.component?new V.C5(d.component):null))}ngOnInit(){this.editor.init(this.iframe.nativeElement,this.route.snapshot.data.defaultSettings,this.config),this.routerSub=this.route.queryParams.subscribe(t=>{this.editor.openPanel(t.panel)})}ngOnDestroy(){this.routerSub&&this.routerSub.unsubscribe()}closeEditor(){this.router.navigate(["admin"])}slugify(t){return(0,K.V)(t)}viewName(t){return t.replace("-"," ")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_),e.Y36(b.F0),e.Y36(b.gz),e.Y36(Se.S),e.Y36(H,8))},i.\u0275cmp=e.Xpm({type:i,selectors:[["appearance"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Et,7),e.Gf(ee._,7)),2&t){let a;e.iGM(a=e.CRH())&&(n.iframe=a.first),e.iGM(a=e.CRH())&&(n.sidenav=a.first)}},decls:24,vars:13,consts:[[1,"no-navbar"],[1,"sidebar"],[1,"header"],[1,"back-button",3,"click"],["svgIcon","close"],["trans","",1,"title"],["mat-raised-button","","color","accent",1,"button","primary","save-button",3,"disabled","click"],["trans","",4,"ngIf","ngIfElse"],["saved",""],[4,"ngIf","ngIfElse"],["navigation",""],[1,"live-preview"],["src","about:blank"],["iframe",""],["mat-fab","",1,"sidebar-toggle-button",3,"click"],["svgIcon","edit"],["trans",""],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[4,"ngIf"],[3,"cdkPortalOutlet"],[1,"root-navigation"],["class","nav-item",3,"routerLink","queryParams",4,"ngFor","ngForOf"],[1,"nav-item",3,"routerLink","queryParams"],["trans","",1,"text"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(t,n){if(1&t&&(e.TgZ(0,"sidenav",0),e.TgZ(1,"nav",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.NdJ("click",function(){return n.closeEditor()}),e._UZ(4,"mat-icon",4),e.qZA(),e.TgZ(5,"div",5),e._uU(6,"Appearance Editor"),e.qZA(),e.TgZ(7,"button",6),e.NdJ("click",function(){return n.editor.saveChanges()}),e.ALo(8,"async"),e.ALo(9,"async"),e.YNc(10,Lt,2,0,"span",7),e.ALo(11,"async"),e.YNc(12,Qt,2,0,"ng-template",null,8,e.W1O),e.qZA(),e.qZA(),e.YNc(14,Xt,8,6,"ng-container",9),e.ALo(15,"async"),e.YNc(16,en,2,1,"ng-template",null,10,e.W1O),e.qZA(),e.TgZ(18,"main"),e.TgZ(19,"div",11),e._UZ(20,"iframe",12,13),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"button",14),e.NdJ("click",function(){return n.sidenav.toggleSidebarMode()}),e._UZ(23,"mat-icon",15),e.qZA()),2&t){const a=e.MAs(13),s=e.MAs(17);e.xp6(7),e.Q6J("disabled",!e.lcZ(8,5,n.editor.changes$)||e.lcZ(9,7,n.editor.loading$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(11,9,n.editor.changes$))("ngIfElse",a),e.xp6(4),e.Q6J("ngIf",e.lcZ(15,11,n.editor.activePanel$))("ngIfElse",s)}},directives:[ee._,u.Hw,h.P,f.lW,p.O5,p.RF,p.n9,p.ED,Xe,mt,It,St,Nt,V.Pl,p.sg,b.yS],pipes:[p.Ov],styles:[".mat-sidenav-container[_ngcontent-%COMP%]{height:100vh}.sidebar-toggle-button[_ngcontent-%COMP%]{display:none;position:fixed;bottom:15px;right:15px;z-index:4}sidenav[_ngcontent-%COMP%]{--nav-width: 330px}.sidebar[_ngcontent-%COMP%]{box-shadow:0 3px 1px -2px #0003,0 2px 2px #00000024,0 1px 5px #0000001f;padding:0}.sidebar[_ngcontent-%COMP%]   .root-navigation[_ngcontent-%COMP%]{padding:10px}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;padding-right:10px;border-bottom:1px solid var(--be-divider-default);height:50px}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{padding-left:10px;font-size:1.7rem;font-weight:300}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{margin-left:auto;max-height:36px;box-shadow:none}.sidebar[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]:disabled{cursor:default}.live-preview[_ngcontent-%COMP%]{display:flex;height:100%;justify-content:center;align-items:center;flex:1 1 auto;position:relative}.live-preview[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{border:none;width:100%;height:100%}@media screen and (max-width: 768px){.sidebar-toggle-button[_ngcontent-%COMP%]{display:block}}"],changeDetection:0}),i})(),nn=(()=>{class i{constructor(t,n){this.editor=t,this.modal=n}canDeactivate(){return!this.editor.changes$.value||this.modal.show(E.z,{title:"Close Appearance Editor",body:"Are you sure you want to close appearance editor?",bodyBold:"All unsaved changes will be lost.",ok:"Close",cancel:"Stay"}).afterClosed()}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(_),e.LFG(q.u))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var an=r(2690),ue=r(8293),on=r(5816),he=r(8117),ge=r(1134);const sn=[{path:"",component:tn,data:{permissions:["appearance.update"]},resolve:{defaultSettings:(()=>{class i{constructor(t,n){this.router=t,this.http=n}resolve(t,n){return this.http.get("admin/appearance/values").pipe((0,ue.K)(()=>(this.router.navigate(["/admin"]),he.E)),(0,on.zg)(a=>a?(0,ge.of)(a):(this.router.navigate(["/admin"]),he.E)))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(b.F0),e.LFG(U.r))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()},canActivate:[an.a],canDeactivate:[nn],children:[{path:""},{path:":panel"},{path:":panel/:activeItem"}]}];let rn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[b.Bz.forChild(sn)],b.Bz]}),i})();var B=r(3389);let ln=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,B.p,f.ot,u.Ps]]}),i})();var Q=r(9866),cn=r(8285);let _e=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,Q.N,u.Ps,M.si]]}),i})();var pn=r(6989);let dn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:H,useValue:ve,multi:!0}],imports:[[rn,p.ez,c.u5,c.UX,ln,Q.N,cn.T,B.p,_e,pn.c,$.Tx,ie.Cv,u.Ps,f.ot,x.Is,C.To,Z._t,V.eL,se.rP]]}),i})();r(657),r(1918),r(6145),r(1318),r(1606),r(772);let kn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[p.ez,M.BQ],M.BQ]}),i})();var j=r(5924),Pn=r(639),In=r(3720),wn=r(9902),Sn=r(3134);function qn(i,o){if(1&i&&(e.TgZ(0,"mat-option",18),e._uU(1),e.qZA()),2&i){const t=o.$implicit;e.Q6J("value",t),e.xp6(1),e.Oqu(t.name)}}const Jn=function(i){return["/lists",i,"edit"]};function Un(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",19),e.TgZ(1,"button",20),e._UZ(2,"mat-icon",21),e.qZA(),e.TgZ(3,"div",22),e._uU(4),e.qZA(),e.TgZ(5,"div",23),e.TgZ(6,"a",24),e._UZ(7,"mat-icon",25),e.qZA(),e.TgZ(8,"button",26),e.NdJ("click",function(){const s=e.CHM(t).$implicit;return e.oxw().removeList(s)}),e._UZ(9,"mat-icon",27),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit;e.xp6(4),e.Oqu(t.name),e.xp6(2),e.Q6J("routerLink",e.VKq(2,Jn,t.id))}}const Fn=function(){return["Homepage"]};let $n=(()=>{class i{constructor(t,n,a,s){this.appearance=t,this.settings=n,this.http=a,this.lists=s,this.loading$=new m.X(!1),this.searchControl=new c.NI,this.results$=new m.X([]),this.homepageLists$=new m.X([])}ngOnInit(){this.bindToSearchQueryControl(),this.loadLists()}loadLists(){const t=this.settings.getJson("homepage.lists");!t||!t.length||(this.loading$.next(!0),this.lists.getAll({listIds:t,perPage:40}).pipe((0,S.x)(()=>this.loading$.next(!1))).subscribe(n=>{const a=n.pagination.data.filter(s=>!s.system);this.homepageLists$.next(function(i,o,t){return i&&(i.sort((n,a)=>{const l=a.id;return o.indexOf(n.id)>o.indexOf(l)?1:-1}),i)}(a,t))}))}selectResult(t){const n=t.option.value;this.homepageLists$.value.find(a=>a.id===n.id)||this.commitChanges([...this.homepageLists$.value,n]),this.searchControl.reset()}bindToSearchQueryControl(){this.searchControl.valueChanges.pipe((0,Pn.b)(200),(0,In.x)(),(0,O.h)(t=>"string"==typeof t),(0,wn.w)(t=>this.searchForList(t)),(0,ue.K)(()=>(0,ge.of)([]))).subscribe(t=>{this.results$.next(t)})}searchForList(t){return this.lists.getAll({query:t,excludeSystem:!0}).pipe((0,J.U)(n=>n.pagination.data))}removeList(t){const a=this.homepageLists$.value.filter(s=>s.id!==t.id);this.commitChanges(a)}reorderLists(t){const n=this.homepageLists$.value.slice();(0,Z.bA)(n,t.previousIndex,t.currentIndex),this.commitChanges(n)}commitChanges(t){this.homepageLists$.next(t);const n=t.map(a=>a.id);this.appearance.addChanges({"homepage.lists":n})}displayFn(t){return t?t.name:null}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_),e.Y36(w.Z),e.Y36(U.r),e.Y36(Sn.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["homepage-appearance-panel"]],decls:24,vars:15,consts:[[3,"path","back"],[1,"appearance-panel-content","many-inputs"],[1,"slider-list-container"],[1,"input-container"],["for","slider-list","trans",""],[1,"input-wrapper"],["id","slider-list","placeholder","Find a list...","trans-placeholder","",3,"formControl","matAutocomplete"],["inputEl",""],["type","submit","mat-icon-button","",1,"search-button"],["svgIcon","search"],[1,"search-list-autocomplete",3,"autoActiveFirstOption","displayWith","optionSelected"],["sliderAuto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["trans",""],["mat-raised-button","","color","accent","routerLink","/lists/new","target","_blank","trans",""],[1,"overlay",3,"isVisible"],["cdkDropList","",1,"lists",3,"cdkDropListDropped"],["class","list","cdkDrag","",4,"ngFor","ngForOf"],[3,"value"],["cdkDrag","",1,"list"],["mat-icon-button","","cdkDragHandle",""],["svgIcon","drag-handle"],[1,"name"],[1,"actions"],["mat-icon-button","","target","_blank",3,"routerLink"],["svgIcon","edit"],["mat-icon-button","",3,"click"],["svgIcon","delete"]],template:function(t,n){if(1&t&&(e.TgZ(0,"appearance-panel-meta",0),e.NdJ("back",function(){return n.appearance.closeActivePanel()}),e.qZA(),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"label",4),e._uU(5,"Manage Lists"),e.qZA(),e.TgZ(6,"div",5),e._UZ(7,"input",6,7),e.TgZ(9,"button",8),e._UZ(10,"mat-icon",9),e.qZA(),e.qZA(),e.qZA(),e.TgZ(11,"mat-autocomplete",10,11),e.NdJ("optionSelected",function(s){return n.selectResult(s)}),e.YNc(13,qn,2,2,"mat-option",12),e.ALo(14,"async"),e.qZA(),e.qZA(),e.TgZ(15,"p",13),e._uU(16,"First list will be used as a slider, rest will be displayed as homepage content."),e.qZA(),e.TgZ(17,"a",14),e._uU(18,"New List"),e.qZA(),e._UZ(19,"loading-indicator",15),e.ALo(20,"async"),e.TgZ(21,"div",16),e.NdJ("cdkDropListDropped",function(s){return n.reorderLists(s)}),e.YNc(22,Un,10,4,"div",17),e.ALo(23,"async"),e.qZA(),e.qZA()),2&t){const a=e.MAs(12);e.Q6J("path",e.DdM(14,Fn)),e.xp6(7),e.Q6J("formControl",n.searchControl)("matAutocomplete",a),e.xp6(4),e.Q6J("autoActiveFirstOption",!0)("displayWith",n.displayFn),e.xp6(2),e.Q6J("ngForOf",e.lcZ(14,8,n.results$)),e.xp6(6),e.Q6J("isVisible",e.lcZ(20,10,n.loading$)),e.xp6(3),e.Q6J("ngForOf",e.lcZ(23,12,n.homepageLists$))}},directives:[I,h.P,c.Fj,j.ZL,c.JJ,c.oH,f.lW,u.Hw,j.XC,p.sg,f.zs,b.yS,L.Q,Z.Wj,M.ey,Z.Zt,Z.Bh],pipes:[p.Ov],styles:["homepage-appearance-panel{display:block}homepage-appearance-panel .input-wrapper{position:relative}homepage-appearance-panel .input-wrapper .search-button{position:absolute;top:5px;right:5px}homepage-appearance-panel .lists{margin:15px 0}homepage-appearance-panel .lists .list{display:flex;align-items:center;padding:10px;border:1px solid var(--be-divider-default);border-radius:4px;background-color:var(--be-background);margin-bottom:10px}homepage-appearance-panel .lists .list .actions{margin-left:auto;color:var(--be-secondary-text)}homepage-appearance-panel .lists .list .name{text-transform:capitalize;margin-right:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1 1 auto}homepage-appearance-panel .cdk-drag-placeholder{opacity:0}homepage-appearance-panel .cdk-drag-animating{transition:transform .25s cubic-bezier(0,0,.2,1)}homepage-appearance-panel .lists.cdk-drop-list-dragging .list:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}\n"],encapsulation:2,changeDetection:0}),i})();var Nn=r(2965),En=r(3297);function Ln(i,o){if(1&i&&(e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e._uU(3),e.ALo(4,"trans"),e.qZA(),e.qZA(),e.TgZ(5,"div",11),e.TgZ(6,"label",12),e._uU(7,"Title"),e.qZA(),e._UZ(8,"input",13),e.qZA(),e.TgZ(9,"div",11),e.TgZ(10,"label",12),e._uU(11,"Subtitle"),e.qZA(),e._UZ(12,"input",14),e.qZA(),e.TgZ(13,"appearance-image-input",15),e._uU(14," Image "),e.qZA(),e.qZA()),2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.Q6J("formGroup",t),e.xp6(3),e.AsE("",e.lcZ(4,13,"Feature")," #",n+1,""),e.xp6(3),e.Q6J("for","primary."+n+".title"),e.xp6(2),e.MGl("highlightInPreview",".inline-feature:nth-child(",n+1,") h3"),e.Q6J("id","primary."+n+".title")("placeholder",a.defaultValue("primaryFeatures."+n+".title")),e.xp6(2),e.Q6J("for","primary."+n+".subtitle"),e.xp6(2),e.MGl("highlightInPreview",".inline-feature:nth-child(",n+1,") p"),e.Q6J("id","primary."+n+".subtitle")("placeholder",a.defaultValue("primaryFeatures."+n+".subtitle")),e.xp6(1),e.MGl("highlightInPreview",".inline-feature:nth-child(",n+1,") img"),e.Q6J("defaultValue",a.defaultValue("primaryFeatures."+n+".image"))}}function Qn(i,o){if(1&i&&(e.ynx(0),e.YNc(1,Ln,15,15,"div",7),e.BQk()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.primaryArray().controls)}}function Dn(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",8),e.TgZ(1,"div",9),e.TgZ(2,"div",10),e._uU(3),e.ALo(4,"trans"),e.qZA(),e.TgZ(5,"button",17),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw(3).removeFeature("secondary",s)}),e._UZ(6,"mat-icon",18),e.qZA(),e.qZA(),e.TgZ(7,"div",11),e.TgZ(8,"label",12),e._uU(9,"Title"),e.qZA(),e._UZ(10,"input",13),e.qZA(),e.TgZ(11,"div",11),e.TgZ(12,"label",12),e._uU(13,"Subtitle"),e.qZA(),e._UZ(14,"input",14),e.qZA(),e.TgZ(15,"div",11),e.TgZ(16,"label",12),e._uU(17,"Description"),e.qZA(),e._UZ(18,"textarea",19),e.qZA(),e.TgZ(19,"appearance-image-input",20),e._uU(20,"Image "),e.qZA(),e.qZA()}if(2&i){const t=o.$implicit,n=o.index,a=e.oxw(3);e.Q6J("formGroup",t),e.xp6(3),e.AsE("",e.lcZ(4,17,"Feature")," #",n+1,""),e.xp6(5),e.Q6J("for","secondary."+n+".title"),e.xp6(2),e.MGl("highlightInPreview",".big-feature:nth-child(",n+1,") h2"),e.Q6J("id","secondary."+n+".title")("placeholder",a.defaultValue("secondaryFeatures."+n+".title")),e.xp6(2),e.Q6J("for","secondary."+n+".subtitle"),e.xp6(2),e.MGl("highlightInPreview",".big-feature:nth-child(",n+1,") small"),e.Q6J("id","secondary."+n+".subtitle")("placeholder",a.defaultValue("secondaryFeatures."+n+".subtitle")),e.xp6(2),e.Q6J("for","secondary."+n+".description"),e.xp6(2),e.MGl("highlightInPreview",".big-feature:nth-child(",n+1,") p"),e.Q6J("id","secondary."+n+".description")("placeholder",a.defaultValue("secondaryFeatures."+n+".description")),e.xp6(1),e.MGl("highlightInPreview",".big-feature:nth-child(",n+1,") img"),e.Q6J("defaultValue",a.defaultValue("secondaryFeatures."+n+".image"))}}function Yn(i,o){if(1&i){const t=e.EpF();e.ynx(0),e.YNc(1,Dn,21,19,"div",7),e.TgZ(2,"button",16),e.NdJ("click",function(){return e.CHM(t),e.oxw(2).addFeature("secondary")}),e._uU(3,"Add"),e.qZA(),e.BQk()}if(2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.secondaryArray().controls)}}function Vn(i,o){if(1&i&&(e.TgZ(0,"div",21),e.TgZ(1,"div",11),e.TgZ(2,"label",22),e._uU(3,"Call to Action #1"),e.qZA(),e._UZ(4,"input",23),e.qZA(),e.qZA()),2&i){const t=e.oxw(2);e.Q6J("formGroup",t.form.get("actions")),e.xp6(4),e.Q6J("placeholder",t.defaultValue("actions.cta1"))}}function Hn(i,o){if(1&i&&(e.ynx(0),e.TgZ(1,"div",4),e.YNc(2,Qn,2,1,"ng-container",5),e.YNc(3,Yn,4,1,"ng-container",5),e.YNc(4,Vn,5,2,"div",6),e.qZA(),e.BQk()),2&i){const t=o.ngIf;e.xp6(1),e.Q6J("ngSwitch",t),e.xp6(1),e.Q6J("ngSwitchCase","primaryFeatures"),e.xp6(1),e.Q6J("ngSwitchCase","secondaryFeatures"),e.xp6(1),e.Q6J("ngSwitchCase","actions")}}function zn(i,o){if(1&i){const t=e.EpF();e.TgZ(0,"div",21),e.TgZ(1,"div",11),e.TgZ(2,"label",24),e._uU(3,"Header Title"),e.qZA(),e._UZ(4,"input",25),e.qZA(),e.TgZ(5,"div",11),e.TgZ(6,"label",26),e._uU(7,"Header Subtitle"),e.qZA(),e._UZ(8,"textarea",27),e.qZA(),e.TgZ(9,"appearance-image-input",28),e._uU(10,"Header Image "),e.qZA(),e.TgZ(11,"color-picker-input",29),e._uU(12,"Header Overlay Color"),e.qZA(),e._UZ(13,"div",30),e.TgZ(14,"ul"),e.TgZ(15,"li",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().openSubpanel("actions")}),e.TgZ(16,"span",32),e._uU(17,"Action Buttons"),e.qZA(),e._UZ(18,"mat-icon",33),e.qZA(),e.TgZ(19,"li",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().openSubpanel("primaryFeatures")}),e.TgZ(20,"span",32),e._uU(21,"Primary Features"),e.qZA(),e._UZ(22,"mat-icon",33),e.qZA(),e.TgZ(23,"li",31),e.NdJ("click",function(){return e.CHM(t),e.oxw().openSubpanel("secondaryFeatures")}),e.TgZ(24,"span",32),e._uU(25,"Secondary Features"),e.qZA(),e._UZ(26,"mat-icon",33),e.qZA(),e.qZA(),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("placeholder",t.defaultValue("headerTitle")),e.xp6(4),e.Q6J("placeholder",t.defaultValue("headerSubtitle")),e.xp6(1),e.Q6J("defaultValue",t.defaultValue("headerImage"))}}const D="landing.appearance",Rn={defaultRoute:"/",navigationRoutes:["/","movies","series","account/settings","admin"],menus:{availableRoutes:["movies","series","news","people"],positions:["primary","admin-navbar","custom-page-navbar","landing","footer-1","footer-2","footer-3"]},sections:[{name:"Homepage",position:1,route:"/",component:$n},{name:"Landing",position:1,route:"/",queryParams:{landing:!0},component:(()=>{class i{constructor(t,n,a){this.fb=t,this.editor=n,this.settings=a,this.selectedSubpanel$=new m.X(null),this.path$=this.selectedSubpanel$.pipe((0,J.U)(s=>{const l=["Homepage"];return s&&l.push(s),l})),this.form=this.fb.group({headerTitle:[""],headerSubtitle:[""],headerImage:[""],headerOverlayColor:[""],actions:this.fb.group({cta1:[""]}),primaryFeatures:this.fb.array([]),secondaryFeatures:this.fb.array([])})}ngOnInit(){const t=this.settings.getJson(D);this.defaultValues=JSON.parse(this.editor.defaultSettings[D]),t.primaryFeatures.forEach(()=>{this.addFeature("primary")}),t.secondaryFeatures.forEach(()=>{this.addFeature("secondary")}),this.form.patchValue(t),this.form.valueChanges.subscribe(n=>{this.editor.setConfig(D,n),this.editor.addChanges({[D]:n})})}openPreviousPanel(){this.selectedSubpanel$.value?this.openSubpanel(null):this.editor.closeActivePanel()}openSubpanel(t){this.selectedSubpanel$.next(t)}addFeature(t){const n=this.form.get(`${t}Features`),a={title:[""],subtitle:[""],image:[""]};"secondary"===t&&(a.description=[""]),n.push(this.fb.group(a))}removeFeature(t,n){this.form.get(`${t}Features`).removeAt(n)}defaultValue(t){return Nn.pick(t,this.defaultValues)||""}primaryArray(){return this.form.get("primaryFeatures")}secondaryArray(){return this.form.get("secondaryFeatures")}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.qu),e.Y36(_),e.Y36(w.Z))},i.\u0275cmp=e.Xpm({type:i,selectors:[["landing-appearance-panel"]],decls:7,vars:7,consts:[[3,"path","back"],[1,"appearance-panel-content"],[4,"ngIf","ngIfElse"],["mainPanel",""],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","many-inputs",3,"formGroup",4,"ngSwitchCase"],["class","many-inputs feature-group",3,"formGroup",4,"ngFor","ngForOf"],[1,"many-inputs","feature-group",3,"formGroup"],[1,"feature-group-header"],[1,"text"],[1,"input-container"],["trans","",3,"for"],["type","text","formControlName","title","required","",3,"id","placeholder","highlightInPreview"],["type","text","formControlName","subtitle","required","",3,"id","placeholder","highlightInPreview"],["formControlName","image","diskPrefix","homepage","trans","",3,"defaultValue","highlightInPreview"],["mat-flat-button","","color","accent","trans","",3,"click"],["mat-icon-button","","color","warn",3,"click"],["svgIcon","close"],["type","text","formControlName","description","rows","4","required","",3,"id","placeholder","highlightInPreview"],["diskPrefix","homepage","formControlName","image","trans","",3,"defaultValue","highlightInPreview"],[1,"many-inputs",3,"formGroup"],["for","home.actions.cta1","trans",""],["type","text","id","home.actions.cta1","formControlName","cta1","highlightInPreview",".get-started-button","required","",3,"placeholder"],["for","home.header.title","trans",""],["type","text","id","home.header.title","formControlName","headerTitle","highlightInPreview",".header-title","required","",3,"placeholder"],["for","home.header.subtitle","trans",""],["type","text","id","home.header.subtitle","formControlName","headerSubtitle","rows","4","highlightInPreview",".header-description","required","",3,"placeholder"],["highlightInPreview",".hero","diskPrefix","homepage","formControlName","headerImage","trans","",3,"defaultValue"],["formControlName","headerOverlayColor","trans",""],[1,"separator"],[1,"nav-item",3,"click"],["trans","",1,"text"],["svgIcon","keyboard-arrow-right",1,"actions"]],template:function(t,n){if(1&t&&(e.TgZ(0,"appearance-panel-meta",0),e.NdJ("back",function(){return n.openPreviousPanel()}),e.ALo(1,"async"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,Hn,5,4,"ng-container",2),e.ALo(4,"async"),e.YNc(5,zn,27,4,"ng-template",null,3,e.W1O),e.qZA()),2&t){const a=e.MAs(6);e.Q6J("path",e.lcZ(1,3,n.path$)),e.xp6(3),e.Q6J("ngIf",e.lcZ(4,5,n.selectedSubpanel$))("ngIfElse",a)}},directives:[I,p.O5,p.RF,p.n9,p.sg,c.JL,c.sg,h.P,c.Fj,c.JJ,c.u,c.Q7,oe,ae,f.lW,u.Hw,re],pipes:[p.Ov,En.R],styles:[".separator[_ngcontent-%COMP%]{height:1px;width:100%;background-color:var(--be-divider-default);margin:20px 0}.feature-group[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default);padding-bottom:5px;margin-bottom:15px}.feature-group-header[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.5rem;border-bottom:1px solid var(--be-divider-default);padding-bottom:10px;margin-bottom:10px}.feature-group-header[_ngcontent-%COMP%]   .mat-icon-button[_ngcontent-%COMP%]{margin-left:auto}"],changeDetection:0}),i})()}]};let Gn=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[{provide:H,useValue:Rn,multi:!0}],imports:[[p.ez,dn,c.UX,_e,Q.N,b.Bz,B.p,u.Ps,f.ot,Q.N,kn,j.Bb,Z._t]]}),i})()}}]);
//# sourceMappingURL=662.b718139d0c0f19999d87.js.map