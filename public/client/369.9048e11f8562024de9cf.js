"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[369,70],{223:et=>{et.exports=function k(o,e){if(o===e)return!0;if(o&&e&&"object"==typeof o&&"object"==typeof e){if(o.constructor!==e.constructor)return!1;var P,C,d;if(Array.isArray(o)){if((P=o.length)!=e.length)return!1;for(C=P;0!=C--;)if(!k(o[C],e[C]))return!1;return!0}if(o.constructor===RegExp)return o.source===e.source&&o.flags===e.flags;if(o.valueOf!==Object.prototype.valueOf)return o.valueOf()===e.valueOf();if(o.toString!==Object.prototype.toString)return o.toString()===e.toString();if((P=(d=Object.keys(o)).length)!==Object.keys(e).length)return!1;for(C=P;0!=C--;)if(!Object.prototype.hasOwnProperty.call(e,d[C]))return!1;for(C=P;0!=C--;){var v=d[C];if(!k(o[v],e[v]))return!1}return!0}return o!=o&&e!=e}},7543:(et,k,o)=>{o.d(k,{Q:()=>dt});var e=o(3004),P=o(1405),C=o(6142),d=o(707),v=o(3644),f=o(5418),O=o(3289),t=o(253),x=o(8697);const g=[new v.XQ({type:v.Bq.Select,key:"body",label:"Type",description:"Type of the review",defaultValue:{operator:v.pg.ne,value:null},options:[{key:"Review",value:{operator:v.pg.ne,value:null}},{key:"Rating",value:{operator:v.pg.eq,value:null}}]}),new f.yH({description:"Date video was last updated"}),new f.T7({description:"Date video was created"}),new v.XQ({type:v.Bq.SelectModel,key:"user_id",label:"User",description:"User review was created by",component:O.J,componentData:{modelType:x.L}}),new v.XQ({type:v.Bq.SelectModel,key:"reviewable_id",label:"Title",description:"Title review is for",component:O.J,componentData:{modelType:t.o.TITLE}})];var a=o(2316),Q=o(5381),i=o(4688),Y=o(6034),M=o(5718),I=o(8842),q=o(5515),F=o(3054),ot=o(4364),E=o(9895),X=o(1303),L=o(2141),H=o(781),it=o(2529),tt=o(365),st=o(6050),ct=o(1176),ut=o(6798),gt=o(298),J=o(6403),z=o(8256),m=o(3297);function h(V,at){if(1&V){const $=a.EpF();a.TgZ(0,"button",18),a.NdJ("click",function(){return a.CHM($),a.oxw().openCrupdateReviewModal()}),a._UZ(1,"mat-icon",19),a.TgZ(2,"span",1),a._uU(3,"Add New Review"),a.qZA(),a.qZA()}}function N(V,at){1&V&&a._UZ(0,"mat-progress-bar",20)}function D(V,at){if(1&V){const $=a.EpF();a.TgZ(0,"button",25),a.NdJ("click",function(){return a.CHM($),a.oxw(2).maybeDeleteSelectedReviews()}),a._uU(1," Delete "),a.qZA()}}const T=function(V){return{count:V,resource:"review(s)"}};function R(V,at){if(1&V&&(a.TgZ(0,"tr"),a.TgZ(1,"th",21),a.TgZ(2,"div",22),a._uU(3," :count :resource selected: "),a.qZA(),a.TgZ(4,"div",23),a.YNc(5,D,2,0,"button",24),a.qZA(),a.qZA(),a.qZA()),2&V){const $=at.ngIf,W=a.oxw();a.xp6(2),a.Q6J("transValues",a.VKq(2,T,$)),a.xp6(3),a.Q6J("ngIf",W.currentUser.hasPermission("reviews.delete"))}}function b(V,at){if(1&V&&(a.TgZ(0,"a",38),a._UZ(1,"img",39),a.TgZ(2,"span"),a._uU(3),a.qZA(),a.qZA()),2&V){const $=a.oxw().$implicit,W=a.oxw();a.Q6J("routerLink",W.url.generate($.reviewable)),a.xp6(1),a.Q6J("src",$.reviewable.poster,a.LSH),a.xp6(2),a.Oqu($.reviewable.name)}}function S(V,at){if(1&V){const $=a.EpF();a.TgZ(0,"button",40),a.NdJ("click",function(){a.CHM($);const lt=a.oxw().$implicit;return a.oxw().openCrupdateReviewModal(lt)}),a.ALo(1,"trans"),a._UZ(2,"mat-icon",41),a.qZA()}2&V&&a.Q6J("matTooltip",a.lcZ(1,1,"Edit review"))}function nt(V,at){if(1&V&&(a.TgZ(0,"tr"),a._UZ(1,"td",26),a.TgZ(2,"td",27),a._UZ(3,"mat-icon",28),a.TgZ(4,"span"),a._uU(5),a.qZA(),a.qZA(),a.TgZ(6,"td",29),a._UZ(7,"user-column",30),a.qZA(),a.TgZ(8,"td",31),a.TgZ(9,"div",32),a.YNc(10,b,4,3,"a",33),a.qZA(),a.qZA(),a.TgZ(11,"td",34),a._uU(12),a.qZA(),a.TgZ(13,"td",35),a._uU(14),a.ALo(15,"formattedDate"),a.qZA(),a.TgZ(16,"td",36),a.YNc(17,S,3,3,"button",37),a.qZA(),a.qZA()),2&V){const $=at.$implicit,W=a.oxw();a.xp6(1),a.Q6J("table-body-checkbox",$.id),a.xp6(4),a.hij("",$.score,"/10"),a.xp6(2),a.Q6J("user",$.user),a.xp6(3),a.Q6J("ngIf",$.reviewable),a.xp6(2),a.Oqu($.body?"Review":"Rating"),a.xp6(2),a.Oqu(a.lcZ(15,7,$.updated_at)),a.xp6(3),a.Q6J("ngIf",W.currentUser.hasPermission("reviews.update"))}}function rt(V,at){1&V&&(a.TgZ(0,"no-results-message",42),a.TgZ(1,"span",43),a._uU(2,"No reviews have been created yet"),a.qZA(),a.qZA())}let dt=(()=>{class V{constructor($,W,lt,vt,bt,U,j){this.datatable=$,this.reviews=W,this.modal=lt,this.currentUser=vt,this.settings=bt,this.toast=U,this.url=j,this.filters=g,this.reviews$=this.datatable.data$}ngOnInit(){this.datatable.paginator.dontUpdateQueryParams=!!this.title;const $={uri:e.F.BASE_URI,staticParams:{with:["user","reviewable"]}};this.title&&($.staticParams={titleId:this.title.id}),this.datatable.init($)}openCrupdateReviewModal($){var W,lt;this.datatable.openCrupdateResourceModal(P.Q,{review:$,mediaId:null===(W=this.title)||void 0===W?void 0:W.id,mediaType:null===(lt=this.title)||void 0===lt?void 0:lt.model_type}).subscribe()}maybeDeleteSelectedReviews(){this.datatable.confirmResourceDeletion("reviews").subscribe(()=>{this.reviews.delete(this.datatable.selectedRows$.value).subscribe(()=>{this.toast.open(d.X.REVIEW_DELETE_SUCCESS),this.datatable.reset()})})}}return V.\u0275fac=function($){return new($||V)(a.Y36(C.x),a.Y36(e.F),a.Y36(Q.u),a.Y36(i.I),a.Y36(Y.Z),a.Y36(M.F),a.Y36(I.o))},V.\u0275cmp=a.Xpm({type:V,selectors:[["reviews-index"]],inputs:{title:"title"},features:[a._Bn([C.x])],decls:32,vars:12,consts:[[1,"datatable-page-header"],["trans",""],[1,"header"],["pluralName","reviews",3,"filters"],[1,"action-buttons"],["mat-raised-button","","color","accent","class","button-with-icon",3,"click",4,"ngIf"],[1,"datatable","responsive-table"],["class","loading-bar","mode","indeterminate","color","accent",4,"ngIf"],[1,"material-table"],["table-header-checkbox",""],["table-sort-header","","trans",""],["table-sort-header","user_id","trans",""],["table-sort-header","media_item_id","trans",""],["table-sort-header","body","trans",""],["table-sort-header","updated_at","trans",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["svgImage","like-dislike.svg",4,"ngIf"],["mat-raised-button","","color","accent",1,"button-with-icon",3,"click"],["svgIcon","add"],["mode","indeterminate","color","accent",1,"loading-bar"],["colspan","7"],["trans","",1,"bulk-actions-title",3,"transValues"],[1,"bulk-actions"],["mat-raised-button","","color","warn","trans","",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","trans","",3,"click"],[3,"table-body-checkbox"],["data-label","Score"],["svgIcon","star-border",1,"star-icon"],["data-label","User"],[3,"user"],["data-label","Reviewable"],[1,"column-with-image"],["class","link","target","_blank",3,"routerLink",4,"ngIf"],["data-label","Type"],["data-label","Last Updated"],[1,"edit-column"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["target","_blank",1,"link",3,"routerLink"],["alt","reviewable image",3,"src"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","edit"],["svgImage","like-dislike.svg"],["primary-text","","trans",""]],template:function($,W){1&$&&(a.TgZ(0,"div",0),a.TgZ(1,"h1",1),a._uU(2,"Reviews"),a.qZA(),a.TgZ(3,"div",2),a._UZ(4,"datatable-filters",3),a.TgZ(5,"div",4),a.YNc(6,h,4,0,"button",5),a.qZA(),a.qZA(),a.qZA(),a.TgZ(7,"div",6),a.YNc(8,N,1,0,"mat-progress-bar",7),a.ALo(9,"async"),a.TgZ(10,"table",8),a.TgZ(11,"thead"),a.TgZ(12,"tr"),a._UZ(13,"th",9),a.TgZ(14,"th",10),a._uU(15,"Score"),a.qZA(),a.TgZ(16,"th",11),a._uU(17,"Owner"),a.qZA(),a.TgZ(18,"th",12),a._uU(19,"Reviewable"),a.qZA(),a.TgZ(20,"th",13),a._uU(21,"Type"),a.qZA(),a.TgZ(22,"th",14),a._uU(23,"Last Updated"),a.qZA(),a._UZ(24,"th"),a.qZA(),a.YNc(25,R,6,4,"tr",15),a.qZA(),a.TgZ(26,"tbody"),a.YNc(27,nt,18,9,"tr",16),a.ALo(28,"async"),a.qZA(),a.qZA(),a.YNc(29,rt,3,0,"no-results-message",17),a.ALo(30,"async"),a._UZ(31,"datatable-footer"),a.qZA()),2&$&&(a.xp6(4),a.Q6J("filters",W.filters),a.xp6(2),a.Q6J("ngIf",W.currentUser.hasPermission("reviews.create")),a.xp6(2),a.Q6J("ngIf",a.lcZ(9,6,W.datatable.paginator&&W.datatable.paginator.loading$)),a.xp6(17),a.Q6J("ngIf",W.datatable.selectedRows$.value.length),a.xp6(2),a.Q6J("ngForOf",a.lcZ(28,8,W.reviews$)),a.xp6(2),a.Q6J("ngIf",a.lcZ(30,10,W.datatable.paginator.noResults$)))},directives:[q.P,F.h,ot.O5,E.e,X.p,ot.sg,L.V,H.lW,it.Hw,tt.pW,st.O,ct.r,ut.yS,gt.gM,J.U],pipes:[ot.Ov,z.l,m.R],styles:[".star-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}"],changeDetection:0}),V})()},3832:(et,k,o)=>{o.d(k,{r:()=>bt});var e=o(4727),P=o(7802),C=o(1435),d=o(6491),v=o(1769),f=o(6142),O=o(3644),t=o(5418),x=o(3289),g=o(253),a=o(8697);const Q=[new O.XQ({type:O.Bq.Select,key:"type",label:"Type",description:"Type of the video",defaultValue:"embed",options:[{key:"All",value:{value:null,operator:O.pg.ne}},{key:"Embed",value:"embed"},{key:"Direct Video",value:"video"},{key:"Frame",value:"frame"},{key:"Remote Link",value:"remote"}]}),new O.XQ({type:O.Bq.Select,key:"approved",label:"Status",description:"Whether video is approved or not",defaultValue:!1,options:[{key:"Approved",value:!0},{key:"Not Approved",value:!1}]}),new O.XQ({type:O.Bq.Select,key:"source",label:"Source",description:"Whether video source is local or external",defaultValue:"local",options:[{key:"All",value:{value:null,operator:O.pg.ne}},{key:"Local",value:"local"},{key:"External",value:"external"}]}),new O.XQ({type:O.Bq.Select,key:"category",label:"Category",description:"Category video is attched to",defaultValue:"trailer",options:[{key:"All",value:{value:null,operator:O.pg.ne}},{key:"Trailer",value:"trailer"},{key:"Full Movie or episode",value:"full"},{key:"Clip",value:"clip"},{key:"Teaser",value:"teaser"},{key:"Featurette",value:"featurette"}]}),new O.XQ({type:O.Bq.Select,key:"quality",description:"Quality of the video",defaultValue:"hd",options:[{key:"SD",value:"sd"},{key:"HD",value:"hd"},{key:"4k",value:"4k"},{key:"HDR",value:"hdr"}]}),new t.yH({description:"Date video was last updated"}),new t.T7({description:"Date video was created"}),new O.XQ({type:O.Bq.SelectModel,key:"user_id",label:"User",description:"User video was created by",component:x.J,componentData:{modelType:a.L}}),new O.XQ({type:O.Bq.SelectModel,key:"title_id",label:"Title",description:"Title video is attached to",component:x.J,componentData:{modelType:g.o.TITLE}})];var i=o(2316),Y=o(5381),M=o(4688),I=o(6034),q=o(5718),F=o(5515),ot=o(3054),E=o(4364),X=o(9895),L=o(1303),H=o(2141),it=o(781),tt=o(2529),st=o(365),ct=o(6050),ut=o(6798),gt=o(298),J=o(6403),z=o(3297);function m(U,j){if(1&U){const A=i.EpF();i.TgZ(0,"button",19),i.NdJ("click",function(){return i.CHM(A),i.oxw().openCrupdateVideoModal()}),i._UZ(1,"mat-icon",20),i.TgZ(2,"span",1),i._uU(3,"Add New Video"),i.qZA(),i.qZA()}}function h(U,j){1&U&&i._UZ(0,"mat-progress-bar",21)}function N(U,j){1&U&&(i.TgZ(0,"th",22),i._uU(1,"Title"),i.qZA())}function D(U,j){if(1&U){const A=i.EpF();i.TgZ(0,"button",27),i.NdJ("click",function(){return i.CHM(A),i.oxw(2).maybeDeleteSelectedVideos()}),i._uU(1," Delete "),i.qZA()}}const T=function(U){return{count:U,resource:"video(s)"}};function R(U,j){if(1&U&&(i.TgZ(0,"tr"),i.TgZ(1,"th",23),i.TgZ(2,"div",24),i._uU(3," :count :resource selected: "),i.qZA(),i.TgZ(4,"div",25),i.YNc(5,D,2,0,"button",26),i.qZA(),i.qZA(),i.qZA()),2&U){const A=j.ngIf,B=i.oxw();i.xp6(2),i.Q6J("transValues",i.VKq(2,T,A)),i.xp6(3),i.Q6J("ngIf",B.currentUser.hasPermission("videos.delete"))}}const b=function(U){return["/admin/titles",U,"edit"]},S=function(){return{active:"videos"}};function nt(U,j){if(1&U&&(i.TgZ(0,"a",54),i._uU(1),i.qZA()),2&U){const A=i.oxw(2).$implicit;i.Q6J("routerLink",i.VKq(3,b,A.title.id))("queryParams",i.DdM(5,S)),i.xp6(1),i.Oqu(A.title.name)}}function rt(U,j){if(1&U&&(i.TgZ(0,"td",52),i.YNc(1,nt,2,6,"a",53),i.qZA()),2&U){const A=i.oxw().$implicit;i.xp6(1),i.Q6J("ngIf",A.title)}}function dt(U,j){1&U&&i._UZ(0,"mat-icon",55)}function V(U,j){1&U&&i._UZ(0,"mat-icon",56)}function at(U,j){1&U&&(i.TgZ(0,"div"),i._uU(1,"-"),i.qZA())}function $(U,j){if(1&U&&(i.TgZ(0,"div",57),i._uU(1),i.qZA()),2&U){const A=i.oxw().$implicit;i.xp6(1),i.Oqu(A.quality)}}function W(U,j){if(1&U){const A=i.EpF();i.TgZ(0,"button",58),i.NdJ("click",function(){i.CHM(A);const pt=i.oxw().$implicit;return i.oxw().openCrupdateVideoModal(pt)}),i.ALo(1,"trans"),i._UZ(2,"mat-icon",59),i.qZA()}2&U&&i.Q6J("matTooltip",i.lcZ(1,1,"Edit video"))}function lt(U,j){if(1&U){const A=i.EpF();i.TgZ(0,"tr"),i._UZ(1,"td",28),i.TgZ(2,"td"),i.TgZ(3,"div",29),i._UZ(4,"img",30),i.TgZ(5,"a",31),i._uU(6),i.qZA(),i.qZA(),i.qZA(),i.YNc(7,rt,2,1,"td",32),i.TgZ(8,"td",33),i._uU(9),i.qZA(),i.TgZ(10,"td",34),i._uU(11),i.qZA(),i.TgZ(12,"td",35),i.TgZ(13,"button",36),i.NdJ("click",function(){const mt=i.CHM(A).$implicit;return i.oxw().toggleApprovedState(mt)}),i.ALo(14,"async"),i._UZ(15,"mat-icon",37),i._UZ(16,"mat-icon",38),i.qZA(),i.qZA(),i.TgZ(17,"td",39),i._uU(18),i.qZA(),i.TgZ(19,"td",40),i.TgZ(20,"div",41),i.YNc(21,dt,1,0,"mat-icon",42),i.YNc(22,V,1,0,"mat-icon",43),i.YNc(23,at,2,0,"div",44),i.YNc(24,$,2,1,"div",45),i.qZA(),i.qZA(),i.TgZ(25,"td",46),i._uU(26),i.qZA(),i.TgZ(27,"td",47),i._uU(28),i.qZA(),i.TgZ(29,"td",48),i._uU(30),i.qZA(),i.TgZ(31,"td",49),i._uU(32),i.qZA(),i.TgZ(33,"td",50),i.YNc(34,W,3,3,"button",51),i.qZA(),i.qZA()}if(2&U){const A=j.$implicit,B=i.oxw();i.xp6(1),i.Q6J("table-body-checkbox",A.id),i.xp6(3),i.Q6J("src",A.thumbnail||(null==A.title?null:A.title.backdrop),i.LSH)("title",A.name),i.xp6(1),i.Q6J("href",A.url,i.LSH),i.xp6(1),i.Oqu(A.name),i.xp6(1),i.Q6J("ngIf",!B.title),i.xp6(2),i.Oqu(A.type),i.xp6(2),i.Oqu(A.category),i.xp6(2),i.ekj("disapproved",!A.approved)("approved",A.approved),i.Q6J("disabled",i.lcZ(14,23,B.modifying$)),i.xp6(5),i.Oqu(A.plays_count),i.xp6(2),i.Q6J("ngSwitch",A.quality),i.xp6(1),i.Q6J("ngSwitchCase","hd"),i.xp6(1),i.Q6J("ngSwitchCase","4k"),i.xp6(1),i.Q6J("ngSwitchCase","regular"),i.xp6(3),i.Oqu(A.score?A.score+"%":"-"),i.xp6(2),i.Oqu(A.reports_count?A.reports_count:"-"),i.xp6(2),i.Oqu(A.season_num||"-"),i.xp6(2),i.Oqu(A.episode_num||"-"),i.xp6(2),i.Q6J("ngIf",B.currentUser.hasPermission("videos.update"))}}function vt(U,j){1&U&&(i.TgZ(0,"no-results-message",60),i.TgZ(1,"span",61),i._uU(2,"No videos have been created yet"),i.qZA(),i.qZA())}let bt=(()=>{class U{constructor(A,B,pt,mt,Ct,Pt){this.datatable=A,this.videos=B,this.modal=pt,this.currentUser=mt,this.settings=Ct,this.toast=Pt,this.filters=Q,this.videos$=this.datatable.data$,this.modifying$=new d.X(!1)}ngOnInit(){this.datatable.paginator.dontUpdateQueryParams=!!this.title;const A={uri:e.k.BASE_URI,staticParams:{}};this.title&&(A.staticParams={titleId:this.title.id}),this.datatable=this.datatable.init(A)}maybeDeleteSelectedVideos(){this.datatable.confirmResourceDeletion("videos").subscribe(()=>{this.videos.delete(this.datatable.selectedRows$.value).subscribe(()=>{this.datatable.reset()})})}openCrupdateVideoModal(A){this.datatable.openCrupdateResourceModal(P.H,{video:A,title:A?A.title:this.title}).subscribe()}toggleApprovedState(A){this.modifying$.next(!0);const B=A.approved?this.videos.disapprove(A.id):this.videos.approve(A.id);A.approved=!A.approved,B.pipe((0,C.x)(()=>this.modifying$.next(!1))).subscribe(()=>{},()=>{this.toast.open(v.v.Default),A.approved=!A.approved})}}return U.\u0275fac=function(A){return new(A||U)(i.Y36(f.x),i.Y36(e.k),i.Y36(Y.u),i.Y36(M.I),i.Y36(I.Z),i.Y36(q.F))},U.\u0275cmp=i.Xpm({type:U,selectors:[["video-index"]],inputs:{title:"title"},features:[i._Bn([f.x])],decls:43,vars:13,consts:[[1,"datatable-page-header"],["trans",""],[1,"header"],["pluralName","videos",3,"filters"],[1,"action-buttons"],["mat-raised-button","","color","accent","class","button-with-icon",3,"click",4,"ngIf"],[1,"datatable","responsive-table"],["class","loading-bar","mode","indeterminate","color","accent",4,"ngIf"],[1,"material-table"],["table-header-checkbox",""],["table-sort-header","","trans",""],["table-sort-header","title_id","trans","",4,"ngIf"],["table-sort-header","plays_count","trans",""],["table-sort-header","reports_count","trans",""],["table-sort-header","season_num","trans",""],["table-sort-header","episode_num","trans",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["svgImage","video-files.svg",4,"ngIf"],["mat-raised-button","","color","accent",1,"button-with-icon",3,"click"],["svgIcon","add"],["mode","indeterminate","color","accent",1,"loading-bar"],["table-sort-header","title_id","trans",""],["colspan","12"],["trans","",1,"bulk-actions-title",3,"transValues"],[1,"bulk-actions"],["mat-raised-button","","color","warn","trans","",3,"click",4,"ngIf"],["mat-raised-button","","color","warn","trans","",3,"click"],[3,"table-body-checkbox"],[1,"column-with-image"],["alt","",3,"src","title"],["target","_blank",1,"video-name","link",3,"href"],["data-label","Title",4,"ngIf"],["data-label","Type",1,"capitalize"],["data-label","Category",1,"capitalize"],["data-label","Approved"],["mat-icon-button","",1,"approve-button",3,"disabled","click"],["svgIcon","check",1,"success-icon"],["svgIcon","close",1,"warn-icon"],["data-label","Plays"],["data-label","Quality"],[3,"ngSwitch"],["class","icon-quality","svgIcon","hd",4,"ngSwitchCase"],["class","icon-quality","svgIcon","4k",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","text-quality",4,"ngSwitchDefault"],["data-label","Score"],["data-label","Reports"],["data-label","Season"],["data-label","Episode"],[1,"edit-column"],["mat-icon-button","",3,"matTooltip","click",4,"ngIf"],["data-label","Title"],["class","title-name link",3,"routerLink","queryParams",4,"ngIf"],[1,"title-name","link",3,"routerLink","queryParams"],["svgIcon","hd",1,"icon-quality"],["svgIcon","4k",1,"icon-quality"],[1,"text-quality"],["mat-icon-button","",3,"matTooltip","click"],["svgIcon","edit"],["svgImage","video-files.svg"],["primary-text","","trans",""]],template:function(A,B){1&A&&(i.TgZ(0,"div",0),i.TgZ(1,"h1",1),i._uU(2,"Videos"),i.qZA(),i.TgZ(3,"div",2),i._UZ(4,"datatable-filters",3),i.TgZ(5,"div",4),i.YNc(6,m,4,0,"button",5),i.qZA(),i.qZA(),i.qZA(),i.TgZ(7,"div",6),i.YNc(8,h,1,0,"mat-progress-bar",7),i.ALo(9,"async"),i.TgZ(10,"table",8),i.TgZ(11,"thead"),i.TgZ(12,"tr"),i._UZ(13,"th",9),i.TgZ(14,"th",10),i._uU(15,"Name"),i.qZA(),i.YNc(16,N,2,0,"th",11),i.TgZ(17,"th",10),i._uU(18,"Type"),i.qZA(),i.TgZ(19,"th",10),i._uU(20,"Category"),i.qZA(),i.TgZ(21,"th",10),i._uU(22,"Approved"),i.qZA(),i.TgZ(23,"th",12),i._uU(24,"Plays"),i.qZA(),i.TgZ(25,"th",10),i._uU(26,"Quality"),i.qZA(),i.TgZ(27,"th",10),i._uU(28,"Score"),i.qZA(),i.TgZ(29,"th",13),i._uU(30,"Reports"),i.qZA(),i.TgZ(31,"th",14),i._uU(32,"Season"),i.qZA(),i.TgZ(33,"th",15),i._uU(34,"Episode"),i.qZA(),i._UZ(35,"th"),i.qZA(),i.YNc(36,R,6,4,"tr",16),i.qZA(),i.TgZ(37,"tbody"),i.YNc(38,lt,35,25,"tr",17),i.ALo(39,"async"),i.qZA(),i.qZA(),i.YNc(40,vt,3,0,"no-results-message",18),i.ALo(41,"async"),i._UZ(42,"datatable-footer"),i.qZA()),2&A&&(i.xp6(4),i.Q6J("filters",B.filters),i.xp6(2),i.Q6J("ngIf",B.currentUser.hasPermission("videos.create")),i.xp6(2),i.Q6J("ngIf",i.lcZ(9,7,B.datatable.paginator&&B.datatable.paginator.loading$)),i.xp6(8),i.Q6J("ngIf",!B.title),i.xp6(20),i.Q6J("ngIf",B.datatable.selectedRows$.value.length),i.xp6(2),i.Q6J("ngForOf",i.lcZ(39,9,B.videos$)),i.xp6(2),i.Q6J("ngIf",i.lcZ(41,11,B.datatable.paginator.noResults$)))},directives:[F.P,ot.h,E.O5,X.e,L.p,E.sg,H.V,it.lW,tt.Hw,st.pW,ct.O,E.RF,E.n9,E.ED,ut.yS,gt.gM,J.U],pipes:[E.Ov,z.R],styles:[".video-name[_ngcontent-%COMP%], .title-name[_ngcontent-%COMP%]{display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:200px}.approved[_ngcontent-%COMP%]:hover   .warn-icon[_ngcontent-%COMP%]{display:inline-block}.approved[_ngcontent-%COMP%]:hover   .success-icon[_ngcontent-%COMP%]{display:none}.approved[_ngcontent-%COMP%]   .success-icon[_ngcontent-%COMP%]{display:inline-block}.disapproved[_ngcontent-%COMP%]:hover   .success-icon[_ngcontent-%COMP%]{display:inline-block}.disapproved[_ngcontent-%COMP%]:hover   .warn-icon[_ngcontent-%COMP%]{display:none}.disapproved[_ngcontent-%COMP%]   .warn-icon[_ngcontent-%COMP%]{display:inline-block}.success-icon[_ngcontent-%COMP%]{display:none;color:#43a047}.warn-icon[_ngcontent-%COMP%]{display:none;color:#f44336}"],changeDetection:0}),U})()},70:(et,k,o)=>{o.r(k),o.d(k,{CrupdateTitleModule:()=>Le});var e=o(4364),P=o(6798),C=o(3786),d=o(847),v=o(2463),f=o(9536),O=o(6491),t=o(2316),x=o(5515),g=o(616),a=o(1707),Q=o(9141),i=o(6313),Y=o(3534),M=o(9170),I=o(3466),q=o(1435),F=o(707),ot=o(6034),E=o(3340),X=o(5718),L=o(1654),H=o(781),it=o(298),tt=o(2529),st=o(6536),ct=o(3297);function ut(l,s){if(1&l&&(t.TgZ(0,"option",44),t._uU(1),t.qZA()),2&l){const n=s.$implicit;t.Q6J("ngValue",n),t.xp6(1),t.hij(" ",n," ")}}function gt(l,s){if(1&l&&(t.TgZ(0,"option",45),t._uU(1),t.qZA()),2&l){const n=s.$implicit;t.Q6J("value",n.code),t.xp6(1),t.hij(" ",n.name," ")}}class J{constructor(s,n,c,Z,w,G,ht,_t){this.store=s,this.fb=n,this.route=c,this.uploadQueue=Z,this.settings=w,this.router=G,this.titles=ht,this.toast=_t,this.poster$=new O.X(null),this.form=this.fb.group({name:["",[a.kI.required,a.kI.minLength(1)]],original_title:["",[a.kI.required,a.kI.minLength(1)]],is_series:[!1,[a.kI.required]],language:[""],tagline:["",[a.kI.minLength(1),a.kI.maxLength(250)]],poster:["",[a.kI.minLength(1),a.kI.maxLength(250)]],backdrop:["",[a.kI.minLength(1),a.kI.maxLength(250)]],description:["",[a.kI.minLength(1)]],budget:["",a.kI.min(1)],revenue:["",a.kI.min(1)],runtime:["",[a.kI.min(1),a.kI.max(300)]],country:["",[a.kI.minLength(1),a.kI.maxLength(50)]],popularity:[1,[a.kI.min(1),a.kI.max(100)]],certification:["pg"],release_date:[""],allow_update:[!0]}),this.certificationOptions=this.settings.getJson("browse.ageRatings")}ngOnInit(){this.store.dispatch(new v.N1),this.store.select(f.i.title).pipe((0,M.h)(s=>!!s.id),(0,I.q)(1)).subscribe(s=>{this.form.patchValue(Object.assign(Object.assign({},s),{release_date:s.release_date?s.release_date.split("T")[0]:null})),this.poster$.next(s.poster)}),this.form.get("poster").valueChanges.subscribe(s=>{this.poster$.next(s)})}uploadImage(s){(0,i.r)({types:[Y.j.image]}).then(n=>{this.uploadQueue.start(n,{uri:"uploads/images",httpParams:{diskPrefix:`media-images/${s}s`}}).subscribe(Z=>{this.form.patchValue({[s]:Z.fileEntry.url})})})}submit(){this.store.dispatch(new v.cY(!0));const s=this.store.selectSnapshot(f.i.title).id;(s?this.titles.update(s,this.form.value):this.titles.create(this.form.value)).pipe((0,q.x)(()=>this.store.dispatch(new v.cY(!1)))).subscribe(c=>{this.toast.open(s?F.X.TITLE_UPDATE_SUCCESS:F.X.TITLE_CREATE_SUCCESS),this.router.navigate(s?[this.router.url.includes("admin")?"/admin/titles":this.router.url.split("?")[0].replace("/edit","")]:[this.router.url.replace("new",""+c.title.id),"edit"])})}}J.\u0275fac=function(s){return new(s||J)(t.Y36(d.yh),t.Y36(a.qu),t.Y36(P.gz),t.Y36(Q.A),t.Y36(ot.Z),t.Y36(P.F0),t.Y36(E.d),t.Y36(X.F))},J.\u0275cmp=t.Xpm({type:J,selectors:[["primary-facts-panel"]],features:[t._Bn([Q.A])],decls:93,vars:21,consts:[[3,"formGroup","ngSubmit"],[1,"poster-container"],[3,"src"],[1,"many-inputs"],[1,"inline-container"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","minlength","1","maxlength","250","required",""],["for","original-title","trans",""],["type","text","formControlName","original_title","id","original-title","minlength","1","maxlength","250","required",""],["for","type","trans",""],["formControlName","is_series","id","type","required",""],["trans","",3,"ngValue"],["for","allow_update","trans",""],["formControlName","allow_update","id","allow_update","required",""],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","backdrop","trans",""],["type","text","formControlName","backdrop","id","backdrop","minlength","1","maxlength","250"],["for","release_date","trans",""],["type","date","formControlName","release_date","id","release_date","placeholder","YYYY-MM-DD","required",""],["for","tagline","trans",""],["type","text","formControlName","tagline","id","tagline","minlength","1","maxlength","250"],["for","description","trans",""],["type","text","formControlName","description","id","description","minlength","1","cdkTextareaAutosize","","cdkAutosizeMinRows","6"],["for","runtime","trans",""],["type","number","formControlName","runtime","id","runtime","min","1","max","500"],[1,"input-container","certification-input-container"],["for","certification","trans",""],["formControlName","certification","id","certification"],[3,"ngValue",4,"ngFor","ngForOf"],["for","budget","trans",""],["type","number","formControlName","budget","id","budget","min","1"],["for","revenue","trans",""],["type","number","formControlName","revenue","id","revenue","min","1"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000"],["for","language","trans",""],["formControlName","language","id","language","required",""],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],[3,"ngValue"],[3,"value"]],template:function(s,n){1&s&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.submit()}),t.TgZ(1,"div",1),t._UZ(2,"media-image",2),t.ALo(3,"async"),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"div",5),t.TgZ(7,"label",6),t._uU(8,"Title"),t.qZA(),t._UZ(9,"input",7),t.qZA(),t.TgZ(10,"div",5),t.TgZ(11,"label",8),t._uU(12,"Original Title"),t.qZA(),t._UZ(13,"input",9),t.qZA(),t.qZA(),t.TgZ(14,"div",4),t.TgZ(15,"div",5),t.TgZ(16,"label",10),t._uU(17,"Type"),t.qZA(),t.TgZ(18,"select",11),t.TgZ(19,"option",12),t._uU(20,"Movie"),t.qZA(),t.TgZ(21,"option",12),t._uU(22,"TV Series"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(23,"div",5),t.TgZ(24,"label",13),t._uU(25,"Allow Auto Update"),t.qZA(),t.TgZ(26,"select",14),t.TgZ(27,"option",12),t._uU(28,"Yes"),t.qZA(),t.TgZ(29,"option",12),t._uU(30,"No"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(31,"div",5),t.TgZ(32,"label",15),t._uU(33,"Poster"),t.qZA(),t.TgZ(34,"div",16),t.TgZ(35,"button",17),t.NdJ("click",function(){return n.uploadImage("poster")}),t.ALo(36,"trans"),t._UZ(37,"mat-icon",18),t.qZA(),t._UZ(38,"input",19),t.qZA(),t.qZA(),t.TgZ(39,"div",5),t.TgZ(40,"label",20),t._uU(41,"Backdrop"),t.qZA(),t.TgZ(42,"div",16),t.TgZ(43,"button",17),t.NdJ("click",function(){return n.uploadImage("backdrop")}),t.ALo(44,"trans"),t._UZ(45,"mat-icon",18),t.qZA(),t._UZ(46,"input",21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(47,"div",4),t.TgZ(48,"div",5),t.TgZ(49,"label",22),t._uU(50,"Release Date"),t.qZA(),t._UZ(51,"input",23),t.qZA(),t.TgZ(52,"div",5),t.TgZ(53,"label",24),t._uU(54,"Tagline"),t.qZA(),t._UZ(55,"input",25),t.qZA(),t.qZA(),t.TgZ(56,"div",5),t.TgZ(57,"label",26),t._uU(58,"Overview"),t.qZA(),t._UZ(59,"textarea",27),t.qZA(),t.TgZ(60,"div",4),t.TgZ(61,"div",5),t.TgZ(62,"label",28),t._uU(63,"Runtime"),t.qZA(),t._UZ(64,"input",29),t.qZA(),t.TgZ(65,"div",30),t.TgZ(66,"label",31),t._uU(67,"Certification"),t.qZA(),t.TgZ(68,"select",32),t.YNc(69,ut,2,2,"option",33),t.qZA(),t.qZA(),t.qZA(),t.TgZ(70,"div",4),t.TgZ(71,"div",5),t.TgZ(72,"label",34),t._uU(73,"Budget"),t.qZA(),t._UZ(74,"input",35),t.qZA(),t.TgZ(75,"div",5),t.TgZ(76,"label",36),t._uU(77,"Revenue"),t.qZA(),t._UZ(78,"input",37),t.qZA(),t.qZA(),t.TgZ(79,"div",4),t.TgZ(80,"div",5),t.TgZ(81,"label",38),t._uU(82,"Popularity"),t.qZA(),t._UZ(83,"input",39),t.qZA(),t.TgZ(84,"div",5),t.TgZ(85,"label",40),t._uU(86,"Language"),t.qZA(),t.TgZ(87,"select",41),t.YNc(88,gt,2,2,"option",42),t.ALo(89,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(90,"button",43),t.ALo(91,"async"),t._uU(92," Save "),t.qZA(),t.qZA()),2&s&&(t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("src",t.lcZ(3,11,n.poster$)),t.xp6(17),t.Q6J("ngValue",!1),t.xp6(2),t.Q6J("ngValue",!0),t.xp6(6),t.Q6J("ngValue",!0),t.xp6(2),t.Q6J("ngValue",!1),t.xp6(6),t.Q6J("matTooltip",t.lcZ(36,13,"Upload poster")),t.xp6(8),t.Q6J("matTooltip",t.lcZ(44,15,"Upload backdrop")),t.xp6(26),t.Q6J("ngForOf",n.certificationOptions),t.xp6(19),t.Q6J("ngForOf",t.lcZ(89,17,n.languageOptions$)),t.xp6(2),t.Q6J("disabled",t.lcZ(91,19,n.loading$)))},directives:[a._Y,a.JL,a.sg,L.P,x.P,a.Fj,a.JJ,a.u,a.wO,a.nD,a.Q7,a.EJ,a.YN,a.Kr,H.lW,it.gM,tt.Hw,st.IC,a.wV,a.qQ,a.Fd,e.sg],pipes:[e.Ov,ct.R],styles:["primary-facts-panel{display:block}primary-facts-panel .poster-container{display:flex;margin-bottom:20px}primary-facts-panel .poster-container media-image img{height:350px;width:auto;box-shadow:0 2px 1px -1px #0003,0 1px 1px #00000024,0 1px 3px #0000001f;border-radius:4px}primary-facts-panel .poster-container .many-inputs{margin-left:20px;flex:1 1 auto}primary-facts-panel .poster-container .many-inputs .input-container:last-of-type{margin-bottom:0}primary-facts-panel .certification-input-container option,primary-facts-panel .certification-input-container select{text-transform:uppercase}\n"],encapsulation:2,changeDetection:0}),(0,C.gn)([(0,d.Ph)(f.i.title)],J.prototype,"title$",void 0),(0,C.gn)([(0,d.Ph)(f.i.loading)],J.prototype,"loading$",void 0),(0,C.gn)([(0,d.Ph)(f.i.languageOptions)],J.prototype,"languageOptions$",void 0);var z=o(8208),m=o(5381),h=o(1625),N=o(9348),D=o(2213),T=o(253),R=o(1143),b=o(3927),S=o(4388),nt=o(4622),rt=o(5924),dt=o(4298);function V(l,s){1&l&&(t.TgZ(0,"h2",11),t._uU(1,"Edit"),t.qZA())}function at(l,s){1&l&&(t.TgZ(0,"h2",11),t._uU(1,"Create"),t.qZA())}function $(l,s){if(1&l&&(t.TgZ(0,"div",12),t.TgZ(1,"label",13),t._uU(2,"Person"),t.qZA(),t._UZ(3,"input",14),t.qZA()),2&l){const n=t.oxw();t.xp6(3),t.Q6J("value",null==n.credit?null:n.credit.name)}}function W(l,s){if(1&l){const n=t.EpF();t.TgZ(0,"search-input",15),t.NdJ("resultSelected",function(Z){return t.CHM(n),t.oxw().setCredit(Z)}),t.qZA()}if(2&l){const n=t.oxw();t.Q6J("type",n.personModelType)("resetInputOnSelect",!1)}}function lt(l,s){1&l&&(t.TgZ(0,"div",12),t.TgZ(1,"label",16),t._uU(2,"Character"),t.qZA(),t._UZ(3,"input",17),t.qZA())}function vt(l,s){if(1&l&&(t.TgZ(0,"mat-option",25),t.TgZ(1,"div",26),t.TgZ(2,"span",27),t._uU(3,"Job"),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"div",28),t.TgZ(6,"span",27),t._uU(7,"Department"),t.qZA(),t._uU(8),t.qZA(),t.qZA()),2&l){const n=s.$implicit;t.Q6J("value",n.job),t.xp6(4),t.hij(": ",n.job,""),t.xp6(4),t.hij(": ",n.department,"")}}function bt(l,s){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",12),t.TgZ(2,"label",18),t._uU(3,"Job"),t.qZA(),t._UZ(4,"input",19),t.qZA(),t.TgZ(5,"mat-autocomplete",20,21),t.NdJ("optionSelected",function(Z){return t.CHM(n),t.oxw().jobSelected(Z)}),t.YNc(7,vt,9,3,"mat-option",22),t.ALo(8,"async"),t.qZA(),t.TgZ(9,"div",12),t.TgZ(10,"label",23),t._uU(11,"Department"),t.qZA(),t._UZ(12,"input",24),t.qZA(),t.BQk()}if(2&l){const n=t.MAs(6),c=t.oxw();t.xp6(4),t.Q6J("matAutocomplete",n),t.xp6(3),t.Q6J("ngForOf",t.lcZ(8,2,c.filteredJobs))}}class U{constructor(s,n,c,Z,w,G,ht){this.store=s,this.toast=n,this.fb=c,this.actions$=Z,this.dialogRef=w,this.valueLists=G,this.data=ht,this.personModelType=T.o.PERSON,this.form=this.fb.group({character:[""],department:[""],job:[""]}),this.availableJobs=[],this.data.credit&&(this.credit=this.data.credit,this.form.patchValue(this.data.credit.pivot))}ngOnInit(){this.valueLists.get(["tmdbJobs"]).subscribe(s=>{this.availableJobs=[],s.tmdbJobs.forEach(n=>{const c=n.jobs.map(Z=>({job:Z,department:n.department}));this.availableJobs=[...this.availableJobs,...c]}),this.filteredJobs=this.form.get("job").valueChanges.pipe((0,R.O)(""),(0,b.U)(n=>this.availableJobs.filter(c=>!(n=n.toLowerCase())||c.job.toLowerCase().includes(n)||c.department.toLowerCase().includes(n)).slice(0,10)))})}confirm(){var s;const n=this.data.credit?new v.bX(this.credit.pivot.id,this.getPayload()):new v.RP(null===(s=this.credit)||void 0===s?void 0:s.id,this.data.mediaItem,this.getPayload());this.store.dispatch(n).subscribe(()=>{this.close(),this.toast.open(this.data.credit?F.X.CREDIT_UPDATE_SUCCESS:F.X.CREDIT_ADD_SUCCESS)},c=>{this.toast.open(c.message)})}close(){this.dialogRef.close()}setCredit(s){this.credit=s}getPayload(){const s=this.form.value;return"cast"===this.data.type&&(s.department="cast",s.job="cast"),s}jobSelected(s){const n=this.availableJobs.find(c=>c.job===s.option.value);this.form.patchValue({job:n.job,department:n.department})}}U.\u0275fac=function(s){return new(s||U)(t.Y36(d.yh),t.Y36(X.F),t.Y36(a.qu),t.Y36(d.eX),t.Y36(D.so),t.Y36(S.l),t.Y36(D.WI))},U.\u0275cmp=t.Xpm({type:U,selectors:[["crupdate-credit-modal"]],decls:17,vars:10,consts:[[1,"modal-header"],["class","modal-title","mat-dialog-title","","trans","",4,"ngIf"],["type","button",1,"close-button","no-style","icon-button",3,"click"],["svgIcon","close"],["autocomplete","off","ngNativeValidate","",3,"formGroup","ngSubmit"],[1,"many-inputs"],["class","input-container",4,"ngIf"],["placeholder","Search for a person...","label","Person","searchProvider","local",3,"type","resetInputOnSelect","resultSelected",4,"ngIf"],[4,"ngIf"],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["mat-dialog-title","","trans","",1,"modal-title"],[1,"input-container"],["for","name","trans",""],["type","text","id","name","disabled","",3,"value"],["placeholder","Search for a person...","label","Person","searchProvider","local",3,"type","resetInputOnSelect","resultSelected"],["for","character","trans",""],["type","text","id","character","formControlName","character","required",""],["for","job","trans",""],["type","text","id","job","formControlName","job","required","",3,"matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],["class","multiline-mat-menu-item",3,"value",4,"ngFor","ngForOf"],["for","department","trans",""],["type","text","id","department","formControlName","department","required",""],[1,"multiline-mat-menu-item",3,"value"],[1,"title"],["trans",""],[1,"description"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0),t.YNc(1,V,2,0,"h2",1),t.YNc(2,at,2,0,"h2",1),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.close()}),t._UZ(4,"mat-icon",3),t.qZA(),t.qZA(),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return n.confirm()}),t.TgZ(6,"mat-dialog-content",5),t.YNc(7,$,4,1,"div",6),t.YNc(8,W,1,2,"search-input",7),t.YNc(9,lt,4,0,"div",6),t.YNc(10,bt,13,4,"ng-container",8),t.qZA(),t.TgZ(11,"mat-dialog-actions"),t.TgZ(12,"button",9),t.NdJ("click",function(){return n.close()}),t._uU(13,"Cancel"),t.qZA(),t.TgZ(14,"button",10),t.ALo(15,"async"),t._uU(16," Save "),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngIf",n.data.credit),t.xp6(1),t.Q6J("ngIf",!n.data.credit),t.xp6(3),t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("ngIf",n.data.credit),t.xp6(1),t.Q6J("ngIf",!n.data.credit),t.xp6(1),t.Q6J("ngIf","cast"===n.data.type),t.xp6(1),t.Q6J("ngIf","crew"===n.data.type),t.xp6(4),t.Q6J("disabled",t.lcZ(15,8,n.loading$)))},directives:[e.O5,tt.Hw,a.JL,a.sg,D.xY,D.H8,H.lW,x.P,D.uh,nt.J,a.Fj,a.JJ,a.u,a.Q7,rt.ZL,rt.XC,e.sg,dt.ey],pipes:[e.Ov],styles:["crupdate-credit-modal{display:block;width:400px;max-width:100%}crupdate-credit-modal search-input input{border-color:var(--be-divider-default);margin-bottom:20px}\n"],encapsulation:2,changeDetection:0}),(0,C.gn)([(0,d.Ph)(f.i.loading)],U.prototype,"loading$",void 0);var j=o(6142),A=o(382),B=o(395),pt=o(1303),mt=o(6403);function Ct(l,s){1&l&&(t.TgZ(0,"th",8),t._uU(1,"Character"),t.qZA())}function Pt(l,s){1&l&&(t.TgZ(0,"th",9),t._uU(1,"Department"),t.qZA())}function p(l,s){1&l&&(t.TgZ(0,"th",10),t._uU(1,"Job"),t.qZA())}function y(l,s){1&l&&(t.TgZ(0,"button",21),t._UZ(1,"mat-icon",22),t.qZA())}function r(l,s){if(1&l&&(t.TgZ(0,"div"),t._uU(1),t.qZA()),2&l){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.name)}}function u(l,s){if(1&l&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&l){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.pivot.character)}}function _(l,s){if(1&l&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&l){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.pivot.department)}}function K(l,s){if(1&l&&(t.TgZ(0,"td"),t._uU(1),t.qZA()),2&l){const n=t.oxw().$implicit;t.xp6(1),t.Oqu(n.pivot.job)}}function ft(l,s){if(1&l){const n=t.EpF();t.TgZ(0,"tr",11),t.TgZ(1,"td"),t.TgZ(2,"div",12),t.YNc(3,y,2,0,"button",13),t._UZ(4,"media-image",14),t.TgZ(5,"span"),t._uU(6),t.qZA(),t.qZA(),t.YNc(7,r,2,1,"div",15),t.qZA(),t.YNc(8,u,2,1,"td",16),t.YNc(9,_,2,1,"td",16),t.YNc(10,K,2,1,"td",16),t.TgZ(11,"td",17),t.TgZ(12,"button",18),t.NdJ("click",function(){const w=t.CHM(n).$implicit;return t.oxw().openCrupdateCreditModal(w)}),t._UZ(13,"mat-icon",19),t.qZA(),t.TgZ(14,"button",18),t.NdJ("click",function(){const w=t.CHM(n).$implicit;return t.oxw().detachCredit(w)}),t._UZ(15,"mat-icon",20),t.qZA(),t.qZA(),t.qZA()}if(2&l){const n=s.$implicit,c=t.oxw();t.xp6(3),t.Q6J("ngIf","cast"===c.type),t.xp6(1),t.Q6J("src",n.poster),t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Q6J("ngIf","cast"===c.type),t.xp6(1),t.Q6J("ngIf","crew"===c.type),t.xp6(1),t.Q6J("ngIf","crew"===c.type)}}function Ot(l,s){1&l&&(t.TgZ(0,"no-results-message",23),t.TgZ(1,"span",24),t._uU(2,"Nothing to Display."),t.qZA(),t.qZA())}let Mt=(()=>{class l{constructor(n,c,Z,w){this.dialog=n,this.store=c,this.toast=Z,this.datatable=w}ngOnInit(){this.datatable.init()}ngOnChanges(n){n.mediaItem&&n.mediaItem.currentValue&&(this.datatable.data="cast"===this.type?this.getCast(this.mediaItem.credits):this.getCrew(this.mediaItem.credits))}ngOnDestroy(){this.datatable.destroy()}openCrupdateCreditModal(n){this.dialog.open(U,{credit:n,type:this.type,mediaItem:this.mediaItem})}detachCredit(n){this.dialog.open(z.z,{title:"Remove Credit",body:"Are you sure you want to remove this credit?",ok:"Remove"}).afterClosed().subscribe(c=>{!c||this.store.dispatch(new v.NQ(this.mediaItem,n)).subscribe(()=>{this.toast.open(F.X.CREDIT_REMOVE_SUCCESS)})})}changeCreditsOrder(n){this.store.selectSnapshot(f.i.loading)||this.store.dispatch(new v.Qs(this.mediaItem,n.previousIndex,n.currentIndex,this.type))}getCast(n){return n?n.filter(c=>"cast"===c.pivot.department):[]}getCrew(n){return n?n.filter(c=>"cast"!==c.pivot.department):[]}}return l.\u0275fac=function(n){return new(n||l)(t.Y36(m.u),t.Y36(d.yh),t.Y36(X.F),t.Y36(j.x))},l.\u0275cmp=t.Xpm({type:l,selectors:[["credits-panel"]],inputs:{mediaItem:"mediaItem",type:"type"},features:[t._Bn([j.x]),t.TTD],decls:17,vars:10,consts:[["type","button","mat-raised-button","","color","accent","leftContent","","trans","",3,"click"],["cdkDropList","",1,"material-table",3,"cdkDropListDisabled","cdkDropListDropped"],["table-sort-header","","trans",""],["table-sort-header","pivot.character","trans","",4,"ngIf"],["table-sort-header","pivot.department","trans","",4,"ngIf"],["table-sort-header","pivot.job","trans","",4,"ngIf"],["cdkDrag","",4,"ngFor","ngForOf"],["svgImage","awards.svg",4,"ngIf"],["table-sort-header","pivot.character","trans",""],["table-sort-header","pivot.department","trans",""],["table-sort-header","pivot.job","trans",""],["cdkDrag",""],[1,"column-with-image"],["type","button","mat-icon-button","","cdkDragHandle","",4,"ngIf"],["size","small",3,"src"],[4,"cdkDragPreview"],[4,"ngIf"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","close"],["type","button","mat-icon-button","","cdkDragHandle",""],["svgIcon","drag-handle"],["svgImage","awards.svg"],["primary-text","","trans",""]],template:function(n,c){1&n&&(t.TgZ(0,"datatable-header"),t.TgZ(1,"button",0),t.NdJ("click",function(){return c.openCrupdateCreditModal()}),t._uU(2,"Add Credit"),t.qZA(),t.qZA(),t.TgZ(3,"table",1),t.NdJ("cdkDropListDropped",function(w){return c.changeCreditsOrder(w)}),t.TgZ(4,"thead"),t.TgZ(5,"tr"),t.TgZ(6,"th",2),t._uU(7,"Name"),t.qZA(),t.YNc(8,Ct,2,0,"th",3),t.YNc(9,Pt,2,0,"th",4),t.YNc(10,p,2,0,"th",5),t._UZ(11,"th"),t.qZA(),t.qZA(),t.TgZ(12,"tbody"),t.YNc(13,ft,16,6,"tr",6),t.ALo(14,"async"),t.qZA(),t.qZA(),t.YNc(15,Ot,3,0,"no-results-message",7),t.ALo(16,"async")),2&n&&(t.xp6(3),t.Q6J("cdkDropListDisabled","crew"===c.type),t.xp6(5),t.Q6J("ngIf","cast"===c.type),t.xp6(1),t.Q6J("ngIf","crew"===c.type),t.xp6(1),t.Q6J("ngIf","crew"===c.type),t.xp6(3),t.Q6J("ngForOf",t.lcZ(14,6,c.datatable.data$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(16,8,c.datatable.data$).length))},directives:[A.G,H.lW,x.P,B.Wj,pt.p,e.O5,e.sg,B.Zt,L.P,B.pV,tt.Hw,B.Bh,mt.U],pipes:[e.Ov],styles:["[_nghost-%COMP%]{display:block;padding:0}.cdk-drag-handle[_ngcontent-%COMP%]{cursor:move;margin-right:10px}.cdk-drag-preview[_ngcontent-%COMP%]{padding:15px;font-size:1.5rem;border-radius:4px;background-color:var(--be-background);box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{background-color:var(--be-hover)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .cdk-drag[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),l})();function kt(l,s){1&l&&(t.TgZ(0,"h2",30),t._uU(1,"Edit Episode"),t.qZA())}function Qt(l,s){1&l&&(t.TgZ(0,"h2",30),t._uU(1,"Create Episode"),t.qZA())}function Rt(l,s){if(1&l&&(t.TgZ(0,"div",31),t._uU(1),t.qZA()),2&l){const n=s.ngIf;t.xp6(1),t.hij(" ",n," ")}}class Zt{constructor(s,n,c,Z,w,G){this.store=s,this.toast=n,this.fb=c,this.uploadQueue=Z,this.dialogRef=w,this.data=G,this.episode$=new O.X(null),this.errors$=new O.X({}),this.episodeForm=this.fb.group({name:["",[a.kI.required,a.kI.minLength(1)]],poster:["",[a.kI.minLength(1),a.kI.maxLength(250)]],description:["",[a.kI.minLength(1)]],popularity:[50,[a.kI.min(1),a.kI.max(1e3)]],release_date:[""],episode_number:[""]})}ngOnInit(){this.data.episode?(this.bindToStoreEpisode(),this.episodeForm.patchValue(Object.assign(Object.assign({},this.episode$.value),{release_date:this.episode$.value.release_date.split("T")[0]})),setTimeout(()=>this.loadEpisodeCredits())):this.episodeForm.patchValue({episode_number:this.data.season?this.data.season.episode_count+1:1})}confirm(){this.data.episode?this.updateEpisode():this.createEpisode()}close(){this.dialogRef.close()}createEpisode(){this.store.dispatch(new v.bL(this.data.season,this.episodeForm.value)).subscribe(()=>{this.errors$.next({}),this.toast.open(F.X.EPISODE_CREATE_SUCCESS);const s=this.store.selectSnapshot(f.i.seasons).find(n=>n.id===this.data.season.id).episodes;this.data.episode=s[s.length-1]},s=>this.errors$.next(s.errors))}updateEpisode(){this.store.dispatch(new v.GT(this.data.episode,this.episodeForm.value)).subscribe(()=>{this.errors$.next({}),this.toast.open(F.X.EPISODE_UPDATE_SUCCESS),this.close()},s=>this.errors$.next(s.errors))}uploadPoster(){(0,i.r)({types:[Y.j.image]}).then(s=>{this.uploadQueue.start(s,{uri:"uploads/images",httpParams:{diskPrefix:"media-images/posters"}}).subscribe(c=>{this.episodeForm.patchValue({poster:c.fileEntry.url})})})}bindToStoreEpisode(){this.store.select(f.i.title).subscribe(s=>{if(s.seasons){const n=s.seasons.find(c=>c.number===this.data.episode.season_number).episodes.find(c=>c.episode_number===this.data.episode.episode_number);this.episode$.next(Object.assign({},n))}})}loadEpisodeCredits(){this.data.episode.credits||this.store.dispatch(new v.QN(this.episode$.value)).toPromise()}}Zt.\u0275fac=function(s){return new(s||Zt)(t.Y36(d.yh),t.Y36(X.F),t.Y36(a.qu),t.Y36(Q.A),t.Y36(D.so),t.Y36(D.WI))},Zt.\u0275cmp=t.Xpm({type:Zt,selectors:[["crupdate-episode-modal"]],features:[t._Bn([Q.A])],decls:55,vars:30,consts:[[1,"modal-header"],["class","modal-title","mat-dialog-title","","trans","",4,"ngIf"],["type","button",1,"close-button","no-style","icon-button",3,"click"],["svgIcon","close"],["autocomplete","off","ngNativeValidate","",3,"formGroup","ngSubmit"],["animationDuration","0ms","color","accent",3,"dynamicHeight"],[3,"label"],[1,"many-inputs","primary-facts-panel"],[1,"input-container"],["for","name","trans",""],["type","text","formControlName","name","id","name","minlength","1","maxlength","250","required",""],["for","episode_number","trans",""],["type","number","formControlName","episode_number","id","episode_number","min","1","required",""],["class","error",4,"ngIf"],["for","poster","trans",""],[1,"input-with-action","action-left"],["type","button","mat-flat-button","","color","accent",3,"matTooltip","click"],["svgIcon","file-upload"],["type","text","formControlName","poster","id","poster","minlength","1","maxlength","250"],["for","release_date","trans",""],["type","date","formControlName","release_date","id","release_date","required",""],["for","description","trans",""],["type","text","formControlName","description","id","description","minlength","1","cdkTextareaAutosize","","cdkAutosizeMinRows","6"],["for","popularity","trans",""],["type","number","formControlName","popularity","id","popularity","min","1","max","1000"],[3,"label","disabled"],["type","cast",3,"mediaItem"],["type","crew",3,"mediaItem"],["type","button","mat-button","","trans","",3,"click"],["type","submit","mat-raised-button","","color","accent","trans","",3,"disabled"],["mat-dialog-title","","trans","",1,"modal-title"],[1,"error"]],template:function(s,n){1&s&&(t.TgZ(0,"div",0),t.YNc(1,kt,2,0,"h2",1),t.YNc(2,Qt,2,0,"h2",1),t.TgZ(3,"button",2),t.NdJ("click",function(){return n.close()}),t._UZ(4,"mat-icon",3),t.qZA(),t.qZA(),t.TgZ(5,"form",4),t.NdJ("ngSubmit",function(){return n.confirm()}),t.TgZ(6,"mat-dialog-content"),t.TgZ(7,"mat-tab-group",5),t.TgZ(8,"mat-tab",6),t.ALo(9,"trans"),t.TgZ(10,"div",7),t.TgZ(11,"div",8),t.TgZ(12,"label",9),t._uU(13,"Title"),t.qZA(),t._UZ(14,"input",10),t.qZA(),t.TgZ(15,"div",8),t.TgZ(16,"label",11),t._uU(17,"Number"),t.qZA(),t._UZ(18,"input",12),t.YNc(19,Rt,2,1,"div",13),t.ALo(20,"async"),t.qZA(),t.TgZ(21,"div",8),t.TgZ(22,"label",14),t._uU(23,"Poster"),t.qZA(),t.TgZ(24,"div",15),t.TgZ(25,"button",16),t.NdJ("click",function(){return n.uploadPoster()}),t.ALo(26,"trans"),t._UZ(27,"mat-icon",17),t.qZA(),t._UZ(28,"input",18),t.qZA(),t.qZA(),t.TgZ(29,"div",8),t.TgZ(30,"label",19),t._uU(31,"Release Date"),t.qZA(),t._UZ(32,"input",20),t.qZA(),t.TgZ(33,"div",8),t.TgZ(34,"label",21),t._uU(35,"Overview"),t.qZA(),t._UZ(36,"textarea",22),t.qZA(),t.TgZ(37,"div",8),t.TgZ(38,"label",23),t._uU(39,"Popularity"),t.qZA(),t._UZ(40,"input",24),t.qZA(),t.qZA(),t.qZA(),t.TgZ(41,"mat-tab",25),t.ALo(42,"trans"),t._UZ(43,"credits-panel",26),t.ALo(44,"async"),t.qZA(),t.TgZ(45,"mat-tab",25),t.ALo(46,"trans"),t._UZ(47,"credits-panel",27),t.ALo(48,"async"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(49,"mat-dialog-actions"),t.TgZ(50,"button",28),t.NdJ("click",function(){return n.close()}),t._uU(51,"Cancel"),t.qZA(),t.TgZ(52,"button",29),t.ALo(53,"async"),t._uU(54," Save "),t.qZA(),t.qZA(),t.qZA()),2&s&&(t.xp6(1),t.Q6J("ngIf",n.data.episode),t.xp6(1),t.Q6J("ngIf",!n.data.episode),t.xp6(3),t.Q6J("formGroup",n.episodeForm),t.xp6(2),t.Q6J("dynamicHeight",!0),t.xp6(1),t.Q6J("label",t.lcZ(9,14,"Primary Facts")),t.xp6(11),t.Q6J("ngIf",t.lcZ(20,16,n.errors$).episode_number),t.xp6(6),t.Q6J("matTooltip",t.lcZ(26,18,"Upload poster")),t.xp6(16),t.Q6J("label",t.lcZ(42,20,"Cast"))("disabled",!n.data.episode),t.xp6(2),t.Q6J("mediaItem",t.lcZ(44,22,n.episode$)),t.xp6(2),t.Q6J("label",t.lcZ(46,24,"Crew"))("disabled",!n.data.episode),t.xp6(2),t.Q6J("mediaItem",t.lcZ(48,26,n.episode$)),t.xp6(5),t.Q6J("disabled",t.lcZ(53,28,n.loading$)))},directives:[e.O5,tt.Hw,a.JL,a.sg,D.xY,N.SP,N.uX,x.P,a.Fj,a.JJ,a.u,a.wO,a.nD,a.Q7,a.wV,a.qQ,H.lW,it.gM,st.IC,a.Fd,Mt,D.H8,D.uh],pipes:[ct.R,e.Ov],styles:["[_nghost-%COMP%]{display:block;width:750px;max-width:100%}label[_ngcontent-%COMP%]{text-transform:capitalize}.primary-facts-panel[_ngcontent-%COMP%], credits-panel[_ngcontent-%COMP%]{padding:20px 0}"],changeDetection:0}),(0,C.gn)([(0,d.Ph)(f.i.loading)],Zt.prototype,"loading$",void 0);var $t=o(8256);function qt(l,s){if(1&l){const n=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t.TgZ(2,"div",7),t._UZ(3,"media-image",8),t.TgZ(4,"span"),t._uU(5),t.qZA(),t.qZA(),t.qZA(),t.TgZ(6,"td"),t._uU(7),t.qZA(),t.TgZ(8,"td"),t._uU(9),t.ALo(10,"formattedDate"),t.qZA(),t.TgZ(11,"td",9),t.TgZ(12,"button",10),t.NdJ("click",function(){const w=t.CHM(n).$implicit;return t.oxw().openCrupdateEpisodeModal(w)}),t._UZ(13,"mat-icon",11),t.qZA(),t.TgZ(14,"button",10),t.NdJ("click",function(){const w=t.CHM(n).$implicit;return t.oxw().deleteEpisode(w)}),t._UZ(15,"mat-icon",12),t.qZA(),t.qZA(),t.qZA()}if(2&l){const n=s.$implicit;t.xp6(3),t.Q6J("src",n.poster)("alt",n.name),t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.episode_number),t.xp6(2),t.Oqu(t.lcZ(10,5,n.release_date))}}function Lt(l,s){1&l&&(t.TgZ(0,"no-results-message"),t.TgZ(1,"span",13),t._uU(2,"Nothing to Display."),t.qZA(),t.TgZ(3,"span",14),t._uU(4,"This season does not have any episodes yet."),t.qZA(),t.qZA())}let Yt=(()=>{class l{constructor(n,c,Z,w,G){this.store=n,this.dialog=c,this.toast=Z,this.route=w,this.datatable=G,this.trackByFn=(ht,_t)=>_t.id}ngOnInit(){this.datatable.init()}ngAfterViewInit(){const n=+this.route.snapshot.params.episodeNumber;if(n){const c=this.season.episodes.find(Z=>Z.episode_number===n);c&&this.openCrupdateEpisodeModal(c)}}ngOnChanges(n){n.season.currentValue&&n.season.currentValue.episodes&&(this.datatable.data=this.season.episodes)}ngOnDestroy(){this.datatable.destroy()}deleteEpisode(n){this.dialog.open(z.z,{title:"Delete Episode",body:"Are you sure you want to delete this episode?",ok:"Delete"}).afterClosed().subscribe(c=>{!c||this.store.dispatch(new v.tW(n)).subscribe(()=>{this.toast.open(F.X.EPISODE_DELETE_SUCCESS)})})}openCrupdateEpisodeModal(n){this.dialog.open(Zt,{episode:n,season:this.season},{panelClass:"crupdate-episode-modal-container"})}}return l.\u0275fac=function(n){return new(n||l)(t.Y36(d.yh),t.Y36(m.u),t.Y36(X.F),t.Y36(P.gz),t.Y36(j.x))},l.\u0275cmp=t.Xpm({type:l,selectors:[["episodes-panel"]],inputs:{season:"season"},features:[t._Bn([j.x]),t.TTD],decls:19,vars:7,consts:[["pluralResourceName","episodes"],["leftContent",""],["mat-raised-button","","color","accent","trans","",3,"click"],[1,"material-table"],["table-sort-header","","trans",""],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[1,"column-with-image"],["size","small",3,"src","alt"],[1,"edit-column"],["type","button","mat-icon-button","",3,"click"],["svgIcon","edit"],["svgIcon","close"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(n,c){1&n&&(t.TgZ(0,"datatable-header",0),t.ynx(1,1),t.TgZ(2,"button",2),t.NdJ("click",function(){return c.openCrupdateEpisodeModal()}),t._uU(3,"Add Episode"),t.qZA(),t.BQk(),t.qZA(),t.TgZ(4,"table",3),t.TgZ(5,"thead"),t.TgZ(6,"tr"),t.TgZ(7,"th",4),t._uU(8,"Name"),t.qZA(),t.TgZ(9,"th",4),t._uU(10,"Number"),t.qZA(),t.TgZ(11,"th",4),t._uU(12,"Release Date"),t.qZA(),t._UZ(13,"th"),t.qZA(),t.qZA(),t.TgZ(14,"tbody"),t.YNc(15,qt,16,7,"tr",5),t.ALo(16,"async"),t.qZA(),t.qZA(),t.YNc(17,Lt,5,0,"no-results-message",6),t.ALo(18,"async")),2&n&&(t.xp6(15),t.Q6J("ngForOf",t.lcZ(16,3,c.datatable.data$))("ngForTrackBy",c.trackByFn),t.xp6(2),t.Q6J("ngIf",!t.lcZ(18,5,c.datatable.data$).length))},directives:[A.G,H.lW,x.P,pt.p,e.sg,e.O5,L.P,tt.Hw,mt.U],pipes:[e.Ov,$t.l],styles:["episodes-panel{display:block}episodes-panel .table-header{display:flex;align-items:center;margin-bottom:15px}episodes-panel .table-header .input-container{max-width:300px;margin-left:auto;position:relative}episodes-panel .table-header .input-container .mat-icon{position:absolute;top:11px;right:8px}episodes-panel no-results-message{margin-top:50px}\n"],encapsulation:2,changeDetection:0}),l})();function Bt(l,s){if(1&l&&(t.TgZ(0,"mat-tab-group",8),t.TgZ(1,"mat-tab",9),t.ALo(2,"trans"),t._UZ(3,"episodes-panel",10),t.qZA(),t.TgZ(4,"mat-tab",9),t.ALo(5,"trans"),t._UZ(6,"credits-panel",11),t.qZA(),t.TgZ(7,"mat-tab",9),t.ALo(8,"trans"),t._UZ(9,"credits-panel",12),t.qZA(),t.qZA()),2&l){const n=t.oxw().$implicit;t.xp6(1),t.Q6J("label",t.lcZ(2,6,"Episodes")),t.xp6(2),t.Q6J("season",n),t.xp6(1),t.Q6J("label",t.lcZ(5,8,"Regular Cast")),t.xp6(2),t.Q6J("mediaItem",n),t.xp6(1),t.Q6J("label",t.lcZ(8,10,"Regular Crew")),t.xp6(2),t.Q6J("mediaItem",n)}}function Ht(l,s){if(1&l){const n=t.EpF();t.TgZ(0,"mat-expansion-panel",4),t.ALo(1,"async"),t.TgZ(2,"mat-expansion-panel-header"),t.TgZ(3,"mat-panel-title"),t.TgZ(4,"span",5),t._uU(5,"Season"),t.qZA(),t._uU(6," \xa0 "),t.TgZ(7,"span"),t._uU(8),t.qZA(),t.qZA(),t.qZA(),t.YNc(9,Bt,10,12,"ng-template",6),t.TgZ(10,"mat-action-row"),t.TgZ(11,"button",7),t.NdJ("click",function(){const w=t.CHM(n).$implicit;return t.oxw(2).maybeDeleteSeason(w)}),t._uU(12,"Delete"),t.qZA(),t.qZA(),t.qZA()}if(2&l){const n=s.$implicit,c=t.oxw(2);t.Q6J("expanded",t.lcZ(1,3,c.activeSeason$)===n.number)("ngClass","season-"+n.number+"-panel"),t.xp6(8),t.Oqu(n.number)}}function Vt(l,s){1&l&&(t.TgZ(0,"no-results-message"),t.TgZ(1,"span",13),t._uU(2,"Nothing to Display."),t.qZA(),t.TgZ(3,"span",14),t._uU(4,"This series does not have any seasons yet."),t.qZA(),t.qZA())}function jt(l,s){if(1&l){const n=t.EpF();t.ynx(0),t.TgZ(1,"div",1),t.TgZ(2,"button",2),t.NdJ("click",function(){return t.CHM(n),t.oxw().addSeason()}),t.ALo(3,"async"),t._uU(4,"Add Season"),t.qZA(),t.qZA(),t.TgZ(5,"mat-accordion"),t.YNc(6,Ht,13,5,"mat-expansion-panel",3),t.qZA(),t.YNc(7,Vt,5,0,"no-results-message",0),t.BQk()}if(2&l){const n=s.ngIf,c=t.oxw();t.xp6(2),t.Q6J("disabled",t.lcZ(3,4,c.loading$)),t.xp6(4),t.Q6J("ngForOf",n)("ngForTrackBy",c.trackByFn),t.xp6(1),t.Q6J("ngIf",!n.length)}}class xt{constructor(s,n,c,Z,w){this.store=s,this.modal=n,this.toast=c,this.route=Z,this.el=w,this.activeSeason$=new O.X(1)}ngOnInit(){this.activeSeason$.next(+this.route.snapshot.params.seasonNumber||1)}ngAfterViewInit(){setTimeout(()=>{var s;this.activeSeason$.value>1&&(null===(s=this.el.nativeElement.querySelector(`.season-${this.activeSeason$.value}-panel`))||void 0===s||s.scrollIntoView({behavior:"smooth",block:"start",inline:"start"}))})}addSeason(){this.store.dispatch(new v.ZA).subscribe(()=>{this.toast.open(F.X.SEASON_CREATE_SUCCESS)})}maybeDeleteSeason(s){this.modal.open(z.z,{title:"Delete Season",body:"Are you sure you want to delete this season?",bodyBold:"This will also delete all episodes attached to this season.",ok:"Delete"}).afterClosed().subscribe(n=>{!n||this.store.dispatch(new v.ZE(s)).subscribe(()=>{this.toast.open(F.X.SEASON_DELETE_SUCCESS)})})}trackByFn(s,n){return n.id}}xt.\u0275fac=function(s){return new(s||xt)(t.Y36(d.yh),t.Y36(m.u),t.Y36(X.F),t.Y36(P.gz),t.Y36(t.SBq))},xt.\u0275cmp=t.Xpm({type:xt,selectors:[["seasons-panel"]],decls:2,vars:3,consts:[[4,"ngIf"],[1,"header"],["type","button","mat-raised-button","","color","accent",3,"disabled","click"],["class","mat-elevation-z0",3,"expanded","ngClass",4,"ngFor","ngForOf","ngForTrackBy"],[1,"mat-elevation-z0",3,"expanded","ngClass"],["trans",""],["matExpansionPanelContent",""],["type","button","mat-button","","trans","",3,"click"],["animationDuration","0ms","color","accent"],[3,"label"],[3,"season"],["type","cast",3,"mediaItem"],["type","crew",3,"mediaItem"],["primary-text","","trans",""],["secondary-text","","trans",""]],template:function(s,n){1&s&&(t.YNc(0,jt,8,6,"ng-container",0),t.ALo(1,"async")),2&s&&t.Q6J("ngIf",t.lcZ(1,1,n.seasons$))},directives:[e.O5,H.lW,h.pp,e.sg,h.ib,e.mk,h.yz,h.yK,x.P,h.HS,h.VG,N.SP,N.uX,Yt,Mt,mt.U],pipes:[e.Ov,ct.R],styles:["[_nghost-%COMP%]{display:block}[_nghost-%COMP%]     datatable-header{height:auto}.header[_ngcontent-%COMP%]{margin-bottom:20px}.mat-expansion-panel[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);border-radius:4px;margin-bottom:10px}.mat-expansion-panel[_ngcontent-%COMP%]   .mat-expansion-panel-header-title[_ngcontent-%COMP%]{font-weight:500;font-size:1.5rem}"],changeDetection:0}),(0,C.gn)([(0,d.Ph)(f.i.seasons)],xt.prototype,"seasons$",void 0),(0,C.gn)([(0,d.Ph)(f.i.loading)],xt.prototype,"loading$",void 0);var Wt=o(4770),Xt=o(2791);function zt(l,s){if(1&l){const n=t.EpF();t.TgZ(0,"div",4),t.NdJ("cdkDropListDropped",function(){return t.CHM(n),t.oxw().dropListDropped()}),t.TgZ(1,"media-image",7),t.NdJ("cdkDragMoved",function(Z){return t.CHM(n),t.oxw().dragMoved(Z)}),t.TgZ(2,"button",8),t.NdJ("click",function(){const w=t.CHM(n).$implicit;return t.oxw().deleteImage(w)}),t._UZ(3,"mat-icon",9),t.qZA(),t.qZA(),t.qZA()}if(2&l){const n=s.$implicit,c=t.oxw();t.Q6J("cdkDropListEnterPredicate",c.dropListEnterPredicate),t.xp6(1),t.Q6J("src",n.url)}}class Tt{constructor(s,n,c,Z){this.images=s,this.store=n,this.toast=c,this.viewportRuler=Z,this.dropListEnterPredicate=(w,G)=>{if(G===this.placeholder)return!0;if(G!==this.activeContainer)return!1;const ht=this.placeholder.element.nativeElement,_t=w.dropContainer.element.nativeElement,At=G.element.nativeElement,Jt=Ut(At.parentElement.children,this.source?ht:_t),Nt=Ut(At.parentElement.children,At);return this.source||(this.sourceIndex=Jt,this.source=w.dropContainer,ht.style.width=_t.clientWidth+"px",ht.style.height=_t.clientHeight+"px",_t.parentElement.removeChild(_t)),this.targetIndex=Nt,this.target=G,ht.style.display="",At.parentElement.insertBefore(ht,Nt>Jt?At.nextSibling:At),this.placeholder._dropListRef.enter(w._dragRef,w.element.nativeElement.offsetLeft,w.element.nativeElement.offsetTop),!1}}uploadImage(){(0,i.r)({types:[Y.j.image]}).then(s=>{const n={modelId:this.store.selectSnapshot(f.i.title).id};this.images.create(s[0],n).subscribe(c=>{this.store.dispatch(new v.t5(c.image)).subscribe(()=>{this.toast.open(F.X.IMAGE_CREATE_SUCCESS)})})})}deleteImage(s){this.store.dispatch(new v.oU(s)).subscribe(()=>{this.toast.open(F.X.IMAGE_DELETE_SUCCESS)})}dragMoved(s){const n=this.getPointerPositionOnPage(s.event);this.listGroup._items.forEach(c=>{(function(l,s,n){const{top:c,bottom:Z,left:w,right:G}=l.element.nativeElement.getBoundingClientRect();return n>=c&&n<=Z&&s>=w&&s<=G})(c,n.x,n.y)&&(this.activeContainer=c)})}dropListDropped(){if(!this.target)return;const s=this.placeholder.element.nativeElement,n=s.parentElement;s.style.display="none",n.removeChild(s),n.appendChild(s),n.insertBefore(this.source.element.nativeElement,n.children[this.sourceIndex]),this.target=null,this.source=null,this.sourceIndex!==this.targetIndex&&this.store.dispatch(new v.JN(this.sourceIndex,this.targetIndex))}getPointerPositionOnPage(s){const n=s.type.startsWith("touch")?s.touches[0]||s.changedTouches[0]:s,c=this.viewportRuler.getViewportScrollPosition();return{x:n.pageX-c.left,y:n.pageY-c.top}}}function Ut(l,s){return Array.prototype.indexOf.call(l,s)}Tt.\u0275fac=function(s){return new(s||Tt)(t.Y36(Wt.C),t.Y36(d.yh),t.Y36(X.F),t.Y36(Xt.rL))},Tt.\u0275cmp=t.Xpm({type:Tt,selectors:[["images-panel"]],viewQuery:function(s,n){if(1&s&&(t.Gf(B.Fd,5),t.Gf(B.Wj,5)),2&s){let c;t.iGM(c=t.CRH())&&(n.listGroup=c.first),t.iGM(c=t.CRH())&&(n.placeholder=c.first)}},features:[t._Bn([Q.A])],decls:9,vars:4,consts:[["mat-raised-button","","color","accent",3,"click"],["svgIcon","add"],["trans",""],["cdkDropListGroup",""],["cdkDropList","",3,"cdkDropListEnterPredicate","cdkDropListDropped"],[1,"images-grid"],["cdkDropList","",3,"cdkDropListEnterPredicate","cdkDropListDropped",4,"ngFor","ngForOf"],["cdkDrag","","size","medium","mode","landscape",1,"images-panel-media-image",3,"src","cdkDragMoved"],["mat-mini-fab","","color","warn",3,"click"],["svgIcon","delete"]],template:function(s,n){1&s&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return n.uploadImage()}),t._UZ(1,"mat-icon",1),t.TgZ(2,"span",2),t._uU(3,"Upload Image"),t.qZA(),t.qZA(),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.NdJ("cdkDropListDropped",function(){return n.dropListDropped()}),t.qZA(),t.TgZ(6,"div",5),t.YNc(7,zt,4,2,"div",6),t.ALo(8,"async"),t.qZA(),t.qZA()),2&s&&(t.xp6(5),t.Q6J("cdkDropListEnterPredicate",n.dropListEnterPredicate),t.xp6(2),t.Q6J("ngForOf",t.lcZ(8,2,n.images$)))},directives:[H.lW,tt.Hw,x.P,B.Fd,B.Wj,e.sg,L.P,B.Zt],pipes:[e.Ov],styles:[".mat-raised-button[_ngcontent-%COMP%]{display:block;margin-bottom:25px}.images-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-auto-rows:1fr;grid-gap:15px;overflow:hidden}media-image[_ngcontent-%COMP%]{display:block;box-shadow:0 3px 3px -2px #0003,0 3px 4px #00000024,0 1px 8px #0000001f;border-radius:4px;overflow:hidden;position:relative;cursor:move;transition:box-shadow .2s cubic-bezier(0,0,.2,1)}media-image[_ngcontent-%COMP%]:active{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f;opacity:.6}.mat-mini-fab[_ngcontent-%COMP%]{position:absolute;bottom:8px;right:8px}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:.3}.cdk-drag-preview[_ngcontent-%COMP%]{box-shadow:0 3px 5px -1px #0003,0 6px 10px #00000024,0 1px 18px #0000001f}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}"],changeDetection:0}),(0,C.gn)([(0,d.Ph)(f.i.images)],Tt.prototype,"images$",void 0);var te=o(3832),It=o(1134),ee=o(6966),ne=o(639),oe=o(3720),ae=o(9902),St=o(8293),ie=o(9051),Et=o(9243);function re(l,s){if(1&l){const n=t.EpF();t.TgZ(0,"form",9),t.NdJ("ngSubmit",function(){t.CHM(n);const Z=t.oxw();return Z.selectTagsFromString(Z.formControl.value)}),t.TgZ(1,"div",10),t._UZ(2,"input",11),t.TgZ(3,"button",12),t._uU(4,"Add"),t.qZA(),t.qZA(),t.qZA()}if(2&l){const n=t.oxw(),c=t.MAs(8);t.xp6(2),t.Q6J("matAutocomplete",c)("formControl",n.formControl)}}const wt=function(l){return{tagName:l}};function se(l,s){if(1&l&&(t.TgZ(0,"p",13),t._uU(1," Separate :tagName with comma.\n"),t.qZA()),2&l){const n=t.oxw();t.Q6J("transValues",t.VKq(1,wt,n.pluralName))}}function le(l,s){if(1&l){const n=t.EpF();t.TgZ(0,"mat-chip",14),t.NdJ("removed",function(){const w=t.CHM(n).$implicit;return t.oxw().deselectTag(w)}),t.TgZ(1,"span"),t._uU(2),t.qZA(),t._UZ(3,"mat-icon",15),t.qZA()}if(2&l){const n=s.$implicit,c=t.oxw();t.Q6J("removable",!c.readonly),t.xp6(2),t.Oqu(n)}}function ce(l,s){if(1&l){const n=t.EpF();t.TgZ(0,"div",20),t.NdJ("click",function(){const w=t.CHM(n).$implicit;return t.oxw(2).selectTags([w.name])}),t._uU(1),t.qZA()}if(2&l){const n=s.$implicit;t.xp6(1),t.hij(" ",n.display_name," ")}}function de(l,s){if(1&l&&(t.TgZ(0,"div",16),t.TgZ(1,"p",17),t._uU(2,"Choose from existing :tagName:"),t.qZA(),t.TgZ(3,"div",18),t.YNc(4,ce,2,1,"div",19),t.ALo(5,"async"),t.qZA(),t.qZA()),2&l){const n=t.oxw();t.xp6(1),t.Q6J("transValues",t.VKq(4,wt,n.pluralName)),t.xp6(3),t.Q6J("ngForOf",t.lcZ(5,2,n.existingTags$))}}function pe(l,s){if(1&l&&(t.TgZ(0,"mat-option",21),t._uU(1),t.qZA()),2&l){const n=s.$implicit;t.Q6J("value",n.name),t.xp6(1),t.Oqu(n.display_name)}}let ue=(()=>{class l{constructor(n){this.tagService=n,this.readonly=!1,this.pluralName="tags",this.formControl=new a.NI,this.selectedTags$=new O.X([]),this.existingTags$=new O.X([]),this.suggestedTags$=new O.X([])}ngOnInit(){this.tagService.index({perPage:15,type:this.tagType}).subscribe(n=>{this.existingTags$.next(n.pagination.data.filter(c=>"status"!==c.type))}),this.formControl.valueChanges.pipe((0,ne.b)(250),(0,oe.x)(),(0,ae.w)(n=>this.searchTags(n)),(0,St.K)(()=>(0,It.of)([]))).subscribe(n=>{this.suggestedTags$.next(n)})}writeValue(n){this.selectTags(n,{skipPropagate:!0,override:!0})}registerOnChange(n){this.propagateChange=n}registerOnTouched(){}selectTags(n,c={}){const Z=(n||[]).map(w=>w.trim()).filter(w=>!this.selectedTags$.value.includes(w));c.override?this.selectedTags$.next(Z):Z.length&&this.selectedTags$.next([...this.selectedTags$.value,...Z]),this.formControl.reset(),c.skipPropagate||this.propagateChange(this.selectedTags$.value)}deselectTag(n){const c=this.selectedTags$.value.slice();c.splice(c.indexOf(n),1),this.selectedTags$.next(c),this.propagateChange(this.selectedTags$.value)}selectTagsFromString(n){const c=n.split(",").map(Z=>(0,ee.V)(Z));this.selectTags(c)}searchTags(n){return n?this.tagService.index({query:n}).pipe((0,b.U)(c=>c.pagination.data)):(0,It.of)([])}}return l.\u0275fac=function(n){return new(n||l)(t.Y36(ie.i))},l.\u0275cmp=t.Xpm({type:l,selectors:[["tags-manager"]],inputs:{readonly:"readonly",tagType:"tagType",pluralName:"pluralName"},features:[t._Bn([{provide:a.JU,useExisting:l,multi:!0}])],decls:11,vars:10,consts:[["class","input-container","ngNativeValidate","",3,"ngSubmit",4,"ngIf"],["class","main-info","trans","",3,"transValues",4,"ngIf"],[1,"selected-tags"],[3,"selectable"],[3,"removable","removed",4,"ngFor","ngForOf"],["class","existing-tags",4,"ngIf"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["ngNativeValidate","",1,"input-container",3,"ngSubmit"],[1,"input-with-action"],["type","text","required","",1,"tags-string-input",3,"matAutocomplete","formControl"],["type","submit","mat-flat-button","","color","accent","trans","",1,"add-tags-button"],["trans","",1,"main-info",3,"transValues"],[3,"removable","removed"],["svgIcon","cancel","matChipRemove",""],[1,"existing-tags"],["trans","",3,"transValues"],[1,"existing-tags-list"],["class","existing-tag-name",3,"click",4,"ngFor","ngForOf"],[1,"existing-tag-name",3,"click"],[3,"value"]],template:function(n,c){1&n&&(t.YNc(0,re,5,2,"form",0),t.YNc(1,se,2,3,"p",1),t.TgZ(2,"div",2),t.TgZ(3,"mat-chip-list",3),t.YNc(4,le,4,2,"mat-chip",4),t.ALo(5,"async"),t.qZA(),t.qZA(),t.YNc(6,de,6,6,"div",5),t.TgZ(7,"mat-autocomplete",6,7),t.NdJ("optionSelected",function(w){return c.selectTags([w.option.value])}),t.YNc(9,pe,2,2,"mat-option",8),t.ALo(10,"async"),t.qZA()),2&n&&(t.Q6J("ngIf",!c.readonly),t.xp6(1),t.Q6J("ngIf",!c.readonly),t.xp6(2),t.Q6J("selectable",!1),t.xp6(1),t.Q6J("ngForOf",t.lcZ(5,6,c.selectedTags$)),t.xp6(2),t.Q6J("ngIf",!c.readonly),t.xp6(3),t.Q6J("ngForOf",t.lcZ(10,8,c.suggestedTags$)))},directives:[e.O5,Et.qn,e.sg,rt.XC,a.JL,a.F,rt.ZL,a.Fj,a.Q7,a.JJ,a.oH,H.lW,x.P,Et.HS,tt.Hw,Et.qH,dt.ey],pipes:[e.Ov],styles:["[_nghost-%COMP%]{display:block}.selected-tag[_ngcontent-%COMP%]{margin:0 10px 10px 0;display:inline-block}.main-info[_ngcontent-%COMP%]{margin-top:5px;font-size:1.3rem}.existing-tags[_ngcontent-%COMP%]{margin-top:25px}.existing-tags[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:5px;font-size:1.3rem;color:var(--be-secondary-text)}.existing-tags-list[_ngcontent-%COMP%]{border:1px solid var(--be-divider-default);padding:8px;height:78px;overflow:auto}.existing-tag-name[_ngcontent-%COMP%]{display:inline-block;margin-right:6px;color:var(--be-link);text-decoration:underline;font-size:1.2rem;cursor:pointer}"],changeDetection:0}),l})();const Dt=function(l){return{tagName:l}};let ge=(()=>{class l{constructor(n,c){this.dialogRef=n,this.data=c,this.selectedTagsControl=new a.NI,this.pluralName=this.data.pluralName||"tags"}close(){this.dialogRef.close()}confirm(){this.dialogRef.close(this.selectedTagsControl.value)}noTagsSelected(){var n;return!(null===(n=this.selectedTagsControl.value)||void 0===n?void 0:n.length)}}return l.\u0275fac=function(n){return new(n||l)(t.Y36(D.so),t.Y36(D.WI))},l.\u0275cmp=t.Xpm({type:l,selectors:[["tag-manager-modal"]],decls:12,vars:10,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",3,"transValues"],["type","button","mat-icon-button","","tabindex","-1",1,"close-button",3,"click"],["svgIcon","close"],[3,"tagType","pluralName","formControl"],["type","button","mat-button","","trans","",1,"cancel-button",3,"click"],["type","button","mat-raised-button","","color","accent","trans","",1,"submit-button",3,"disabled","transValues","click"]],template:function(n,c){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"h2",1),t._uU(2,"Select :tagName"),t.qZA(),t.TgZ(3,"button",2),t.NdJ("click",function(){return c.close()}),t._UZ(4,"mat-icon",3),t.qZA(),t.qZA(),t.TgZ(5,"mat-dialog-content"),t._UZ(6,"tags-manager",4),t.qZA(),t.TgZ(7,"mat-dialog-actions"),t.TgZ(8,"button",5),t.NdJ("click",function(){return c.close()}),t._uU(9,"Cancel"),t.qZA(),t.TgZ(10,"button",6),t.NdJ("click",function(){return c.confirm()}),t._uU(11,"Merge :tagName"),t.qZA(),t.qZA()),2&n&&(t.xp6(1),t.Q6J("transValues",t.VKq(6,Dt,c.pluralName)),t.xp6(5),t.Q6J("tagType",c.data.tagType)("pluralName",c.pluralName)("formControl",c.selectedTagsControl),t.xp6(4),t.Q6J("disabled",c.noTagsSelected())("transValues",t.VKq(8,Dt,c.pluralName)))},directives:[D.uh,x.P,H.lW,tt.Hw,D.xY,ue,a.JJ,a.oH,D.H8],styles:["[_nghost-%COMP%]{display:block;width:400px;max-width:100%}.mat-dialog-title[_ngcontent-%COMP%]{text-transform:capitalize}.submit-button[_ngcontent-%COMP%]{text-transform:capitalize}"],changeDetection:0}),l})();function me(l,s){if(1&l){const n=t.EpF();t.TgZ(0,"tr"),t.TgZ(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td",5),t.TgZ(6,"button",6),t.NdJ("click",function(){const w=t.CHM(n).$implicit;return t.oxw().detachTag(w)}),t._UZ(7,"mat-icon",7),t.qZA(),t.qZA(),t.qZA()}if(2&l){const n=s.$implicit;t.xp6(2),t.Oqu(n.name),t.xp6(2),t.Oqu(n.display_name||"-")}}function he(l,s){1&l&&(t.TgZ(0,"no-results-message",8),t.TgZ(1,"span",9),t._uU(2,"Nothing to display"),t.qZA(),t.qZA())}let fe=(()=>{class l{constructor(n,c,Z,w){this.store=n,this.modal=c,this.toast=Z,this.datatable=w}ngOnInit(){this.datatable.init(),this.getTagObservable().subscribe(c=>{this.datatable.data=c||[]})}ngOnDestroy(){this.datatable.destroy()}openTagManagerModal(){this.modal.open(ge,{tagType:this.type,pluralName:"production_country"===this.type?"countries":`${this.type}s`}).beforeClosed().subscribe(n=>{n&&n.length&&this.store.dispatch(new v.ej(n,this.type))})}detachTag(n){this.store.dispatch(new v.p_(n)).subscribe(()=>{this.toast.open(F.X.TAG_DETACH_SUCCESS)})}getTagObservable(){return this.store.select("keyword"===this.type?f.i.keywords:"genre"===this.type?f.i.genres:f.i.countries)}}return l.\u0275fac=function(n){return new(n||l)(t.Y36(d.yh),t.Y36(m.u),t.Y36(X.F),t.Y36(j.x))},l.\u0275cmp=t.Xpm({type:l,selectors:[["tags-panel"]],inputs:{type:"type",displayType:"displayType"},features:[t._Bn([j.x])],decls:18,vars:12,consts:[["mat-raised-button","","color","accent","leftContent","",3,"click"],[1,"material-table"],["table-sort-header","","trans",""],[4,"ngFor","ngForOf"],["svgImage","folder.svg",4,"ngIf"],[1,"edit-column"],["mat-icon-button","",3,"click"],["svgIcon","close"],["svgImage","folder.svg"],["primary-text","","trans",""]],template:function(n,c){1&n&&(t.TgZ(0,"datatable-header"),t.TgZ(1,"button",0),t.NdJ("click",function(){return c.openTagManagerModal()}),t._uU(2),t.ALo(3,"trans"),t.ALo(4,"trans"),t.qZA(),t.qZA(),t.TgZ(5,"table",1),t.TgZ(6,"thead"),t.TgZ(7,"tr"),t.TgZ(8,"th",2),t._uU(9,"Name"),t.qZA(),t.TgZ(10,"th",2),t._uU(11,"Display Name"),t.qZA(),t._UZ(12,"th"),t.qZA(),t.qZA(),t.TgZ(13,"tbody"),t.YNc(14,me,8,2,"tr",3),t.ALo(15,"async"),t.qZA(),t.qZA(),t.YNc(16,he,3,0,"no-results-message",4),t.ALo(17,"async")),2&n&&(t.xp6(2),t.AsE(" ",t.lcZ(3,4,"Add")," ",t.lcZ(4,6,c.displayType||c.type+"s")," "),t.xp6(12),t.Q6J("ngForOf",t.lcZ(15,8,c.datatable.data$)),t.xp6(2),t.Q6J("ngIf",!t.lcZ(17,10,c.datatable.data$).length))},directives:[A.G,H.lW,pt.p,x.P,e.sg,e.O5,tt.Hw,mt.U],pipes:[ct.R,e.Ov],styles:["[_nghost-%COMP%]{padding:0}"],changeDetection:0}),l})();var _e=o(7543);function ve(l,s){1&l&&t._UZ(0,"primary-facts-panel",15)}function be(l,s){1&l&&t._UZ(0,"seasons-panel",15)}function xe(l,s){1&l&&t._UZ(0,"images-panel",15)}function Ce(l,s){if(1&l&&t._UZ(0,"video-index",16),2&l){const n=t.oxw(2);t.Q6J("title",n.title)}}function Ze(l,s){if(1&l&&t._UZ(0,"credits-panel",17),2&l){const n=t.oxw(2);t.Q6J("mediaItem",n.title)}}function Te(l,s){if(1&l&&t._UZ(0,"credits-panel",18),2&l){const n=t.oxw(2);t.Q6J("mediaItem",n.title)}}function ye(l,s){1&l&&t._UZ(0,"tags-panel",19)}function Ae(l,s){1&l&&t._UZ(0,"tags-panel",20)}function Pe(l,s){1&l&&t._UZ(0,"tags-panel",21)}function Ie(l,s){if(1&l&&t._UZ(0,"reviews-index",16),2&l){const n=t.oxw(2);t.Q6J("title",n.title)}}function Oe(l,s){1&l&&(t.TgZ(0,"p",22),t._uU(1,'Save from "Primary Facts" panel in order to enable other menu items.'),t.qZA())}function Me(l,s){if(1&l){const n=t.EpF();t.ynx(0),t.YNc(1,ve,1,0,"primary-facts-panel",1),t.YNc(2,be,1,0,"seasons-panel",1),t.YNc(3,xe,1,0,"images-panel",1),t.YNc(4,Ce,1,1,"video-index",2),t.YNc(5,Ze,1,1,"credits-panel",3),t.YNc(6,Te,1,1,"credits-panel",4),t.YNc(7,ye,1,0,"tags-panel",5),t.YNc(8,Ae,1,0,"tags-panel",6),t.YNc(9,Pe,1,0,"tags-panel",7),t.YNc(10,Ie,1,1,"reviews-index",2),t.TgZ(11,"aside",8),t.TgZ(12,"div",9),t._uU(13,"Edit"),t.qZA(),t.TgZ(14,"div",10),t.TgZ(15,"button",11),t.NdJ("click",function(){return t.CHM(n),t.oxw().openPanel("primaryFacts")}),t._uU(16,"Primary Facts"),t.qZA(),t.TgZ(17,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().openPanel("seasons")}),t._uU(18,"Seasons"),t.qZA(),t.TgZ(19,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().openPanel("images")}),t._uU(20,"Images"),t.qZA(),t.TgZ(21,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().openPanel("videos")}),t._uU(22,"Videos"),t.qZA(),t.TgZ(23,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().openPanel("cast")}),t._uU(24,"Cast"),t.qZA(),t.TgZ(25,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().openPanel("crew")}),t._uU(26,"Crew"),t.qZA(),t.TgZ(27,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().openPanel("genres")}),t._uU(28,"Genres"),t.qZA(),t.TgZ(29,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().openPanel("keywords")}),t._uU(30,"Keywords"),t.qZA(),t.TgZ(31,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().openPanel("countries")}),t._uU(32,"Countries"),t.qZA(),t.TgZ(33,"button",12),t.NdJ("click",function(){return t.CHM(n),t.oxw().openPanel("reviews")}),t._uU(34,"Reviews"),t.qZA(),t.qZA(),t.YNc(35,Oe,2,0,"p",13),t.qZA(),t._UZ(36,"loading-indicator",14),t.ALo(37,"async"),t.BQk()}if(2&l){const n=s.ngIf,c=t.oxw();t.xp6(1),t.Q6J("ngIf","primaryFacts"===n),t.xp6(1),t.Q6J("ngIf","seasons"===n),t.xp6(1),t.Q6J("ngIf","images"===n),t.xp6(1),t.Q6J("ngIf","videos"===n),t.xp6(1),t.Q6J("ngIf","cast"===n),t.xp6(1),t.Q6J("ngIf","crew"===n),t.xp6(1),t.Q6J("ngIf","keywords"===n),t.xp6(1),t.Q6J("ngIf","genres"===n),t.xp6(1),t.Q6J("ngIf","countries"===n),t.xp6(1),t.Q6J("ngIf","reviews"===n),t.xp6(5),t.ekj("active","primaryFacts"===n),t.xp6(2),t.ekj("active","seasons"===n),t.Q6J("disabled",!c.titleCreated()),t.xp6(2),t.ekj("active","images"===n),t.Q6J("disabled",!c.titleCreated()),t.xp6(2),t.ekj("active","videos"===n),t.Q6J("disabled",!c.titleCreated()),t.xp6(2),t.ekj("active","cast"===n),t.Q6J("disabled",!c.titleCreated()),t.xp6(2),t.ekj("active","crew"===n),t.Q6J("disabled",!c.titleCreated()),t.xp6(2),t.ekj("active","genres"===n),t.Q6J("disabled",!c.titleCreated()),t.xp6(2),t.ekj("active","keywords"===n),t.Q6J("disabled",!c.titleCreated()),t.xp6(2),t.ekj("active","countries"===n),t.Q6J("disabled",!c.titleCreated()),t.xp6(2),t.ekj("active","reviews"===n),t.Q6J("disabled",!c.titleCreated()),t.xp6(2),t.Q6J("ngIf",!c.titleCreated()),t.xp6(1),t.Q6J("isVisible",t.lcZ(37,41,c.loading$))}}class yt{constructor(s,n,c){this.store=s,this.router=n,this.route=c,this.activePanel$=new O.X("primaryFacts")}ngOnInit(){this.route.data.subscribe(s=>{var n,c;this.store.dispatch(new v.RK(null===(n=s.api)||void 0===n?void 0:n.title)),this.title=null===(c=s.api)||void 0===c?void 0:c.title}),this.route.queryParams.subscribe(s=>{this.activePanel$.next(s.active||"primaryFacts")}),this.route.snapshot.params.seasonNumber&&this.activePanel$.next("seasons")}ngOnDestroy(){this.store.dispatch(new v.AN)}openPanel(s){this.router.navigate([],{queryParams:{active:s}})}titleCreated(){return!!this.store.selectSnapshot(f.i.title).id}}yt.\u0275fac=function(s){return new(s||yt)(t.Y36(d.yh),t.Y36(P.F0),t.Y36(P.gz))},yt.\u0275cmp=t.Xpm({type:yt,selectors:[["crupdate-title"]],decls:2,vars:3,consts:[[4,"ngIf"],["class","material-panel crupdate-title-panel",4,"ngIf"],["class","material-panel crupdate-title-panel",3,"title",4,"ngIf"],["class","material-panel crupdate-title-panel","type","cast",3,"mediaItem",4,"ngIf"],["class","material-panel crupdate-title-panel","type","crew",3,"mediaItem",4,"ngIf"],["class","material-panel crupdate-title-panel","type","keyword",4,"ngIf"],["class","material-panel crupdate-title-panel","type","genre",4,"ngIf"],["class","material-panel crupdate-title-panel","type","production_country","displayType","country",4,"ngIf"],[1,"sidebar","material-panel"],["trans","",1,"header"],[1,"list"],["trans","",1,"list-item","no-style",3,"click"],["trans","",1,"list-item","no-style",3,"disabled","click"],["class","message","trans","",4,"ngIf"],[1,"overlay",3,"isVisible"],[1,"material-panel","crupdate-title-panel"],[1,"material-panel","crupdate-title-panel",3,"title"],["type","cast",1,"material-panel","crupdate-title-panel",3,"mediaItem"],["type","crew",1,"material-panel","crupdate-title-panel",3,"mediaItem"],["type","keyword",1,"material-panel","crupdate-title-panel"],["type","genre",1,"material-panel","crupdate-title-panel"],["type","production_country","displayType","country",1,"material-panel","crupdate-title-panel"],["trans","",1,"message"]],template:function(s,n){1&s&&(t.YNc(0,Me,38,43,"ng-container",0),t.ALo(1,"async")),2&s&&t.Q6J("ngIf",t.lcZ(1,1,n.activePanel$))},directives:[e.O5,x.P,g.Q,J,xt,Tt,te.r,Mt,fe,_e.Q],pipes:[e.Ov],styles:[".be-dark-mode crupdate-title .sidebar .header{background-color:transparent;border-bottom:1px solid var(--be-divider-default)}crupdate-title{display:flex;align-items:flex-start;width:100%}crupdate-title .material-panel{flex:1 1 auto;min-height:412px}crupdate-title .material-panel form>.input-container,crupdate-title .material-panel .inline-container{margin-bottom:25px}crupdate-title video-index.material-panel{padding:0}crupdate-title video-index .datatable{border:none}crupdate-title video-index h1{display:none}crupdate-title video-index .datatable-page-header{padding:15px 15px 0}crupdate-title .inline-container{display:flex}crupdate-title .inline-container .input-container{flex:1 1 auto}crupdate-title .inline-container .input-container.size-small{flex:1 1 30%}crupdate-title .inline-container .input-container:first-of-type{margin-right:15px}crupdate-title .sidebar{flex:0 0 260px;margin-left:30px;padding:0;overflow:hidden}crupdate-title .sidebar .header{background-color:var(--be-primary-default);color:var(--be-accent-contrast);padding:15px 20px;font-size:1.6rem;font-weight:500}crupdate-title .sidebar .list .list-item{display:block;width:100%;padding:10px 20px;white-space:nowrap;text-transform:capitalize}crupdate-title .sidebar .list .list-item:disabled{color:var(--be-hint-text);cursor:default}crupdate-title .sidebar .list .list-item.active{font-weight:500}crupdate-title .sidebar .list .list-item:not(:disabled):hover{cursor:pointer}crupdate-title .sidebar .message{margin:8px 20px;padding-top:8px;font-size:1.3rem;color:var(--be-secondary-text);border-top:1px solid var(--be-divider-lighter)}@media only screen and (max-width: 768px){crupdate-title{display:block}crupdate-title primary-facts-panel.material-panel{border:none}crupdate-title primary-facts-panel.material-panel .poster-container{display:block}crupdate-title primary-facts-panel.material-panel .many-inputs{margin-left:0}crupdate-title primary-facts-panel.material-panel img{margin:0 auto 20px}crupdate-title .sidebar{margin:30px 20px 0}crupdate-title .inline-container{display:block}crupdate-title .inline-container .input-container:first-of-type{margin-bottom:20px}}.crupdate-title-panel .table-header,crupdate-episode-modal .table-header{display:flex;align-items:center;margin-bottom:15px}.crupdate-title-panel .table-header .mat-raised-button,crupdate-episode-modal .table-header .mat-raised-button{text-transform:capitalize}.crupdate-title-panel .table-header .input-container,crupdate-episode-modal .table-header .input-container{max-width:300px;margin-left:auto;position:relative}.crupdate-title-panel .table-header .input-container .mat-icon,crupdate-episode-modal .table-header .input-container .mat-icon{position:absolute;top:11px;right:8px}.crupdate-title-panel no-results-message,crupdate-episode-modal no-results-message{margin-top:50px;margin-bottom:50px}.crupdate-title-panel .mat-column-edit,crupdate-episode-modal .mat-column-edit{max-width:100px;color:var(--be-secondary-text)}\n"],encapsulation:2,changeDetection:0}),(0,C.gn)([(0,d.Ph)(f.i.loading)],yt.prototype,"loading$",void 0);var Ee=o(5816),Ft=o(8117);const Ue=[{path:"",component:yt,resolve:{api:(()=>{class l{constructor(n,c,Z){this.router=n,this.store=c,this.titles=Z}resolve(n,c){return n.params.titleId?this.titles.get(n.params.titleId,{fullCredits:!0,keywords:!0,countries:!0,seasons:!0,skipUpdating:!0,allVideos:!0}).pipe((0,St.K)(()=>(this.router.navigate(this.fallbackUri(c)),Ft.E)),(0,Ee.zg)(G=>G?(0,It.of)(G):(this.router.navigate(this.fallbackUri(c)),Ft.E))):(0,It.of)(null)}fallbackUri(n){return n.url.includes("admin")?["/admin/titles"]:[n.url.replace("/edit","")]}}return l.\u0275fac=function(n){return new(n||l)(t.LFG(P.F0),t.LFG(d.yh),t.LFG(E.d))},l.\u0275prov=t.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},data:{permissions:["titles.update"]}}];let Se=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[[P.Bz.forChild(Ue)],P.Bz]}),l})();var we=o(9866),De=o(5217),Fe=o(6895),Je=o(8097),Ne=o(3389),ke=o(3224),Qe=o(557),Re=o(2544),$e=o(5500),qe=o(365);let Le=(()=>{class l{}return l.\u0275fac=function(n){return new(n||l)},l.\u0275mod=t.oAB({type:l}),l.\u0275inj=t.cJS({imports:[[e.ez,Se,we.N,a.u5,a.UX,De.u,Fe.M,Je.X,Ne.p,ke.n,Qe.x,Re.S,$e.z,H.ot,tt.Ps,it.AV,D.Is,N.Nh,st.Ky,h.To,B._t,rt.Bb,qe.Cv]]}),l})()},9051:(et,k,o)=>{o.d(k,{i:()=>C});var e=o(2316),P=o(299);let C=(()=>{class d{constructor(f){this.http=f}index(f){return this.http.get(d.BASE_URI,f)}create(f){return this.http.post(d.BASE_URI,f)}update(f,O){return this.http.put(`${d.BASE_URI}/${f}`,O)}delete(f){return this.http.delete(`${d.BASE_URI}/${f}`)}}return d.BASE_URI="tags",d.\u0275fac=function(f){return new(f||d)(e.LFG(P.r))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()},8697:(et,k,o)=>{o.d(k,{L:()=>e});const e="user"},2544:(et,k,o)=>{o.d(k,{S:()=>x});var e=o(4364),P=o(781),C=o(2529),d=o(221),v=o(9866),f=o(1707),O=o(3389),t=o(2316);let x=(()=>{class g{}return g.\u0275fac=function(Q){return new(Q||g)},g.\u0275mod=t.oAB({type:g}),g.\u0275inj=t.cJS({imports:[[e.ez,P.ot,d.Tx,v.N,f.UX,C.Ps,O.p]]}),g})()},4889:(et,k,o)=>{function e(P){const C=Object.assign({},P);return Object.keys(C).forEach(d=>{(null==C[d]||""===C[d])&&delete C[d]}),C}o.d(k,{N:()=>e})},1176:(et,k,o)=>{o.d(k,{r:()=>t});var e=o(2316),P=o(8842),C=o(4364),d=o(6798);function v(x,g){if(1&x&&(e.TgZ(0,"a",4),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",5),e._uU(4),e.qZA(),e.qZA()),2&x){const a=e.oxw(2);e.Q6J("routerLink",a.url.generate(a.user)),e.xp6(2),e.Oqu(a.user.display_name),e.xp6(2),e.Oqu(a.user.email)}}function f(x,g){if(1&x&&(e.TgZ(0,"div",6),e.TgZ(1,"div"),e._uU(2),e.qZA(),e.TgZ(3,"div",5),e._uU(4),e.qZA(),e.qZA()),2&x){const a=e.oxw(2);e.xp6(2),e.Oqu(a.user.display_name),e.xp6(2),e.Oqu(a.user.email)}}function O(x,g){if(1&x&&(e.ynx(0),e._UZ(1,"img",1),e.YNc(2,v,5,3,"a",2),e.YNc(3,f,5,2,"div",3),e.BQk()),2&x){const a=e.oxw();e.xp6(1),e.Q6J("src",a.user.avatar,e.LSH),e.xp6(1),e.Q6J("ngIf",a.haveUrl),e.xp6(1),e.Q6J("ngIf",!a.haveUrl)}}let t=(()=>{class x{constructor(a){this.url=a,this.showEmail=!1,this.haveUrl=!!a.user}}return x.\u0275fac=function(a){return new(a||x)(e.Y36(P.o))},x.\u0275cmp=e.Xpm({type:x,selectors:[["user-column"]],hostAttrs:[1,"column-with-image"],inputs:{user:"user",showEmail:"showEmail"},decls:1,vars:1,consts:[[4,"ngIf"],["alt","",3,"src"],["target","_blank","class","link content",3,"routerLink",4,"ngIf"],["class","content",4,"ngIf"],["target","_blank",1,"link","content",3,"routerLink"],[1,"email","secondary"],[1,"content"]],template:function(a,Q){1&a&&e.YNc(0,O,4,3,"ng-container",0),2&a&&e.Q6J("ngIf",Q.user)},directives:[C.O5,d.yS],styles:[""],changeDetection:0}),x})()},3054:(et,k,o)=>{o.d(k,{h:()=>Pt});var e=o(2316),P=o(6142),C=o(1143),d=o(3927),v=o(3720),f=o(9170),O=o(6491),t=o(9097),x=o(9919),g=o(2516),a=o(5515),Q=o(4364),i=o(2529);const Y=["filterSuggestion"];function M(p,y){if(1&p){const r=e.EpF();e.TgZ(0,"div",8,9),e.NdJ("click",function(){const K=e.CHM(r).$implicit;return e.oxw().filterSelected.emit(K.value)}),e.TgZ(2,"div",10),e._uU(3),e.qZA(),e.TgZ(4,"div",2),e._uU(5),e.qZA(),e.qZA()}if(2&p){const r=y.$implicit,u=y.index;e.uIk("data-filter-key",r.key)("data-index",u),e.xp6(3),e.Oqu(r.value.label),e.xp6(2),e.Oqu(r.value.description)}}let q=(()=>{class p{constructor(){this.filterSelected=new e.vpe,this.originalOrder=()=>0}anyFocused(){return document.activeElement.classList.contains("filter-suggestion-item")}focusItemAt(r){this.items.get(r).nativeElement.focus()}getFocusedFilter(){if(this.anyFocused()){const r=document.activeElement.dataset.filterKey;return this.filters[r]}}getFocusedIndex(){if(this.anyFocused()){const r=document.activeElement;return parseInt(r.dataset.index)}}}return p.\u0275fac=function(r){return new(r||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["filter-suggestions"]],viewQuery:function(r,u){if(1&r&&e.Gf(Y,5),2&r){let _;e.iGM(_=e.CRH())&&(u.items=_)}},inputs:{filters:"filters"},outputs:{filterSelected:"filterSelected"},decls:13,vars:4,consts:[[1,"table"],[1,"filter-suggestion-header","row"],["trans","",1,"column"],["role","list",1,"body"],["role","listitem","class","row filter-suggestion-item","tabindex","0",3,"click",4,"ngFor","ngForOf"],[1,"help-container"],["svgIcon","info"],["trans",""],["role","listitem","tabindex","0",1,"row","filter-suggestion-item",3,"click"],["filterSuggestion",""],["trans","",1,"column","label-column"]],template:function(r,u){1&r&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e._uU(3,"Field"),e.qZA(),e.TgZ(4,"div",2),e._uU(5,"Description"),e.qZA(),e.qZA(),e.TgZ(6,"div",3),e.YNc(7,M,6,4,"div",4),e.ALo(8,"keyvalue"),e.qZA(),e.qZA(),e.TgZ(9,"div",5),e._UZ(10,"mat-icon",6),e.TgZ(11,"div",7),e._uU(12," Use arrows, tab or mouse to navigate added filters. Backspace or delete key to remove them. "),e.qZA(),e.qZA()),2&r&&(e.xp6(7),e.Q6J("ngForOf",e.xi3(8,1,u.filters,u.originalOrder)))},directives:[a.P,Q.sg,i.Hw],pipes:[Q.Nd],styles:["[_nghost-%COMP%]{display:none;position:absolute;left:0;z-index:10;background-color:var(--be-background);width:100%;border-radius:4px;overflow:hidden;color:var(--be-text);box-shadow:0 3px 5px -1px #0003,0 5px 8px #00000024,0 1px 14px #0000001f}.visible[_nghost-%COMP%]{display:block}.filter-suggestion-header[_ngcontent-%COMP%]{background-color:var(--be-background-alternative)}.row[_ngcontent-%COMP%]{display:flex;height:55px;padding:15px;border-bottom:1px solid var(--be-divider-lighter)}.row[_ngcontent-%COMP%]:not(.header){cursor:pointer}.row[_ngcontent-%COMP%]:not(.header):hover{background-color:var(--be-hover)}.row[_ngcontent-%COMP%]:not(.header):focus{background-color:var(--be-hover);outline:none}.column[_ngcontent-%COMP%]{flex:0 0 48%}.label-column[_ngcontent-%COMP%]{text-transform:capitalize}.help-container[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;background-color:var(--be-accent-emphasis)}.help-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:10px;color:var(--be-accent-default)}"],changeDetection:0}),p})();var F=o(8480),ot=o(223),E=o(1707),X=o(5381);function L(p,y){if(1&p&&(e.ynx(0),e._UZ(1,"img",2),e.TgZ(2,"div",3),e._uU(3),e.qZA(),e.BQk()),2&p){const r=y.ngIf;e.xp6(1),e.Q6J("src",r.image,e.LSH),e.xp6(2),e.Oqu(r.name)}}function H(p,y){1&p&&(e.TgZ(0,"div",4),e._uU(1,"Click to select"),e.qZA())}let it=(()=>{class p{constructor(r){this.dialog=r,this.value$=new O.X(null)}registerOnChange(r){this.propagateChange=r}registerOnTouched(r){}writeValue(r){this.value$.next(r)}onClick(){this.openSelectModelDialog()}openSelectModelDialog(){this.dialog.open(this.filter.component,this.filter.componentData).afterClosed().subscribe(r=>{r&&(this.value$.next(r),this.propagateChange(r))})}}return p.\u0275fac=function(r){return new(r||p)(e.Y36(X.u))},p.\u0275cmp=e.Xpm({type:p,selectors:[["select-model-control"]],hostBindings:function(r,u){1&r&&e.NdJ("click",function(){return u.onClick()})},inputs:{filter:"filter"},features:[e._Bn([{provide:E.JU,useExisting:p,multi:!0}])],decls:4,vars:4,consts:[[4,"ngIf","ngIfElse"],["defaultHint",""],[1,"image",3,"src"],[1,"name"],["trans",""]],template:function(r,u){if(1&r&&(e.YNc(0,L,4,2,"ng-container",0),e.ALo(1,"async"),e.YNc(2,H,2,0,"ng-template",null,1,e.W1O)),2&r){const _=e.MAs(3);e.Q6J("ngIf",e.lcZ(1,2,u.value$))("ngIfElse",_)}},directives:[Q.O5,a.P],pipes:[Q.Ov],styles:["[_nghost-%COMP%]{display:flex;align-items:center;padding:0 8px;cursor:pointer}img[_ngcontent-%COMP%]{height:22px;width:22px;border-radius:4px;margin-right:8px;flex-shrink:0;object-fit:cover}"],changeDetection:0}),p})();const tt={"=":"is","!=":"is not",">":"is greater than",">=":"is greater than or equal to","<":"is less than","<=":"is less than or equal to",has:"Include",doesntHave:"Do not include"};var st=o(6605);let ct=(()=>{class p{constructor(r){this.breakpoints=r}transform(r,u){return u||this.breakpoints.isMobile$.value?r:tt[r]}}return p.\u0275fac=function(r){return new(r||p)(e.Y36(st.S,16))},p.\u0275pipe=e.Yjl({name:"operatorDisplayName",type:p,pure:!0}),p})();const ut=["select"];function gt(p,y){if(1&p&&(e.TgZ(0,"option",4),e._uU(1),e.ALo(2,"operatorDisplayName"),e.qZA()),2&p){const r=y.$implicit,u=e.oxw();e.Q6J("value",r),e.xp6(1),e.hij(" ",e.xi3(2,2,r,u.compact)," ")}}let J=(()=>{class p{ngAfterViewInit(){this.resizeSelect()}resizeSelect(){var r;const u=null===(r=this.select)||void 0===r?void 0:r.nativeElement;u&&u.selectedIndex>-1&&(u.style.width=`${u.options[u.selectedIndex].label.length+5}ch`)}}return p.\u0275fac=function(r){return new(r||p)},p.\u0275cmp=e.Xpm({type:p,selectors:[["operator-select"]],viewQuery:function(r,u){if(1&r&&e.Gf(ut,5),2&r){let _;e.iGM(_=e.CRH())&&(u.select=_.first)}},inputs:{compact:"compact",formGroup:"formGroup",operators:"operators"},decls:4,vars:2,consts:[[3,"formGroup"],["formControlName","operator",1,"operator-select",3,"ngModelChange"],["select",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(r,u){1&r&&(e.ynx(0,0),e.TgZ(1,"select",1,2),e.NdJ("ngModelChange",function(){return u.resizeSelect()}),e.YNc(3,gt,3,5,"option",3),e.qZA(),e.BQk()),2&r&&(e.Q6J("formGroup",u.formGroup),e.xp6(3),e.Q6J("ngForOf",u.operators))},directives:[E.JL,E.sg,E.EJ,E.JJ,E.u,Q.sg,E.YN,E.Kr],pipes:[ct],styles:['[_nghost-%COMP%]{display:flex;align-items:center;position:relative;height:100%}[_nghost-%COMP%]:before{content:"";position:absolute;top:0;bottom:0;width:50%;left:0;background-color:var(--be-chip)}[_nghost-%COMP%]:after{content:"";position:absolute;top:0;bottom:0;width:50%;right:0;background-color:var(--be-accent-default)}.operator-select[_ngcontent-%COMP%]{transition:width .1s ease-in-out 0s;padding:2px 8px;min-width:60px;max-width:200px;height:27px;color:var(--be-accent-default);z-index:10;background-color:var(--be-accent-contrast);text-overflow:ellipsis;-webkit-appearance:none;-moz-appearance:none;appearance:none;border-radius:10px;text-align-last:center;border:1px solid transparent}.operator-select[_ngcontent-%COMP%]:focus-visible{outline:0;border-color:var(--be-accent-default);box-shadow:0 0 0 1px #fff}'],changeDetection:0}),p})();const z=["valueInput"];function m(p,y){if(1&p&&e._UZ(0,"operator-select",8),2&p){const r=e.oxw().ngIf,u=e.oxw();e.Q6J("compact",u.compact)("formGroup",r)("operators",u.filter.operators)}}function h(p,y){if(1&p&&(e.TgZ(0,"option",16),e._uU(1),e.qZA()),2&p){const r=y.$implicit;e.Q6J("ngValue",r.value),e.xp6(1),e.hij(" ",r.key||r.value," ")}}function N(p,y){if(1&p){const r=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"select",10,11),e.NdJ("ngModelChange",function(){return e.CHM(r),e.oxw(2).resizeInput()}),e.YNc(3,h,2,2,"option",12),e.qZA(),e.O4$(),e.TgZ(4,"svg",13),e._UZ(5,"path",14),e._UZ(6,"path",15),e.qZA(),e.qZA()}if(2&p){const r=e.oxw(2);e.xp6(1),e.Q6J("id",r.key)("compareWith",r.compareFilterValueFn),e.xp6(2),e.Q6J("ngForOf",r.filter.options)}}function D(p,y){if(1&p&&(e.TgZ(0,"div",17),e._UZ(1,"input",18,11),e.qZA()),2&p){const r=e.oxw(2);e.xp6(1),e.Q6J("id",r.key)}}function T(p,y){if(1&p&&e._UZ(0,"select-model-control",19,11),2&p){const r=e.oxw(2);e.Q6J("filter",r.filter)("id",r.key)}}function R(p,y){if(1&p){const r=e.EpF();e.TgZ(0,"div",9),e.TgZ(1,"input",20,11),e.NdJ("ngModelChange",function(){return e.CHM(r),e.oxw(2).resizeInput()}),e.qZA(),e.qZA()}if(2&p){const r=e.oxw(2);e.xp6(1),e.Q6J("id",r.key)("type",r.filter.inputType||"text")}}function b(p,y){if(1&p){const r=e.EpF();e.ynx(0,1),e.TgZ(1,"div",2),e.NdJ("click",function(){return e.CHM(r),e.oxw().el.nativeElement.focus()}),e._uU(2),e.qZA(),e.YNc(3,m,1,3,"operator-select",3),e.ynx(4,4),e.YNc(5,N,7,3,"div",5),e.YNc(6,D,3,1,"div",6),e.YNc(7,T,2,2,"select-model-control",7),e.YNc(8,R,3,2,"div",5),e.BQk(),e.BQk()}if(2&p){const r=y.ngIf,u=e.oxw();e.Q6J("formGroup",r),e.xp6(2),e.Oqu(u.filter.label),e.xp6(1),e.Q6J("ngIf",u.filter.operators),e.xp6(1),e.Q6J("ngSwitch",u.filter.type),e.xp6(1),e.Q6J("ngSwitchCase","select"),e.xp6(1),e.Q6J("ngSwitchCase","datePicker"),e.xp6(1),e.Q6J("ngSwitchCase","selectModel"),e.xp6(1),e.Q6J("ngSwitchCase","input")}}let S=(()=>{class p{constructor(r){this.el=r,this.compareFilterValueFn=(u,_)=>ot(u,_)}ngAfterViewInit(){this.resizeInput()}focus(){this.el.nativeElement.focus()}focusValueInput(){var r;this.valueInput instanceof it?this.valueInput.openSelectModelDialog():(null===(r=this.valueInput)||void 0===r?void 0:r.nativeElement)&&this.valueInput.nativeElement.focus()}resizeInput(){var r;const u=null===(r=this.valueInput)||void 0===r?void 0:r.nativeElement;if("SELECT"===(null==u?void 0:u.nodeName)){const _=u;_.selectedIndex>-1&&(_.style.width=`${_.options[_.selectedIndex].label.length+5}ch`)}else"INPUT"===(null==u?void 0:u.nodeName)&&"date"!==u.type&&(u.style.width=`${u.value.length+7}ch`)}}return p.\u0275fac=function(r){return new(r||p)(e.Y36(e.SBq))},p.\u0275cmp=e.Xpm({type:p,selectors:[["active-filter"]],viewQuery:function(r,u){if(1&r&&e.Gf(z,5),2&r){let _;e.iGM(_=e.CRH())&&(u.valueInput=_.first)}},hostAttrs:["tabIndex","0","role","button"],hostVars:1,hostBindings:function(r,u){2&r&&e.uIk("data-control-key",u.key)},inputs:{key:"key",compact:"compact",form:"form",filter:"filter"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["trans","",1,"filter-label",3,"click"],[3,"compact","formGroup","operators",4,"ngIf"],[3,"ngSwitch"],["class","filter-input-container",4,"ngSwitchCase"],["class","date-picker-container",4,"ngSwitchCase"],["formControlName","value","class","filter-value select-model-input",3,"filter","id",4,"ngSwitchCase"],[3,"compact","formGroup","operators"],[1,"filter-input-container"],["formControlName","value",1,"filter-input","filter-value",3,"id","compareWith","ngModelChange"],["valueInput",""],["trans","",3,"ngValue",4,"ngFor","ngForOf"],["viewBox","0 0 24 24",1,"caret-svg"],["d","M7 10l5 5 5-5z"],["d","M0 0h24v24H0z","fill","none"],["trans","",3,"ngValue"],[1,"date-picker-container"],["type","date","formControlName","value",1,"date-input","filter-value",3,"id"],["formControlName","value",1,"filter-value","select-model-input",3,"filter","id"],["formControlName","value","min","1","required","",1,"filter-input","filter-value",3,"id","type","ngModelChange"]],template:function(r,u){1&r&&e.YNc(0,b,9,8,"ng-container",0),2&r&&e.Q6J("ngIf",u.form.controls[u.key])},directives:[Q.O5,E.JL,E.sg,a.P,Q.RF,Q.n9,J,E.EJ,E.JJ,E.u,Q.sg,E.YN,E.Kr,E.Fj,it,E.Q7],styles:["[_nghost-%COMP%]{display:inline-flex;align-items:flex-start;border-radius:4px;height:37px;background-color:var(--be-chip);margin:3px 5px 3px 0}[_nghost-%COMP%]:focus{outline:none;box-shadow:var(--be-accent-default) 0 0 0 1px}.filter-label[_ngcontent-%COMP%]{color:var(--be-text);line-height:37px;cursor:pointer;padding:0 12px;text-transform:capitalize;white-space:nowrap;font-weight:500;-webkit-user-select:none;user-select:none}.filter-input-container[_ngcontent-%COMP%]{position:relative;height:100%;overflow:hidden;border-radius:0 4px 4px 0}.caret-svg[_ngcontent-%COMP%]{position:absolute;top:9.5px;right:5px;z-index:11;fill:var(--be-accent-contrast);width:18px;height:18px;pointer-events:none}.filter-input[_ngcontent-%COMP%]{border:0;transition:width .1s ease-in-out 0s;padding:0 12px;min-width:60px;max-width:200px;z-index:10;text-overflow:ellipsis;-webkit-appearance:none;-moz-appearance:none;appearance:none;height:100%;font-weight:500}select.filter-select[_ngcontent-%COMP%]{padding:0 25px 0 12px}.date-input[_ngcontent-%COMP%]{position:relative;max-width:30ch;line-height:37px;height:37px;font-size:inherit;border:none;margin:0;padding:0 12px;width:20ch;font-weight:500}.select-model-input[_ngcontent-%COMP%]{min-width:76px;height:100%}.filter-value[_ngcontent-%COMP%]{background-color:var(--be-accent-default);color:var(--be-accent-contrast);border-radius:0 4px 4px 0}"],changeDetection:0}),p})();function nt(p,y){if(1&p&&e._UZ(0,"active-filter",2),2&p){const r=y.ngIf,u=e.oxw(),_=u.$implicit,K=u.index,ft=e.oxw();e.Q6J("compact",ft.compact)("key",_.key)("form",ft.form)("filter",r),e.uIk("data-index",K)}}function rt(p,y){if(1&p&&(e.ynx(0),e.YNc(1,nt,1,5,"active-filter",1),e.BQk()),2&p){const r=y.$implicit,u=e.oxw();e.xp6(1),e.Q6J("ngIf",u.config[r.value.value.key])}}const dt=["*"];let V=(()=>{class p{constructor(r,u,_){this.fb=r,this.cd=u,this.el=_}add(r,u={}){const _=void 0!==u.value?u.value:r.defaultValue,K=this.fb.group({key:r.key,value:_,operator:u.operator||r.defaultOperator}),ft=Object.keys(this.form.controls).length+(0,F.O)(8);this.form.addControl(ft,K,{emitEvent:""!==_}),this.cd.detectChanges(),u.focus&&this.filters.last.focusValueInput()}removeByKey(r){this.form.removeControl(r),this.cd.markForCheck()}removeCurrentlyFocused(){const r=document.activeElement;this.removeByKey(r.dataset.controlKey)}anyFocused(){return"ACTIVE-FILTER"===document.activeElement.nodeName}focusLast(){this.filters.last&&this.filters.last.focus()}focusPrevious(){const r=this.getFocusedIndex(),u=this.filters.get(r-1);u&&u.focus()}getByIndex(r){return this.filters.get(r)}lastIsFocused(){return this.getFocusedIndex()===this.filters.length-1}getFocusedIndex(){const r=document.activeElement.dataset.index;return r?parseInt(r):null}}return p.\u0275fac=function(r){return new(r||p)(e.Y36(E.qu),e.Y36(e.sBO),e.Y36(e.SBq))},p.\u0275cmp=e.Xpm({type:p,selectors:[["active-filters"]],viewQuery:function(r,u){if(1&r&&e.Gf(S,5),2&r){let _;e.iGM(_=e.CRH())&&(u.filters=_)}},inputs:{compact:"compact",form:"form",config:"config"},ngContentSelectors:dt,decls:3,vars:3,consts:[[4,"ngFor","ngForOf"],[3,"compact","key","form","filter",4,"ngIf"],[3,"compact","key","form","filter"]],template:function(r,u){1&r&&(e.F$t(),e.YNc(0,rt,2,1,"ng-container",0),e.ALo(1,"keyvalue"),e.Hsn(2)),2&r&&e.Q6J("ngForOf",e.lcZ(1,1,u.form.controls))},directives:[Q.sg,Q.O5,S],pipes:[Q.Nd],styles:["[_nghost-%COMP%]{display:flex;flex:1 1 auto;flex-wrap:wrap;align-items:center}"],changeDetection:0}),p})();var at=o(6798),$=(()=>{return(p=$||($={}))[p.ENTER=13]="ENTER",p[p.SPACE=32]="SPACE",p[p.ESCAPE=27]="ESCAPE",p[p.DELETE=46]="DELETE",p[p.ARROW_UP=38]="ARROW_UP",p[p.ARROW_RIGHT=39]="ARROW_RIGHT",p[p.ARROW_DOWN=40]="ARROW_DOWN",p[p.ARROW_LEFT=37]="ARROW_LEFT",p[p.BACKSPACE=8]="BACKSPACE",p[p.TAB=9]="TAB",p[p.S=83]="S",p[p.N=78]="N",p[p.A=65]="A",p[p.T=84]="T",p[p.B=66]="B",p[p.C=67]="C",p[p.O=79]="O",p[p.P=80]="P",p[p.R=82]="R",p[p.F=70]="F",p[p.Y=89]="Y",p[p.Z=90]="Z",$;var p})();let W=(()=>{class p{constructor(){this.bindings=[]}add(r,u){Array.isArray(r)||(r=[r]),r.forEach(_=>{this.bindings.push({keybind:this.parseKeybindString(_),keybindString:_,callback:u})})}addWithPreventDefault(r,u){this.bindings.push({keybind:this.parseKeybindString(r),keybindString:r,callback:u,preventDefault:!0})}listenOn(r,u={}){return(0,g.R)(r,"keydown").subscribe(_=>{(u.fireIfInputFocused||!["input","select"].includes(document.activeElement.nodeName.toLowerCase()))&&this.executeBindings(_)})}executeBindings(r){this.bindings.forEach(u=>{!this.bindingMatches(u.keybind,r)||(u.preventDefault&&r.preventDefault&&r.preventDefault(),u.callback(r))})}bindingMatches(r,u){return $[r.key.toUpperCase()]===u.keyCode&&(u.ctrlKey===r.ctrl||u.metaKey===r.ctrl)&&u.shiftKey===r.shift}parseKeybindString(r){const u=r.trim().split("+"),_={ctrl:!1,shift:!1,key:""};return u.forEach(K=>{"ctrl"===(K=K.trim().toLowerCase())?_.ctrl=!0:"shift"===K?_.shift=!0:_.key=K}),_}}return p.\u0275fac=function(r){return new(r||p)},p.\u0275prov=e.Yz7({token:p,factory:p.\u0275fac,providedIn:"root"}),p})();var lt=o(781),vt=o(3297);const bt=["searchInput"],U=["filterSuggestion"];function j(p,y){if(1&p){const r=e.EpF();e.TgZ(0,"button",8),e.NdJ("click",function(){return e.CHM(r),e.oxw().clearSearch()}),e._UZ(1,"mat-icon",9),e.qZA()}}function A(p,y){1&p&&(e.TgZ(0,"span",13),e._uU(1,"Filter"),e.qZA())}function B(p,y){if(1&p){const r=e.EpF();e.TgZ(0,"button",10),e.NdJ("click",function(){return e.CHM(r),e.oxw().toggleFilterDropdown()}),e._UZ(1,"mat-icon",11),e.YNc(2,A,2,0,"span",12),e.qZA()}if(2&p){const r=e.oxw();e.xp6(2),e.Q6J("ngIf",!r.compact)}}let pt=(()=>{class p{constructor(r,u,_,K,ft,Ot){this.fb=r,this.route=u,this.el=_,this.keybinds=K,this.cd=ft,this.router=Ot,this.filterChange=new e.vpe,this.inputFocus=new e.vpe,this.form=this.fb.group({}),this.filterBarHeight=0,this.filterDropdownVisible$=new O.X(!1)}set filters(r){r?(this.keyedFilters={},(r||[]).forEach(u=>{this.keyedFilters[u.key]=u})):this.keyedFilters=null}ngOnInit(){this.haveFiltersOrQuery$=(0,t.aj)([this.searchControl.valueChanges.pipe((0,C.O)(null)),this.form.valueChanges.pipe((0,C.O)(null))]).pipe((0,d.U)(([r,u])=>r||u&&0!==Object.keys(u).length))}ngAfterViewInit(){this.watchForSizeChanges(),this.setFiltersFromQuery(),this.setupKeybinds(),this.subscribeToCloseActions(),this.bindToFormValueChange()}onClick(r){(r.target===this.el.nativeElement||r.target===this.activeFilters.el.nativeElement)&&this.searchInput.nativeElement.focus()}ngOnDestroy(){var r;null===(r=this.closeActionsStream$)||void 0===r||r.unsubscribe()}clearSearch(){Object.keys(this.form.controls).forEach(r=>{this.activeFilters.removeByKey(r)}),this.searchControl.reset(null,{emitEvent:!1}),this.form.reset()}toggleFilterDropdown(){this.filterDropdownVisible$.next(!this.filterDropdownVisible$.value)}addFilterFromDropdownClick(r){this.activeFilters.add(r,{focus:!0}),this.filterDropdownVisible$.next(!1)}searchInputIsFocused(){return document.activeElement===this.searchInput.nativeElement}cursorAtStartOfSearchInput(){return this.searchInputIsFocused()&&0===this.searchInput.nativeElement.selectionStart}cursorAtEndOfSearchInput(){return this.searchInputIsFocused()&&this.searchInput.nativeElement.selectionStart===this.searchInput.nativeElement.value.length}bindToFormValueChange(){this.form.valueChanges.pipe((0,d.U)(r=>Object.keys(r).length?r:null),(0,v.x)()).subscribe(r=>{this.filterChange.emit(r?mt(r):null)})}watchForSizeChanges(){new ResizeObserver(u=>{this.filterBarHeight=u[0].contentRect.height}).observe(this.el.nativeElement,{box:"border-box"})}setFiltersFromQuery(){const r=this.router.routerState.root.snapshot.queryParams;r.filters&&Ct(r.filters).forEach(_=>{this.activeFilters.add(this.keyedFilters[_.key],_)}),r.query&&this.searchControl.setValue(r.query)}setupKeybinds(){this.keybinds.add(["backspace","delete"],()=>this.cursorAtStartOfSearchInput()?this.activeFilters.focusLast():this.activeFilters.anyFocused()?(this.activeFilters.removeCurrentlyFocused(),this.searchInput.nativeElement.focus()):void 0),this.keybinds.add("arrow_left",r=>{this.cursorAtStartOfSearchInput()?(this.activeFilters.focusLast(),r.preventDefault()):this.activeFilters.anyFocused()&&(this.activeFilters.focusPrevious(),r.preventDefault())}),this.keybinds.add("arrow_right",r=>{if(this.activeFilters.anyFocused()){r.preventDefault();const u=this.activeFilters.getFocusedIndex(),_=this.activeFilters.getByIndex(u+1);_?_.focus():this.activeFilters.lastIsFocused()&&this.searchInput.nativeElement.focus()}}),this.keybinds.add(["arrow_down","tab"],r=>{if(this.cursorAtEndOfSearchInput()||this.suggestions.anyFocused()){r.preventDefault(),this.filterDropdownVisible$.value||this.toggleFilterDropdown();const u=this.suggestions.getFocusedIndex();let _=u>-1?u:0;this.suggestions.anyFocused()&&(_+=1),_>=this.suggestions.items.length&&(_=0),this.suggestions.focusItemAt(_)}}),this.keybinds.add(["arrow_up","shift+tab"],r=>{if(this.suggestions.anyFocused()){r.preventDefault();const u=this.activeFilters.getFocusedIndex();let _=u>-1?u:0;_-=1,-1===_?this.searchInput.nativeElement.focus():this.suggestions.focusItemAt(_)}}),this.keybinds.add("enter",r=>{const u=this.suggestions.getFocusedFilter();u&&(r.preventDefault(),this.activeFilters.add(u,{focus:!0}),this.filterDropdownVisible$.next(!1))}),this.keybinds.add("esc",r=>{this.filterDropdownVisible$.value&&(r.preventDefault(),this.filterDropdownVisible$.next(!1))}),this.keybinds.listenOn(document,{fireIfInputFocused:!0})}subscribeToCloseActions(){this.closeActionsStream$=(0,x.T)((0,g.R)(document,"click"),(0,g.R)(document,"auxclick"),(0,g.R)(document,"touchend")).pipe((0,f.h)(r=>{const u=r.target;return u!==this.el.nativeElement&&!this.el.nativeElement.contains(u)})).subscribe(()=>{this.filterDropdownVisible$.next(!1)})}}return p.\u0275fac=function(r){return new(r||p)(e.Y36(E.qu),e.Y36(at.gz),e.Y36(e.SBq),e.Y36(W),e.Y36(e.sBO),e.Y36(at.F0))},p.\u0275cmp=e.Xpm({type:p,selectors:[["search-input-with-filters"]],viewQuery:function(r,u){if(1&r&&(e.Gf(bt,5),e.Gf(q,5),e.Gf(V,5),e.Gf(U,5)),2&r){let _;e.iGM(_=e.CRH())&&(u.searchInput=_.first),e.iGM(_=e.CRH())&&(u.suggestions=_.first),e.iGM(_=e.CRH())&&(u.activeFilters=_.first),e.iGM(_=e.CRH())&&(u.filterContainers=_)}},hostBindings:function(r,u){1&r&&e.NdJ("click",function(K){return u.onClick(K)})},inputs:{compact:"compact",searchControl:"searchControl",pluralName:"pluralName",filters:"filters"},outputs:{filterChange:"filterChange",inputFocus:"inputFocus"},decls:11,vars:18,consts:[[3,"form","config","compact"],[1,"input-container","search-input-container"],["svgIcon","search",1,"search-icon"],["type","text",1,"search-input",3,"placeholder","formControl","focus"],["searchInput",""],["type","button","class","clear-button","mat-icon-button","",3,"click",4,"ngIf"],["type","button","mat-button","","class","filter-button",3,"click",4,"ngIf"],[3,"filters","filterSelected"],["type","button","mat-icon-button","",1,"clear-button",3,"click"],["svgIcon","close"],["type","button","mat-button","",1,"filter-button",3,"click"],["svgIcon","filter-list",1,"filter-button-icon"],["class","filter-button-text","trans","",4,"ngIf"],["trans","",1,"filter-button-text"]],template:function(r,u){1&r&&(e.TgZ(0,"active-filters",0),e.TgZ(1,"div",1),e._UZ(2,"mat-icon",2),e.TgZ(3,"input",3,4),e.NdJ("focus",function(){return u.inputFocus.emit()}),e.ALo(5,"trans"),e.qZA(),e.qZA(),e.qZA(),e.YNc(6,j,2,0,"button",5),e.ALo(7,"async"),e.YNc(8,B,3,1,"button",6),e.TgZ(9,"filter-suggestions",7),e.NdJ("filterSelected",function(K){return u.addFilterFromDropdownClick(K)}),e.ALo(10,"async"),e.qZA()),2&r&&(e.Q6J("form",u.form)("config",u.keyedFilters)("compact",u.compact),e.xp6(3),e.Q6J("placeholder",e.lcZ(5,12,"Type to search for "+u.pluralName))("formControl",u.searchControl),e.xp6(3),e.Q6J("ngIf",e.lcZ(7,14,u.haveFiltersOrQuery$)),e.xp6(2),e.Q6J("ngIf",u.keyedFilters),e.xp6(1),e.Udp("top",u.filterBarHeight+5+"px"),e.ekj("visible",e.lcZ(10,16,u.filterDropdownVisible$)),e.Q6J("filters",u.keyedFilters))},directives:[V,i.Hw,E.Fj,E.JJ,E.oH,Q.O5,q,lt.lW,a.P],pipes:[vt.R,Q.Ov],styles:["[_nghost-%COMP%]{display:flex;background-color:var(--be-background);border:1px solid var(--be-divider-default);height:45px;border-radius:4px;position:relative;padding-left:3px;overflow:hidden;width:100%}@media only screen and (max-width: 768px){[_nghost-%COMP%]{flex-wrap:wrap;justify-content:center}}[_nghost-%COMP%]:focus-within{outline:none;border-color:var(--be-accent-lighter);box-shadow:0 0 0 2px var(--be-accent-lighter);z-index:3;overflow:visible;height:auto!important}.search-input-container[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1 1 auto;width:auto;height:43px;padding-left:8px}.search-icon[_ngcontent-%COMP%]{display:block;color:var(--be-secondary-text);margin-right:5px}.search-input[_ngcontent-%COMP%]{border:none;height:100%;padding:0}.search-input[_ngcontent-%COMP%]:focus{box-shadow:none;z-index:1}.filter-button[_ngcontent-%COMP%]{min-width:auto;padding:0 14px;color:var(--be-accent-default);height:43px}.clear-button[_ngcontent-%COMP%]{height:43px;width:43px;line-height:43px;color:var(--be-accent-default)}.filter-button-text[_ngcontent-%COMP%]{margin-left:10px}"],changeDetection:0}),p})();const mt=p=>{const y=[];return Object.values(p).forEach(r=>{""!==r.value&&y.push(r)}),y.length?encodeURIComponent(btoa(JSON.stringify(y))):""},Ct=p=>{let y=[];try{y=JSON.parse(atob(decodeURIComponent(p)))}catch(r){}return y};let Pt=(()=>{class p{constructor(r){this.datable=r}onFilterChange(r){this.datable.filters$.next({filters:r})}}return p.\u0275fac=function(r){return new(r||p)(e.Y36(P.x))},p.\u0275cmp=e.Xpm({type:p,selectors:[["datatable-filters"]],inputs:{pluralName:"pluralName",filters:"filters"},decls:1,vars:3,consts:[[3,"searchControl","pluralName","filters","filterChange"]],template:function(r,u){1&r&&(e.TgZ(0,"search-input-with-filters",0),e.NdJ("filterChange",function(K){return u.onFilterChange(K)}),e.qZA()),2&r&&e.Q6J("searchControl",u.datable.searchControl)("pluralName",u.pluralName)("filters",u.filters)},directives:[pt],styles:[""],changeDetection:0}),p})()},3644:(et,k,o)=>{o.d(k,{XQ:()=>e,Bq:()=>P,pg:()=>C,Hi:()=>d});class e{constructor(f){this.defaultValue=void 0!==f.defaultValue?f.defaultValue:"",this.key=f.key||"",this.label=f.label||f.key||"",this.description=f.description||"",this.defaultOperator=f.defaultOperator||C.eq,this.required=!!f.required,this.order=void 0===f.order?1:f.order,this.type=f.type||P.Select,this.inputType=f.inputType,this.options=f.options||[],this.operators=f.operators,this.component=f.component,this.componentData=f.componentData}}var P=(()=>{return(v=P||(P={})).Select="select",v.DatePicker="datePicker",v.SelectModel="selectModel",v.Input="input",v.StaticValue="staticValue",P;var v})(),C=(()=>{return(v=C||(C={})).eq="=",v.ne="!=",v.gt=">",v.gte=">=",v.lt="<",v.lte="<=",v.has="has",v.doesntHave="doesntHave",C;var v})();const d=[C.eq,C.ne,C.gt,C.gte,C.lt,C.lte]},5418:(et,k,o)=>{o.d(k,{k4:()=>P,T7:()=>C,yH:()=>d});var e=o(3644);class P extends e.XQ{constructor(){super(...arguments),this.type=e.Bq.DatePicker,this.operators=e.Hi,this.defaultOperator=e.pg.lte,this.defaultValue=(new Date).toISOString().split("T")[0]}}class C extends P{constructor(){super(...arguments),this.key="created_at",this.label="Created At"}}class d extends P{constructor(){super(...arguments),this.key="updated_at",this.label="Updated At"}}},3289:(et,k,o)=>{o.d(k,{J:()=>ot});var e=o(2213),P=o(1707),C=o(639),d=o(3720),v=o(9902),f=o(8293),O=o(3927),t=o(6491),x=o(1134),g=o(2316),a=o(299),Q=o(5515),i=o(2529),Y=o(616),M=o(4364);function I(E,X){if(1&E&&(g.TgZ(0,"div",14),g._uU(1),g.qZA()),2&E){const L=g.oxw().$implicit;g.xp6(1),g.Oqu(L.description)}}function q(E,X){if(1&E){const L=g.EpF();g.TgZ(0,"div",9),g.NdJ("click",function(){const tt=g.CHM(L).$implicit;return g.oxw().close(tt)}),g._UZ(1,"img",10),g.TgZ(2,"div",11),g.TgZ(3,"div",12),g._uU(4),g.qZA(),g.YNc(5,I,2,1,"div",13),g.qZA(),g.qZA()}if(2&E){const L=X.$implicit;g.xp6(1),g.Q6J("src",L.image,g.LSH),g.xp6(3),g.Oqu(L.name),g.xp6(1),g.Q6J("ngIf",L.description)}}const F=function(E){return{resource:E}};let ot=(()=>{class E{constructor(L,H,it){this.dialogRef=L,this.http=H,this.data=it,this.searchFormControl=new P.NI,this.loading$=new t.X(!1),this.results$=new t.X([]),this.modelName=this.data.modelType}ngOnInit(){this.searchFormControl.valueChanges.pipe((0,C.b)(250),(0,d.x)(),(0,v.w)(L=>this.searchModel(L)),(0,f.K)(()=>(0,x.of)([]))).subscribe(L=>{this.results$.next(L),this.loading$.next(!1)})}searchModel(L){return this.loading$.next(!0),L?this.http.get("search/global/model",{modelType:this.data.modelType,query:L}).pipe((0,O.U)(H=>H.results)):(0,x.of)([])}close(L){this.dialogRef.close(L)}}return E.\u0275fac=function(L){return new(L||E)(g.Y36(e.so),g.Y36(a.r),g.Y36(e.WI))},E.\u0275cmp=g.Xpm({type:E,selectors:[["select-model-dialog"]],decls:13,vars:13,consts:[[1,"modal-header"],["mat-dialog-title","","trans","",3,"transValues"],["type","button","tabindex","-1",1,"no-style","close-button",3,"click"],["svgIcon","close"],[1,"input-container","search-input-container"],["type","text","placeholder","Search for :resource by name...","trans-placeholder","",3,"transValues","formControl"],[1,"small",3,"isVisible"],[1,"results"],["class","result",3,"click",4,"ngFor","ngForOf"],[1,"result",3,"click"],["alt","",3,"src"],[1,"meta","overflow-hidden"],[1,"name","overflow-hidden"],["class","description overflow-hidden",4,"ngIf"],[1,"description","overflow-hidden"]],template:function(L,H){1&L&&(g.TgZ(0,"div",0),g.TgZ(1,"h2",1),g._uU(2,"Find :resource"),g.qZA(),g.TgZ(3,"button",2),g.NdJ("click",function(){return H.close()}),g._UZ(4,"mat-icon",3),g.qZA(),g.qZA(),g.TgZ(5,"mat-dialog-content"),g.TgZ(6,"div",4),g._UZ(7,"input",5),g._UZ(8,"loading-indicator",6),g.ALo(9,"async"),g.qZA(),g.TgZ(10,"div",7),g.YNc(11,q,6,3,"div",8),g.ALo(12,"async"),g.qZA(),g.qZA()),2&L&&(g.xp6(1),g.Q6J("transValues",g.VKq(9,F,H.modelName)),g.xp6(6),g.Q6J("transValues",g.VKq(11,F,H.modelName))("formControl",H.searchFormControl),g.xp6(1),g.Q6J("isVisible",g.lcZ(9,5,H.loading$)),g.xp6(3),g.Q6J("ngForOf",g.lcZ(12,7,H.results$)))},directives:[e.uh,Q.P,i.Hw,e.xY,P.Fj,P.JJ,P.oH,Y.Q,M.sg,M.O5],pipes:[M.Ov],styles:["[_nghost-%COMP%]{display:block;width:600px;max-width:100%}.modal-header[_ngcontent-%COMP%]{margin-bottom:15px}.search-input-container[_ngcontent-%COMP%]{width:100%;margin-bottom:20px;position:relative}loading-indicator[_ngcontent-%COMP%]{top:12px;right:12px}.results[_ngcontent-%COMP%]{display:grid;grid-gap:15px;grid-template-columns:1fr 1fr}.result[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:12px;border-radius:4px;cursor:pointer;min-width:0}.result[_ngcontent-%COMP%]:hover{background-color:var(--be-hover)}.result[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:auto;max-height:80px;flex-shrink:0;margin-right:15px;border-radius:4px;overflow:hidden;object-fit:cover}.result[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{color:var(--be-text);font-size:1.5rem;margin-bottom:5px}.result[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.overflow-hidden[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}"],changeDetection:0}),E})()},2141:(et,k,o)=>{o.d(k,{V:()=>i});var e=o(1707),P=o(9170),C=o(3927),d=o(2316),v=o(6142),f=o(4364),O=o(781),t=o(2529),x=o(5515),g=o(3297);function a(Y,M){if(1&Y&&(d.TgZ(0,"div",6),d.TgZ(1,"div",7),d._uU(2,"Items per page"),d.qZA(),d.TgZ(3,"div",8),d.TgZ(4,"select",9),d.TgZ(5,"option",10),d._uU(6,"10"),d.qZA(),d.TgZ(7,"option",10),d._uU(8,"15"),d.qZA(),d.TgZ(9,"option",10),d._uU(10,"20"),d.qZA(),d.TgZ(11,"option",10),d._uU(12,"50"),d.qZA(),d.TgZ(13,"option",10),d._uU(14,"100"),d.qZA(),d.qZA(),d.qZA(),d.qZA()),2&Y){const I=d.oxw();d.xp6(4),d.Q6J("formControl",I.perPageControl),d.xp6(1),d.Q6J("ngValue",10),d.xp6(2),d.Q6J("ngValue",15),d.xp6(2),d.Q6J("ngValue",20),d.xp6(2),d.Q6J("ngValue",50),d.xp6(2),d.Q6J("ngValue",100)}}function Q(Y,M){if(1&Y&&(d.TgZ(0,"div",11),d._uU(1),d.ALo(2,"trans"),d.ALo(3,"number"),d.qZA()),2&Y){const I=d.oxw();d.xp6(1),d.HOy(" ",I.from," - ",I.to," ",d.lcZ(2,4,"of")," ",d.lcZ(3,6,I.totalRecords)," ")}}let i=(()=>{class Y{constructor(I,q){this.datable=I,this.cd=q,this.hidePerPage=!1,this.perPageControl=new e.NI(15)}ngOnInit(){this.changeRef=this.datable.paginator.response$.pipe((0,P.h)(I=>!!(null==I?void 0:I.pagination)),(0,C.U)(I=>I.pagination)).subscribe(I=>{this.totalRecords=I.total,this.to=Math.min(I.per_page*I.current_page,this.totalRecords),this.from=Math.max(this.to-I.per_page,1),this.havePrevious=this.datable.paginator.canLoadPrevPage(),this.haveNext=this.datable.paginator.canLoadNextPage(),this.perPageControl.setValue(parseInt(""+I.per_page),{emitEvent:!1}),this.cd.markForCheck()}),this.perPageControl.valueChanges.subscribe(I=>{this.datable.paginator.changePerPage(I)})}ngOnDestroy(){this.changeRef.unsubscribe(),this.datable.destroy()}previousPage(){this.datable.paginator.previousPage()}nextPage(){this.datable.paginator.nextPage()}}return Y.\u0275fac=function(I){return new(I||Y)(d.Y36(v.x),d.Y36(d.sBO))},Y.\u0275cmp=d.Xpm({type:Y,selectors:[["datatable-footer"]],inputs:{hidePerPage:"hidePerPage"},decls:9,vars:8,consts:[["class","page-size",4,"ngIf"],[1,"range-actions"],["class","range-label",4,"ngIf"],["type","button","mat-icon-button","",1,"range-button",3,"disabled","click"],["svgIcon","chevron-left"],["svgIcon","chevron-right"],[1,"page-size"],["trans","",1,"page-size-label"],[1,"input-container"],[1,"page-size-input",3,"formControl"],[3,"ngValue"],[1,"range-label"]],template:function(I,q){1&I&&(d.YNc(0,a,15,6,"div",0),d.TgZ(1,"div",1),d.YNc(2,Q,4,8,"div",2),d.TgZ(3,"button",3),d.NdJ("click",function(){return q.previousPage()}),d.ALo(4,"async"),d._UZ(5,"mat-icon",4),d.qZA(),d.TgZ(6,"button",3),d.NdJ("click",function(){return q.nextPage()}),d.ALo(7,"async"),d._UZ(8,"mat-icon",5),d.qZA(),d.qZA()),2&I&&(d.Q6J("ngIf",!q.hidePerPage),d.xp6(2),d.Q6J("ngIf",q.from&&q.to&&q.totalRecords),d.xp6(1),d.Q6J("disabled",!q.havePrevious||d.lcZ(4,4,q.datable.paginator.loading$)),d.xp6(3),d.Q6J("disabled",!q.haveNext||d.lcZ(7,6,q.datable.paginator.loading$)))},directives:[f.O5,O.lW,t.Hw,x.P,e.EJ,e.JJ,e.oH,e.YN,e.Kr],pipes:[f.Ov,g.R,f.JJ],styles:["[_nghost-%COMP%]{display:flex;padding:0 8px;align-items:center;justify-content:flex-end;flex-wrap:wrap-reverse;width:100%;height:56px}.page-size[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:8px}.page-size-label[_ngcontent-%COMP%]{font-size:1.2rem;color:var(--be-secondary-text);margin:0 4px}.input-container[_ngcontent-%COMP%]{width:auto}.page-size-input[_ngcontent-%COMP%]{width:60px;height:33px;padding:4px;margin:0 4px}.range-actions[_ngcontent-%COMP%]{display:flex;align-items:center}.range-label[_ngcontent-%COMP%]{color:var(--be-secondary-text);margin:0 32px 0 24px;font-size:1.2rem}.range-button[_ngcontent-%COMP%]{color:var(--be-secondary-text)}.range-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{width:28px;height:28px;line-height:28px}"],changeDetection:0}),Y})()},382:(et,k,o)=>{o.d(k,{G:()=>D});var e=o(2316);const P=[{originX:"start",originY:"center",overlayX:"end",overlayY:"center",offsetX:50},{originX:"end",originY:"center",overlayX:"start",overlayY:"center",offsetX:50}];var C=o(2100),d=o(2213),v=o(7310),f=o(2529),O=o(5515),t=o(1707),x=o(4364),g=o(781);function a(T,R){1&T&&e.GkF(0)}let Q=(()=>{class T{constructor(b,S){this.data=b,this.overlayPanelRef=S}close(){this.overlayPanelRef.close()}}return T.\u0275fac=function(b){return new(b||T)(e.Y36(C.p),e.Y36(v.L))},T.\u0275cmp=e.Xpm({type:T,selectors:[["datatable-filters-panel"]],hostVars:1,hostBindings:function(b,S){2&b&&e.d8E("@dialogContainer","enter")},decls:9,vars:1,consts:[["svgIcon","filter-list"],["trans",""],[1,"body",3,"ngSubmit"],[4,"ngTemplateOutlet"],["type","button","mat-button","","color","accent","trans","",3,"click"]],template:function(b,S){1&b&&(e.TgZ(0,"header"),e._UZ(1,"mat-icon",0),e.TgZ(2,"span",1),e._uU(3,"Filters"),e.qZA(),e.qZA(),e.TgZ(4,"form",2),e.NdJ("ngSubmit",function(){return S.close()}),e.YNc(5,a,1,0,"ng-container",3),e.qZA(),e.TgZ(6,"footer"),e.TgZ(7,"button",4),e.NdJ("click",function(){return S.close()}),e._uU(8,"Close"),e.qZA(),e.qZA()),2&b&&(e.xp6(5),e.Q6J("ngTemplateOutlet",S.data.filters))},directives:[f.Hw,O.P,t._Y,t.JL,t.F,x.tP,g.lW],styles:["[_nghost-%COMP%]{display:block;min-width:250px;margin:auto;background-color:var(--be-background);border-radius:4px;box-shadow:0 8px 9px -5px #0003,0 15px 22px 2px #00000024,0 6px 28px 5px #0000001f}header[_ngcontent-%COMP%]{border-bottom:1px solid var(--be-divider-default);padding:15px 20px;margin-bottom:20px;font-weight:500}header[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{vertical-align:middle;margin-right:5px}.body[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}footer[_ngcontent-%COMP%]{border-top:1px solid var(--be-divider-default);text-align:right;margin-top:10px;padding:10px 20px}"],data:{animation:[d.Nv.dialogContainer]},changeDetection:0}),T})();var i=o(3927),Y=o(4889),M=o(6142),I=o(7964),q=o(365),F=o(3297);function ot(T,R){1&T&&e._UZ(0,"mat-icon",3)}let E=(()=>{class T{constructor(b){this.datatable=b,this.hideIcon=!1}}return T.\u0275fac=function(b){return new(b||T)(e.Y36(M.x))},T.\u0275cmp=e.Xpm({type:T,selectors:[["datatable-header-search-input"]],inputs:{placeholder:"placeholder",hideIcon:"hideIcon"},decls:4,vars:5,consts:[[1,"input-container","search-input-container"],["type","text",1,"search-input",3,"placeholder","formControl"],["svgIcon","search",4,"ngIf"],["svgIcon","search"]],template:function(b,S){1&b&&(e.TgZ(0,"div",0),e._UZ(1,"input",1),e.ALo(2,"trans"),e.YNc(3,ot,1,0,"mat-icon",2),e.qZA()),2&b&&(e.xp6(1),e.Q6J("placeholder",e.lcZ(2,3,S.placeholder))("formControl",S.datatable.searchControl),e.xp6(2),e.Q6J("ngIf",!S.hideIcon))},directives:[t.Fj,t.JJ,t.oH,x.O5,f.Hw],pipes:[F.R],styles:[".input-container[_ngcontent-%COMP%]{min-width:250px;position:relative;flex-shrink:0}.input-container[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{position:absolute;top:calc(50% - 12px);right:5px;color:var(--be-secondary-text)}.icon-left[_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%], .icon-left   [_nghost-%COMP%]   .mat-icon[_ngcontent-%COMP%]{left:10px;right:0}"],changeDetection:0}),T})();var X=o(9243);let L=(()=>{class T extends x.rS{transform(b){return b?super.transform(b.replace("-"," ").replace("_"," ")):""}}return T.\u0275fac=function(){let R;return function(S){return(R||(R=e.n5z(T)))(S||T)}}(),T.\u0275pipe=e.Yjl({name:"titleCase",type:T,pure:!0}),T})();const H=["tableFilters"],it=["filterButton"];function tt(T,R){1&T&&e._UZ(0,"mat-progress-bar",7)}function st(T,R){1&T&&(e.TgZ(0,"div",8),e.Hsn(1),e.qZA())}const ct=function(T,R){return{count:T,resource:R}};function ut(T,R){if(1&T&&(e.TgZ(0,"div",9),e._uU(1),e.ALo(2,"trans"),e.qZA()),2&T){const b=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,":count :resource selected",e.WLB(4,ct,b.numberOfRowsSelected,b.pluralResourceName))," ")}}function gt(T,R){if(1&T){const b=e.EpF();e.TgZ(0,"mat-chip",18),e.NdJ("removed",function(){const rt=e.CHM(b).$implicit;return e.oxw(3).datatable.removeFilter(rt.key)}),e._uU(1),e.ALo(2,"trans"),e.ALo(3,"titleCase"),e._UZ(4,"mat-icon",19),e.qZA()}if(2&T){const b=R.$implicit,S=e.oxw(3);e.Q6J("removable",!0)("selectable",!1),e.xp6(1),e.AsE(" ",e.lcZ(2,4,e.lcZ(3,6,b.key)),": ",S.isModel(b.value)?b.value.name||b.value.display_name:b.value," ")}}function J(T,R){if(1&T){const b=e.EpF();e.ynx(0),e.TgZ(1,"mat-chip-list",13),e.YNc(2,gt,5,8,"mat-chip",14),e.ALo(3,"keyvalue"),e.ALo(4,"async"),e.qZA(),e.TgZ(5,"button",15,16),e.NdJ("click",function(){return e.CHM(b),e.oxw(2).openFiltersPanel()}),e._UZ(7,"mat-icon",17),e.qZA(),e.BQk()}if(2&T){const b=e.oxw(2);e.xp6(2),e.Q6J("ngForOf",e.lcZ(3,3,e.lcZ(4,5,b.filters$))),e.xp6(3),e.ekj("active",b.filterPanelRef)}}function z(T,R){if(1&T&&(e.TgZ(0,"div",10),e.YNc(1,J,8,7,"ng-container",11),e._UZ(2,"datatable-header-search-input",12),e.qZA()),2&T){const b=e.oxw();e.xp6(1),e.Q6J("ngIf",b.filterPanelTemplate),e.xp6(1),e.MGl("placeholder","Search ",b.pluralResourceName,"")}}function m(T,R){1&T&&(e.TgZ(0,"div",20),e.Hsn(1,1),e.qZA())}const h=[[["","leftContent",""]],[["","rightContent",""]]],N=["[leftContent]","[rightContent]"];let D=(()=>{class T{constructor(b,S,nt){this.datatable=b,this.cd=S,this.overlayPanel=nt,this.showSelectedActions=!0,this.subscriptions=[],this.filters$=this.datatable.filters$.pipe((0,i.U)(rt=>{const dt=(0,Y.N)(rt);return delete dt.query,dt}))}ngOnInit(){const b=this.datatable.filters$.subscribe(()=>{this.filterPanelRef&&this.filterPanelRef.close()}),S=this.datatable.selectedRows$.subscribe(nt=>{this.numberOfRowsSelected=nt.length,this.cd.markForCheck()});this.subscriptions=[b,S]}ngOnDestroy(){this.subscriptions.forEach(b=>b.unsubscribe())}openFiltersPanel(){if(this.filterPanelRef)this.filterPanelRef.close();else{const b=P.slice();b[0].offsetY=40,b[1].offsetY=40,this.filterPanelRef=this.overlayPanel.open(Q,{origin:this.filterButton,position:b,mobilePosition:"center",data:{filters:this.filterPanelTemplate},maxWidth:"90%"}),this.filterButton.nativeElement.classList.add("active"),this.filterPanelRef.afterClosed().subscribe(()=>{this.filterPanelRef=null,this.filterButton.nativeElement.classList.remove("active")})}}isModel(b){return"object"==typeof b&&b.id}}return T.\u0275fac=function(b){return new(b||T)(e.Y36(M.x),e.Y36(e.sBO),e.Y36(I.T))},T.\u0275cmp=e.Xpm({type:T,selectors:[["datatable-header"]],contentQueries:function(b,S,nt){if(1&b&&e.Suo(nt,H,5),2&b){let rt;e.iGM(rt=e.CRH())&&(S.filterPanelTemplate=rt.first)}},viewQuery:function(b,S){if(1&b&&e.Gf(it,5,e.SBq),2&b){let nt;e.iGM(nt=e.CRH())&&(S.filterButton=nt.first)}},hostVars:2,hostBindings:function(b,S){2&b&&e.ekj("rows-selected",S.numberOfRowsSelected)},inputs:{pluralResourceName:"pluralResourceName",showSelectedActions:"showSelectedActions"},ngContentSelectors:N,decls:8,vars:7,consts:[["mode","indeterminate","color","accent",4,"ngIf"],[1,"left-column"],["class","default-left-content",4,"ngIf"],["class","selected-left-content capitalize",4,"ngIf"],[1,"right-column"],["class","default-right-content",4,"ngIf"],["class","selected-right-actions",4,"ngIf"],["mode","indeterminate","color","accent"],[1,"default-left-content"],[1,"selected-left-content","capitalize"],[1,"default-right-content"],[4,"ngIf"],[3,"placeholder"],["aria-label","Active Filters",1,"filter-chip-list"],[3,"removable","selectable","removed",4,"ngFor","ngForOf"],["mat-icon-button","",1,"filter-button",3,"click"],["filterButton",""],["svgIcon","filter-list"],[3,"removable","selectable","removed"],["matChipRemove","","svgIcon","cancel"],[1,"selected-right-actions"]],template:function(b,S){1&b&&(e.F$t(h),e.YNc(0,tt,1,0,"mat-progress-bar",0),e.ALo(1,"async"),e.TgZ(2,"div",1),e.YNc(3,st,2,0,"div",2),e.YNc(4,ut,3,7,"div",3),e.qZA(),e.TgZ(5,"div",4),e.YNc(6,z,3,2,"div",5),e.YNc(7,m,2,0,"div",6),e.qZA()),2&b&&(e.Q6J("ngIf",e.lcZ(1,5,S.datatable.paginator&&S.datatable.paginator.loading$)),e.xp6(3),e.Q6J("ngIf",!S.showSelectedActions||!S.numberOfRowsSelected),e.xp6(1),e.Q6J("ngIf",S.showSelectedActions&&S.numberOfRowsSelected),e.xp6(2),e.Q6J("ngIf",!S.showSelectedActions||!S.numberOfRowsSelected),e.xp6(1),e.Q6J("ngIf",S.showSelectedActions&&S.numberOfRowsSelected))},directives:[x.O5,q.pW,E,X.qn,x.sg,g.lW,f.Hw,X.HS,X.qH],pipes:[x.Ov,F.R,x.Nd,L],styles:[".rows-selected[_nghost-%COMP%], .rows-selected   [_nghost-%COMP%]{background-color:var(--be-accent-emphasis);color:var(--be-secondary-text);font-size:1.5rem;border-color:var(--be-divider-default)}[_nghost-%COMP%]{display:flex;align-items:center;height:85px;padding:15px;border-bottom:1px solid transparent;position:relative}.mat-progress-bar[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.left-column[_ngcontent-%COMP%]{margin-right:auto}.right-column[_ngcontent-%COMP%]{margin-left:25px}.default-right-content[_ngcontent-%COMP%]{display:flex;align-items:center}.filter-button[_ngcontent-%COMP%]{margin-right:10px}.active[_ngcontent-%COMP%]{color:var(--be-accent-default)}.mat-chip[_ngcontent-%COMP%]{text-transform:capitalize}  datatable-header info-popover{margin-left:10px}"],changeDetection:0}),T})()},557:(et,k,o)=>{o.d(k,{x:()=>q});var e=o(4364),P=o(2529),C=o(9866),d=o(4058),v=o(1707),f=o(781),O=o(9243),t=o(365),x=o(7738),g=o(5217),a=o(8097),Q=o(2213),i=o(3389),Y=o(2316);let M=(()=>{class F{}return F.\u0275fac=function(E){return new(E||F)},F.\u0275mod=Y.oAB({type:F}),F.\u0275inj=Y.cJS({imports:[[e.ez,C.N,v.UX,P.Ps,f.ot,Q.Is,i.p]]}),F})();var I=o(6798);let q=(()=>{class F{}return F.\u0275fac=function(E){return new(E||F)},F.\u0275mod=Y.oAB({type:F}),F.\u0275inj=Y.cJS({imports:[[e.ez,C.N,v.UX,v.u5,x.G,g.u,a.X,M,I.Bz,f.ot,P.Ps,d.p9,O.Hi,t.Cv],d.p9]}),F})()},6142:(et,k,o)=>{o.d(k,{x:()=>gt});var e=o(6491),P=o(9097),C=o(5565),d=o(1134),v=o(3927),f=o(9902),O=o(8636),t=o(2316),x=o(6798),g=o(299),a=o(962);let Q=(()=>{class J{constructor(m,h,N){this.router=m,this.http=h,this.localStorage=N,this.params$=new e.X({}),this.paginatedOnce$=new e.X(!1),this.loading$=new e.X(!1),this.response$=new e.X(null),this.dontUpdateQueryParams=!1,this.perPageCacheKey=null,this.noResults$=this.response$.pipe((0,v.U)(D=>this.paginatedOnce$.value&&0===D.pagination.data.length))}get params(){return this.params$.value}get currentPage(){var m,h;return null===(h=null===(m=this.response$.value)||void 0===m?void 0:m.pagination)||void 0===h?void 0:h.current_page}paginate(m={},h,N){const D=this.subscription?{}:this.currentQueryParams();this.params$.next(Object.assign(Object.assign(Object.assign({},this.response$.value?{perPage:this.response$.value.pagination.per_page,page:this.response$.value.pagination.current_page}:{}),D),m)),this.subscription||this.init(h,N)}nextPage(){const m=this.response$.value.pagination.current_page||0;this.paginate(Object.assign(Object.assign({},this.params$.value),{page:m+1,cursor:this.response$.value.pagination.next_cursor}))}previousPage(){const m=this.response$.value.pagination.current_page;this.paginate(Object.assign(Object.assign({},this.params$.value),{page:m-1||1,cursor:this.response$.value.pagination.prev_cursor}))}changePerPage(m){var h;m!==(null===(h=this.params$.value)||void 0===h?void 0:h.perPage)&&(this.perPageCacheKey&&this.localStorage.set(this.perPageCacheKey,m),this.paginate(Object.assign(Object.assign({},this.params$.value),{perPage:m})))}currentQueryParams(){return this.router.routerState.root.snapshot.queryParams}init(m,h){this.subscription=this.params$.pipe((0,f.w)(N=>{this.loading$.next(!0);const D=!this.paginatedOnce$.value;return D&&this.perPageCacheKey&&this.localStorage.get(this.perPageCacheKey)&&(N=Object.assign({perPage:this.localStorage.get(this.perPageCacheKey)},N)),(D&&h?(0,d.of)({pagination:h}):this.http.get(m,N)).pipe((0,O.b)(()=>{this.updateQueryParams(N),this.loading$.next(!1),this.paginatedOnce$.next(!0)},()=>{this.loading$.next(!1),this.paginatedOnce$.next(!0)}))})).subscribe(N=>{this.response$.next(N)})}updateQueryParams(m={}){if(!this.dontUpdateQueryParams){for(const h in m)Array.isArray(m[h])&&(m[h]=m[h].join(","));this.router.navigate([],{queryParams:m,replaceUrl:!0})}}canLoadNextPage(){var m;const h=null===(m=this.response$.value)||void 0===m?void 0:m.pagination;return!!h&&(!!h.next_cursor||this.currentPage<h.last_page)}canLoadPrevPage(){var m;const h=null===(m=this.response$.value)||void 0===m?void 0:m.pagination;return!!h&&(!!h.prev_cursor||this.currentPage>1)}}return J.\u0275fac=function(m){return new(m||J)(t.LFG(x.F0),t.LFG(g.r),t.LFG(a.m))},J.\u0275prov=t.Yz7({token:J,factory:J.\u0275fac}),J})();var i=o(639),Y=o(5347),M=o(9170),I=o(4889),q=o(8208);const F={title:"Delete :resource",body:"Are you sure you want to delete selected :resource?",ok:"Delete"};var ot=o(2965),E=o(657);function H(J,z){const m=ot.pick(z,J);if((0,E.t6)(m)){const h=Number(m);return h<9007199254740991?h:m}return m}function it(J,z){return J.filter(m=>function(J,z){const m="string"==typeof J?J:st(J),h=z.trim().toLowerCase();return-1!==m.indexOf(h)}(m,z))}function st(J){return Object.keys(J).reduce((z,m)=>z+(J[m]&&"object"==typeof J[m]?st(J[m]):J[m])+"\u25ec","").toLowerCase()}var ct=o(1707),ut=o(5381);let gt=(()=>{class J{constructor(m,h,N,D){this.modal=m,this.router=h,this.http=N,this.localStorage=D,this.sort$=new e.X({}),this.filters$=new e.X({}),this.searchControl=new ct.NI,this.searchTerm$=new e.X(null),this.staticParams$=new e.X({}),this.paginator=new Q(this.router,this.http,this.localStorage),this.ignoreNextParamChange=!1,this.originalData$=new e.X([]),this.data$=new e.X([]),this.selectedRows$=new e.X([])}get data(){return this.data$.value}set data(m){const h=[...m];this.originalData$.next(h),this.data$.next(h),this.ignoreNextParamChange=!0,this.reset()}init(m={}){if(this.config=m,this.staticParams$.next(Object.assign(Object.assign({},this.staticParams$.value),m.staticParams)),m.uri?this.connectToPaginator():m.initialData&&(this.data=m.initialData),m.uri){const h=this.router.routerState.root.snapshot.queryParams,N=h.query;this.searchControl.setValue(N),this.searchTerm$.next(N),this.sort$.next({orderBy:h.orderBy,orderDir:h.orderDir})}return this.searchControlSub=this.searchControl.valueChanges.pipe((0,i.b)(300)).subscribe(h=>{this.searchTerm$.next(h)}),this.mainSub=(0,P.aj)([this.sort$,this.filters$,this.searchTerm$.pipe((0,v.U)(h=>({query:h}))),this.staticParams$]).pipe((0,i.b)(0,C.Z),(0,v.U)(h=>Object.assign({},...h))).subscribe(h=>{if(this.ignoreNextParamChange)return this.ignoreNextParamChange=!1;h=(0,I.N)(h),Object.entries(h).forEach(([N,D])=>{"object"==typeof D&&D.id&&(h[`${N}Id`]=D.id,delete h[N])}),this.config.uri?this.paginator.paginate(h,this.config.uri,this.config.initialData):Object.keys(h).length&&this.data.length&&this.applyLocalTransforms(h)}),this}connectToPaginator(){this.paginatorSub=this.paginator.response$.pipe((0,Y.G)()).subscribe(([m,h])=>{var N;const D=this.config.infiniteScroll&&(null===(N=null==m?void 0:m.pagination)||void 0===N?void 0:N.current_page)!==h.pagination.current_page?[...this.data$.value,...h.pagination.data]:h.pagination.data;this.data$.next(D)})}applyLocalTransforms(m){let h=[...this.originalData$.value];m.query&&(h=it(h,m.query)),m.orderBy&&m.orderDir&&(h=function(J,z,m){return J.sort((h,N)=>{let D=H(h,z),T=H(N,z);const R=typeof D,b=typeof T;R!==b&&("number"===R&&(D+=""),"number"===b&&(T+=""));let S=0;return null!=D&&null!=T?D>T?S=1:D<T&&(S=-1):null!=D?S=1:null!=T&&(S=-1),S*("asc"===m?1:-1)})}(h,m.orderBy,m.orderDir)),this.data$.next(h)}addFilter(m,h){this.filters$.next(Object.assign(Object.assign({},this.filters$.value),{[m]:h}))}removeFilter(m){const h=Object.assign({},this.filters$.value);delete h[m],this.filters$.next(h)}reset(m=null){this.filters$.next({}),this.sort$.next({}),this.selectedRows$.next([]),m&&this.staticParams$.next(m)}openCrupdateResourceModal(m,h,N){return this.modal.open(m,h,N).beforeClosed().pipe((0,M.h)(D=>!!D),(0,O.b)(()=>this.reset()))}confirmResourceDeletion(m){const h=Object.assign(Object.assign({},F),{replacements:{resource:m}});return this.modal.open(q.z,h).afterClosed().pipe((0,M.h)(N=>N))}getCurrentParams(){return Object.assign(Object.assign(Object.assign(Object.assign({},this.sort$.value),this.filters$.value),this.staticParams$.value),this.paginator.params)}destroy(){var m,h,N;null===(m=this.paginatorSub)||void 0===m||m.unsubscribe(),null===(h=this.mainSub)||void 0===h||h.unsubscribe(),null===(N=this.searchControlSub)||void 0===N||N.unsubscribe()}}return J.\u0275fac=function(m){return new(m||J)(t.LFG(ut.u),t.LFG(x.F0),t.LFG(g.r),t.LFG(a.m))},J.\u0275prov=t.Yz7({token:J,factory:J.\u0275fac}),J})()},6050:(et,k,o)=>{o.d(k,{O:()=>v});var e=o(2316),P=o(6142),C=o(4058);const d=["table-body-checkbox",""];let v=(()=>{class f{constructor(t,x){this.datatable=t,this.cd=x}ngOnInit(){this.changeRef=this.datatable.selectedRows$.subscribe(t=>{this.cd.markForCheck()})}ngOnDestroy(){this.changeRef.unsubscribe()}isRowSelected(t){return this.datatable.selectedRows$.value.indexOf(t)>-1}toggleRow(t){if(this.isRowSelected(t)){const x=this.datatable.selectedRows$.value.slice(),g=this.datatable.selectedRows$.value.indexOf(t);x.splice(g,1),this.datatable.selectedRows$.next(x)}else this.datatable.selectedRows$.next([...this.datatable.selectedRows$.value,t])}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(P.x),e.Y36(e.sBO))},f.\u0275cmp=e.Xpm({type:f,selectors:[["","table-body-checkbox",""]],hostAttrs:[1,"table-checkbox"],inputs:{rowId:["table-body-checkbox","rowId"]},attrs:d,decls:1,vars:1,consts:[[3,"checked","click","change"]],template:function(t,x){1&t&&(e.TgZ(0,"mat-checkbox",0),e.NdJ("click",function(a){return a.stopPropagation()})("change",function(a){return a?x.toggleRow(x.rowId):null}),e.qZA()),2&t&&e.Q6J("checked",x.isRowSelected(x.rowId))},directives:[C.oG],encapsulation:2,changeDetection:0}),f})()},9895:(et,k,o)=>{o.d(k,{e:()=>v});var e=o(2316),P=o(6142),C=o(4058);const d=["table-header-checkbox",""];let v=(()=>{class f{constructor(t,x){this.datatable=t,this.cd=x}ngOnInit(){this.changeRef=this.datatable.selectedRows$.subscribe(()=>{this.cd.markForCheck()})}ngOnDestroy(){this.changeRef.unsubscribe()}anyRowsSelected(){return!!this.datatable.selectedRows$.value.length}allRowsSelected(){var t;return this.datatable.selectedRows$.value.length&&this.datatable.selectedRows$.value.length===(null===(t=this.datatable.data$.value)||void 0===t?void 0:t.length)}toggleAllRows(){this.allRowsSelected()?this.datatable.selectedRows$.next([]):this.datatable.selectedRows$.next(this.datatable.data$.value.map(t=>t.id))}}return f.\u0275fac=function(t){return new(t||f)(e.Y36(P.x),e.Y36(e.sBO))},f.\u0275cmp=e.Xpm({type:f,selectors:[["","table-header-checkbox",""]],hostAttrs:[1,"table-checkbox"],attrs:d,decls:1,vars:2,consts:[[3,"checked","indeterminate","change"]],template:function(t,x){1&t&&(e.TgZ(0,"mat-checkbox",0),e.NdJ("change",function(a){return a?x.toggleAllRows():null}),e.qZA()),2&t&&e.Q6J("checked",x.allRowsSelected())("indeterminate",x.anyRowsSelected()&&!x.allRowsSelected())},directives:[C.oG],encapsulation:2,changeDetection:0}),f})()},1303:(et,k,o)=>{o.d(k,{p:()=>Q});var e=o(9170),P=o(84),C=o(6966),d=o(2316),v=o(6142),f=o(1606),O=o(4364),t=o(2529);const x=["columnName"],g=["table-sort-header",""],a=["*"];let Q=(()=>{class i{constructor(M,I,q,F){this.datable=M,this.cd=I,this.focusMonitor=q,this.el=F,this.orderDir=null,this.arrowVisible=!1,this.arrowDirection="down"}get sortDisabled(){var M;return null===(M=this.datable.config)||void 0===M?void 0:M.disableSort}ngOnInit(){this.orderBy||(this.orderBy=(0,C.V)(this.columnName.nativeElement.textContent,"_")),this.sortSub=this.datable.sort$.pipe((0,e.h)(M=>M.orderBy!==this.orderBy)).subscribe(()=>{this.orderDir=null,this.onMouseLeave(),this.cd.markForCheck()})}ngAfterViewInit(){this.focusMonitor.monitor(this.el).subscribe()}ngOnDestroy(){this.sortSub.unsubscribe(),this.focusMonitor.stopMonitoring(this.el)}changeSort(){this.datable.sort$.next({orderBy:this.orderBy,orderDir:this.getDirection(this.orderDir)})}getDirection(M){switch(M){case"asc":return this.arrowVisible=!1,this.orderDir=null;case"desc":return this.arrowVisible=!0,this.arrowDirection="up",this.orderDir="asc";default:return this.arrowVisible=!0,this.arrowDirection="down",this.orderDir="desc"}}onMouseEnter(){var M;(null===(M=this.datable.config)||void 0===M?void 0:M.disableSort)||(this.arrowVisible=!0)}onMouseLeave(){this.arrowVisible=!1,this.orderDir||(this.arrowDirection="down")}handleClick(){var M;(null===(M=this.datable.config)||void 0===M?void 0:M.disableSort)||this.changeSort()}handleKeydown(M){var I;!(null===(I=this.datable.config)||void 0===I?void 0:I.disableSort)&&(M.keyCode===P.L_||M.keyCode===P.K5)&&(M.preventDefault(),this.changeSort())}}return i.\u0275fac=function(M){return new(M||i)(d.Y36(v.x),d.Y36(d.sBO),d.Y36(f.tE),d.Y36(d.SBq))},i.\u0275cmp=d.Xpm({type:i,selectors:[["","table-sort-header",""]],viewQuery:function(M,I){if(1&M&&d.Gf(x,7),2&M){let q;d.iGM(q=d.CRH())&&(I.columnName=q.first)}},hostAttrs:["tabindex","0"],hostVars:4,hostBindings:function(M,I){1&M&&d.NdJ("click",function(){return I.handleClick()})("keydown",function(F){return I.handleKeydown(F)})("mouseenter",function(){return I.onMouseEnter()})("mouseleave",function(){return I.onMouseLeave()}),2&M&&d.ekj("active",I.orderDir)("sort-disabled",I.sortDisabled)},inputs:{orderBy:["table-sort-header","orderBy"]},attrs:g,ngContentSelectors:a,decls:5,vars:3,consts:[[1,"text"],["columnName",""],[1,"icon-wrapper",3,"ngClass"],["svgIcon","arrow-downward",1,"sort-icon"]],template:function(M,I){1&M&&(d.F$t(),d.TgZ(0,"span",0,1),d.Hsn(2),d.qZA(),d.TgZ(3,"span",2),d._UZ(4,"mat-icon",3),d.qZA()),2&M&&(d.xp6(3),d.Q6J("ngClass",I.arrowDirection),d.xp6(1),d.ekj("hint-visible",I.arrowVisible))},directives:[O.mk,t.Hw],styles:["[_nghost-%COMP%]{outline:none}[_nghost-%COMP%]:not(.sort-disabled){cursor:pointer}.active[_nghost-%COMP%]   .sort-icon[_ngcontent-%COMP%]{color:var(--be-text);opacity:1;transform:translate(0)}.cdk-keyboard-focused[_nghost-%COMP%]   .text[_ngcontent-%COMP%]{border-bottom:solid 1px currentColor}.text[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;text-transform:capitalize}.sort-icon[_ngcontent-%COMP%]{width:15px;height:15px;vertical-align:middle;transition:all 225ms cubic-bezier(.4,0,.2,1);transform:translateY(25%);opacity:0}.icon-wrapper[_ngcontent-%COMP%]{display:inline-block;margin-left:4px;transition:transform 225ms cubic-bezier(.4,0,.2,1)}.icon-wrapper[_ngcontent-%COMP%]:not(.down){transform:rotate(180deg)}.hint-visible[_ngcontent-%COMP%]{opacity:1;transform:translate(0)}"],changeDetection:0}),i})()}}]);
//# sourceMappingURL=369.9048e11f8562024de9cf.js.map